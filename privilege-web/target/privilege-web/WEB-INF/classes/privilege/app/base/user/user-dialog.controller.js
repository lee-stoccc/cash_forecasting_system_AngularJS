(function(){angular.module("devplatformApp").controller("UserDialogController",a);a.$inject=["ngVerify","$scope","$stateParams","UserService","$state","$uibModalInstance","$timeout","DateUtils","$compile","PublicService"];function a(c,m,l,h,b,k,d,f,e,i){if(l.id){m.type="edit";h.getUser(l.id).then(function(n){m.user=n.data;if(!i.isEmptyObject(m.user.expireDate)){m.user.expireDate=dateToGMT(m.user.expireDate)}if(!i.isEmptyObject(m.user.passwordExpireDate)){m.user.passwordExpireDate=dateToGMT(m.user.passwordExpireDate)}m.isOpen=m.user.activated==true?true:false})}m.save=j;m.clear=g;function j(){m.user.activated=m.isOpen?true:false;m.isSaving=true;var n="devplatformApp.user.created";if(m.user.id!==null&&m.user.id!==undefined){n="devplatformApp.user.updated"}else{n="devplatformApp.user.created"}h.saveUser(m.user).then(function(o){if(o.statusCode==="0000"){i.openDialog(n);k.close();b.go("app.user")}else{m.isSaving=false;n=o.msgCode;i.openDialog(n)}})}m.dateformat="yyyy-MM-dd HH:mm";m.datePickerOpenStatus={};m.datePickerOpenStatus.expireDate=false;m.datePickerOpenStatus.passwordExpireDate=false;m.openCalendar=function(n){m.datePickerOpenStatus[n]=true};function g(n){k.close();b.go("app.user",{},{reload:n})}}})();