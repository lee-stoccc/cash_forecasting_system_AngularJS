(function(){angular.module("devplatformApp").controller("SelectRolesController",a);a.$inject=["$uibModalInstance","UserService","$state","$scope","$stateParams","$timeout","ngDialog","PublicService"];function a(n,i,b,q,o,d,m,j){q.roleList=[];q.userRoleList=[];q.roleIds=[];q.isRoleActive=0;q.isUserRoleActive=0;q.checkRole=p;q.checkUserRole=h;q.selectRole=g;q.selectAllRole=c;q.selectUserRole=k;q.selectAllUserRole=l;q.saveUserRole=f;q.cancelDialog=e;r();function r(){i.getUserRole({userId:o.userId}).then(function(s){if(s.statusCode==="0000"){q.roleList=s.data.roleList;q.userRoleList=s.data.userRoleList}},function(){q.message="devplatformApp.user.prompt.failedData";j.showMessageDialog(q)})}function p(s){q.isRoleActive=s}function h(s){q.isUserRoleActive=s}function g(){if(q.roleList!==null&&q.roleList.length>0){var s=q.roleList[q.isRoleActive];q.userRoleList.push(s);q.roleList.splice(q.isRoleActive,1)}}function k(){if(q.userRoleList!==null&&q.userRoleList.length>0){var s=q.userRoleList[q.isUserRoleActive];q.roleList.push(s);q.userRoleList.splice(q.isUserRoleActive,1)}}function c(){if(q.roleList!==null&&q.roleList.length>0){for(var s=0;s<q.roleList.length;s++){var t=q.roleList[s];q.userRoleList.push(t)}q.roleList=[]}}function l(){if(q.userRoleList!==null&&q.userRoleList.length>0){for(var s=0;s<q.userRoleList.length;s++){var t=q.userRoleList[s];q.roleList.push(t)}q.userRoleList=[]}}function f(){if(q.userRoleList!==null&&q.userRoleList.length>0){for(var s=0;s<q.userRoleList.length;s++){q.roleIds.push(q.userRoleList[s]["id"])}}else{var t="devplatformApp.user.prompt.selectRoles";j.openDialog(t);return}if(!q.saveCommit){q.saveCommit=true;i.saveUserRole({userId:o.userId,roleIds:q.roleIds}).then(function(u){q.saveCommit=false;var v="devplatformApp.user.prompt.saveSuccess";j.openDialog(v);e();b.go("app.user")},function(){q.saveCommit=false;var u="devplatformApp.user.prompt.saveFailed";j.openDialog(u)})}}function e(){n.dismiss("cancel");b.go("app.user")}}})();