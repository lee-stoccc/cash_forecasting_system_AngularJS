(function(){angular.module("devplatformApp").controller("PrivilegeHeadController",a);a.$inject=["$scope","ngDialog","LayoutService","$sessionStorage","$rootScope","$localStorage","$state"];function a(c,i,e,h,b,d,f){c.init=function(){c.tips=true;c.bellsNumber=0;g();c.getWarningBells();c.editPassword=function(){c.message="确认修改密码吗？";c.type="confirm";i.open({template:"app/common/dialog.html",className:"ngdialog-theme-default",scope:c,controller:function(j){j.confirm=function(){j.loginName=JSON.parse(localStorage.user).login;$uibModal.open({templateUrl:"privilege/app/base/user/user-editPassword.html",controller:"UserEditPasswordController",size:"lg",keyboard:false,backdrop:"static",resolve:{deps:["$ocLazyLoad",function(k){return k.load(["privilege/app/base/user/user-editPassword.controller.js","privilege/app/base/user/user.service.js"])}],translatePartialLoader:["$translate","$translatePartialLoader",function(l,k){k.addPart("user");return l.refresh()}],dep:function(){return j}}});j.closeThisDialog()}}})}};c.getWarningBells=function(j){setInterval(function(){g()},3000000)};function g(){e.getWarningBells().then(function(j){if(j.statusCode==="0000"){if(Number(j.msgCode)>99){$("#bellsNumber").text("99+")}else{$("#bellsNumber").text(j.msgCode)}}})}c.logout=function(){if(localStorage.Token){e.layoutLog(localStorage.user).then(function(j){if(j.statusCode==="0000"){delete d.authenticationToken;delete h.authenticationToken;delete d.userInfo;delete d.header;delete localStorage.user;delete localStorage.Token;h.tabList=[];h.tabLink={};f.go("login")}})}};$(".navbar-right").mouseover(function(){$(this).children("span").css("color","black")}).mouseout(function(){$(this).children("span").css("color","white")});c.goBellInfo=function(){i.open({template:"fc/app/warningInformation/warningInformation.html",className:"",scope:c,controller:"WarningInformationController"})}}})();