(function(){angular.module("devplatformApp").controller("FormComponentManagementController",a);a.$inject=["PublicService","$state","MenuManagementService","$scope","$stateParams","ngDialog","$uibModalInstance","$timeout"];function a(f,b,g,k,j,h,i,c){k.formChecked=[];k.componentChecked=[];k.menuFormId=j.menuFormId;k.select_all_form=false;k.select_all_component=false;k.loadForm=d;k.loadForm();function d(){k.formChecked=[];if(j.menuFormId){g.getAllSysForms({menuId:j.menuFormId}).then(function(l){k.formList=l.data})}}k.clear=function(){i.dismiss("cancel");b.go("app.menu-management")};k.loadComponent=e;function e(l){k.componentChecked=[];k.formId=l;if(l){g.getAllSysComponents({formId:l}).then(function(m){k.componentList=m.data})}}k.addForm=function(){k.formId=null;if(!k.menuFormId){var l="devplatformApp.menuManagement.noMenuMsg";k.showDialog(l);return}else{h.openConfirm({template:"privilege/app/base/menu-management/form-component-management/form-edit.html",className:"ngdialog-theme-default",controller:"FormEditController",width:"500px",scope:k}).then(d)}};k.editForm=function(){if(k.formChecked.length!==1){var l="devplatformApp.menuManagement.mustSelect";k.showDialog(l);return}else{k.formId=k.formChecked[0];h.openConfirm({template:"privilege/app/base/menu-management/form-component-management/form-edit.html",className:"ngdialog-theme-default",controller:"FormEditController",width:"500px",scope:k}).then(d)}};k.deleteForm=function(){if(k.formChecked.length===0){var l="devplatformApp.menuManagement.mustSelect";k.showDialog(l);return}k.message="devplatformApp.menuManagement.delConfirmForm";k.type="confirm";h.openConfirm({template:"app/common/dialog.html",className:"ngdialog-theme-default",scope:k,controller:["$scope",function(m){m.confirm=function(){g.deleteSysForm(m.formChecked).then(function(){m.closeThisDialog();l="global.deleteSuccess";f.openDialog(l);m.loadForm();m.loadComponent(m.formId)})}}]})};k.addComponent=function(){if(!k.formId){var l="devplatformApp.menuManagement.mustSelect";k.showDialog(l);return}else{k.componentId=null;h.openConfirm({template:"privilege/app/base/menu-management/form-component-management/component-edit.html",className:"ngdialog-theme-default",controller:"ComponentEditController",scope:k}).then(function(m){k.loadComponent(k.formId)})}};k.editComponent=function(){if(k.componentChecked.length!==1){var l="devplatformApp.menuManagement.mustSelect";k.showDialog(l);return}else{k.componentId=k.componentChecked[0];h.openConfirm({template:"privilege/app/base/menu-management/form-component-management/component-edit.html",className:"ngdialog-theme-default",controller:"ComponentEditController",scope:k}).then(function(m){k.loadComponent(k.formId)})}};k.deleteComponent=function(){if(k.componentChecked.length===0){var l="devplatformApp.menuManagement.mustSelect";k.showDialog(l);return}k.message="devplatformApp.menuManagement.delConfirmForm";k.type="confirm";h.openConfirm({template:"app/common/dialog.html",className:"ngdialog-theme-default",scope:k,controller:["$scope",function(m){m.confirm=function(){g.deleteSysComponent(m.componentChecked).then(function(n){m.loadComponent(m.formId);m.closeThisDialog();l="global.deleteSuccess";f.openDialog(l)})}}]})};k.selectAllForms=function(){if(k.select_all_form){angular.forEach(k.formList,function(l){l.checked=true;k.formChecked.push(l.id)})}else{angular.forEach(k.formList,function(l){l.checked=false;k.formChecked=[]})}};k.selectOneForm=function(){angular.forEach(k.formList,function(m){var l=k.formChecked.indexOf(m.id);if(m.checked&&l===-1){k.formChecked.push(m.id)}else{if(!m.checked&&l!==-1){k.formChecked.splice(l,1)}}});if(k.formList.length===k.formChecked.length){k.select_all_form=true}else{k.select_all_form=false}};k.selectAllComponents=function(){if(k.select_all_component){angular.forEach(k.componentList,function(l){l.checked=true;k.componentChecked.push(l.id)})}else{angular.forEach(k.componentList,function(l){l.checked=false;k.componentChecked=[]})}};k.selectOneComponent=function(){angular.forEach(k.componentList,function(m){var l=k.componentChecked.indexOf(m.id);if(m.checked&&l===-1){k.componentChecked.push(m.id)}else{if(!m.checked&&l!==-1){k.componentChecked.splice(l,1)}}});if(k.componentList.length===k.componentChecked.length){k.select_all_component=true}else{k.select_all_component=false}};k.showDialog=function(l){h.openConfirm({template:"app/common/dialog.html",className:"ngdialog-theme-default",controller:["$scope",function(m){m.message=l;m.type=""}]});c(function(){h.close()},2000)}}})();