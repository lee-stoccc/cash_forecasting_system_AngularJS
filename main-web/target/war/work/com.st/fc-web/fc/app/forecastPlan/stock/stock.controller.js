(function(){angular.module("devplatformApp").controller("StockController",a);a.$inject=["StockService","ngDialog","$state","$scope","PublicService","$uibModal","$uibModalInstance","FcPublicService"];function a(d,f,b,h,e,c,g,j){h.formParam={};h.datePickerOpenStatus={};h.tablesConfig={showCheckBox:true,tableWidth:"table-width",tableTitles:[{title:"stock.bankName",filed:"bankName",type:"text",width:"table-item-pre-5"},{title:"stock.time",filed:"time",type:"dateTime",format:"yyyy-MM-dd HH:mm",width:"table-item-pre-4"},{title:"stock.currentStock",filed:"currentStock",type:"text",width:"table-item-pre-3"},],url:"api/stock/page",formParams:{bankId:h.formParam.bankId,date:h.formParam.date,}};h.init=function(){i()};h.bankStockSelectItem=function(k){h.formParam.bankId=k.id};function i(){h.showCheckBox=false;j.getBanksList().then(function(k){if(k.statusCode==="0000"){h.bankList=k.data}})}h.loadAll=function(){h.refreshTableList(h.formParam)};h.resetSearch=function(){h.formParam={};h.bankName=""};h.openCalendar=function(k){h.datePickerOpenStatus[k]=true};h.addStock=function(){b.go("app.stock-edit",{id:""})};h.editStock=function(){h.choseArr=h.getCheckValues("delFlag").check;if(h.choseArr.length!=1){var k="global.chooseOneEdit";e.openDialog(k);return}else{var l=h.choseArr[0];b.go("app.stock-edit",{id:l})}};h.batchDelete=function(){h.choseArr=h.getCheckValues("activated").check;var k="";if(e.isEmptyObject(h.choseArr[0])){k="global.selectDelete";e.openDialog(k);return}k="global.messages.deleteConfirm";e.showConfirmDialog(k,"confirmDelete",h,h.checked)};h.confirmDelete=function(k){d.deleteStock(k).then(function(l){if(l.statusCode==="0000"){h.loadAll();var m="global.messages.deleteSuccess";e.openDialog(m)}})};h.clear=function(k){g.close();b.go("app.forecastPlan",{},{reload:k})}}})();