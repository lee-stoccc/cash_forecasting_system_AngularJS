define(["./core","./var/document","./var/rnotwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseXML","./event/trigger","./deferred","./serialize"],function(m,o,q,a,r,h){var c=/%20/g,j=/#.*$/,e=/([?&])_=[^&]*/,b=/^(.*?):[ \t]*([^\r\n]*)$/mg,f=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,g=/^(?:GET|HEAD)$/,i=/^\/\//,v={},t={},k="*/".concat("*"),u=o.createElement("a");u.href=a.href;function l(w){return function(A,B){if(typeof A!=="string"){B=A;A="*"}var x,y=0,z=A.toLowerCase().match(q)||[];if(m.isFunction(B)){while((x=z[y++])){if(x[0]==="+"){x=x.slice(1)||"*";(w[x]=w[x]||[]).unshift(B)}else{(w[x]=w[x]||[]).push(B)}}}}}function p(w,y,C,z){var x={},A=(w===t);function B(D){var E;x[D]=true;m.each(w[D]||[],function(G,F){var H=F(y,C,z);if(typeof H==="string"&&!A&&!x[H]){y.dataTypes.unshift(H);B(H);return false}else{if(A){return !(E=H)}}});return E}return B(y.dataTypes[0])||!x["*"]&&B("*")}function n(y,z){var x,w,A=m.ajaxSettings.flatOptions||{};for(x in z){if(z[x]!==undefined){(A[x]?y:(w||(w={})))[x]=z[x]}}if(w){m.extend(true,y,w)}return y}function s(E,D,A){var z,B,y,w,x=E.contents,C=E.dataTypes;while(C[0]==="*"){C.shift();if(z===undefined){z=E.mimeType||D.getResponseHeader("Content-Type")}}if(z){for(B in x){if(x[B]&&x[B].test(z)){C.unshift(B);break}}}if(C[0] in A){y=C[0]}else{for(B in A){if(!C[0]||E.converters[B+" "+C[0]]){y=B;break}if(!w){w=B}}y=y||w}if(y){if(y!==C[0]){C.unshift(y)}return A[y]}}function d(H,z,E,x){var w,C,F,A,y,G={},D=H.dataTypes.slice();if(D[1]){for(F in H.converters){G[F.toLowerCase()]=H.converters[F]}}C=D.shift();while(C){if(H.responseFields[C]){E[H.responseFields[C]]=z}if(!y&&x&&H.dataFilter){z=H.dataFilter(z,H.dataType)}y=C;C=D.shift();if(C){if(C==="*"){C=y}else{if(y!=="*"&&y!==C){F=G[y+" "+C]||G["* "+C];if(!F){for(w in G){A=w.split(" ");if(A[1]===C){F=G[y+" "+A[0]]||G["* "+A[0]];if(F){if(F===true){F=G[w]}else{if(G[w]!==true){C=A[0];D.unshift(A[1])}}break}}}}if(F!==true){if(F&&H["throws"]){z=F(z)}else{try{z=F(z)}catch(B){return{state:"parsererror",error:F?B:"No conversion from "+y+" to "+C}}}}}}}}return{state:"success",data:z}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:a.href,type:"GET",isLocal:f.test(a.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":k,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(x,w){return w?n(n(x,m.ajaxSettings),w):n(m.ajaxSettings,x)},ajaxPrefilter:l(v),ajaxTransport:l(t),ajax:function(A,y){if(typeof A==="object"){y=A;A=undefined}y=y||{};var M,C,R,z,G,w,P,x,L,B,F=m.ajaxSetup({},y),T=F.context||F,I=F.context&&(T.nodeType||T.jquery)?m(T):m.event,S=m.Deferred(),O=m.Callbacks("once memory"),D=F.statusCode||{},J={},Q={},E="canceled",K={readyState:0,getResponseHeader:function(V){var U;if(P){if(!z){z={};while((U=b.exec(R))){z[U[1].toLowerCase()]=U[2]}}U=z[V.toLowerCase()]}return U==null?null:U},getAllResponseHeaders:function(){return P?R:null},setRequestHeader:function(U,V){if(P==null){U=Q[U.toLowerCase()]=Q[U.toLowerCase()]||U;J[U]=V}return this},overrideMimeType:function(U){if(P==null){F.mimeType=U}return this},statusCode:function(V){var U;if(V){if(P){K.always(V[K.status])}else{for(U in V){D[U]=[D[U],V[U]]}}}return this},abort:function(V){var U=V||E;if(M){M.abort(U)}H(0,U);return this}};S.promise(K);F.url=((A||F.url||a.href)+"").replace(i,a.protocol+"//");F.type=y.method||y.type||F.method||F.type;F.dataTypes=(F.dataType||"*").toLowerCase().match(q)||[""];if(F.crossDomain==null){w=o.createElement("a");try{w.href=F.url;w.href=w.href;F.crossDomain=u.protocol+"//"+u.host!==w.protocol+"//"+w.host}catch(N){F.crossDomain=true}}if(F.data&&F.processData&&typeof F.data!=="string"){F.data=m.param(F.data,F.traditional)}p(v,F,y,K);if(P){return K}x=m.event&&F.global;if(x&&m.active++===0){m.event.trigger("ajaxStart")}F.type=F.type.toUpperCase();F.hasContent=!g.test(F.type);C=F.url.replace(j,"");if(!F.hasContent){B=F.url.slice(C.length);if(F.data){C+=(h.test(C)?"&":"?")+F.data;delete F.data}if(F.cache===false){C=C.replace(e,"");B=(h.test(C)?"&":"?")+"_="+(r++)+B}F.url=C+B}else{if(F.data&&F.processData&&(F.contentType||"").indexOf("application/x-www-form-urlencoded")===0){F.data=F.data.replace(c,"+")}}if(F.ifModified){if(m.lastModified[C]){K.setRequestHeader("If-Modified-Since",m.lastModified[C])}if(m.etag[C]){K.setRequestHeader("If-None-Match",m.etag[C])}}if(F.data&&F.hasContent&&F.contentType!==false||y.contentType){K.setRequestHeader("Content-Type",F.contentType)}K.setRequestHeader("Accept",F.dataTypes[0]&&F.accepts[F.dataTypes[0]]?F.accepts[F.dataTypes[0]]+(F.dataTypes[0]!=="*"?", "+k+"; q=0.01":""):F.accepts["*"]);for(L in F.headers){K.setRequestHeader(L,F.headers[L])}if(F.beforeSend&&(F.beforeSend.call(T,K,F)===false||P)){return K.abort()}E="abort";O.add(F.complete);K.done(F.success);K.fail(F.error);M=p(t,F,y,K);if(!M){H(-1,"No Transport")}else{K.readyState=1;if(x){I.trigger("ajaxSend",[K,F])}if(P){return K}if(F.async&&F.timeout>0){G=window.setTimeout(function(){K.abort("timeout")},F.timeout)}try{P=false;M.send(J,H)}catch(N){if(P){throw N}H(-1,N)}}function H(Z,V,aa,X){var U,ad,ab,Y,ac,W=V;if(P){return}P=true;if(G){window.clearTimeout(G)}M=undefined;R=X||"";K.readyState=Z>0?4:0;U=Z>=200&&Z<300||Z===304;if(aa){Y=s(F,K,aa)}Y=d(F,Y,K,U);if(U){if(F.ifModified){ac=K.getResponseHeader("Last-Modified");if(ac){m.lastModified[C]=ac}ac=K.getResponseHeader("etag");if(ac){m.etag[C]=ac}}if(Z===204||F.type==="HEAD"){W="nocontent"}else{if(Z===304){W="notmodified"}else{W=Y.state;ad=Y.data;ab=Y.error;U=!ab}}}else{ab=W;if(Z||!W){W="error";if(Z<0){Z=0}}}K.status=Z;K.statusText=(V||W)+"";if(U){S.resolveWith(T,[ad,W,K])}else{S.rejectWith(T,[K,W,ab])}K.statusCode(D);D=undefined;if(x){I.trigger(U?"ajaxSuccess":"ajaxError",[K,F,U?ad:ab])}O.fireWith(T,[K,W]);if(x){I.trigger("ajaxComplete",[K,F]);if(!(--m.active)){m.event.trigger("ajaxStop")}}}return K},getJSON:function(w,x,y){return m.get(w,x,y,"json")},getScript:function(w,x){return m.get(w,undefined,x,"script")}});m.each(["get","post"],function(w,x){m[x]=function(y,A,B,z){if(m.isFunction(A)){z=z||B;B=A;A=undefined}return m.ajax(m.extend({url:y,type:x,dataType:z,data:A,success:B},m.isPlainObject(y)&&y))}});return m});