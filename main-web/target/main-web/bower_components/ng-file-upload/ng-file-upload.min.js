/*! 12.0.4 */
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(b){return function(a,f){if("__setXHR_"===a){var e=f(this);e instanceof Function&&e(this)}else{b.apply(this,arguments)}}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.0.4",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(i,h,n){function m(o){function g(d){b.notify&&b.notify(d),a.progressFunc&&n(function(){a.progressFunc(d)})}function f(d){return null!=o._start&&j?{loaded:d.loaded+o._start,total:o._file&&o._file.size||d.total,type:d.type,config:o,lengthComputable:!0,target:d.target}:d}function c(){i(o).then(function(d){j&&o._chunkSize&&!o._finished&&o._file?(g({loaded:o._end,total:o._file&&o._file.size,config:o,type:"progress"}),k.upload(o,!0)):(o._finished&&delete o._finished,b.resolve(d))},function(d){b.reject(d)},function(d){b.notify(d)})}o.method=o.method||"POST",o.headers=o.headers||{};var b=o._deferred=o._deferred||h.defer(),a=b.promise;return o.disableProgress||(o.headers.__setXHR_=function(){return function(d){d&&d.upload&&d.upload.addEventListener&&(o.__XHR=d,o.xhrFn&&o.xhrFn(d),d.upload.addEventListener("progress",function(e){e.config=o,g(f(e))},!1),d.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=o,g(f(e)))},!1))}}),j?o._chunkSize&&o._end&&!o._finished?(o._start=o._end,o._end+=o._chunkSize,c()):o.resumeSizeUrl?i.get(o.resumeSizeUrl).then(function(d){o._start=o.resumeSizeResponseReader?o.resumeSizeResponseReader(d.data):parseInt((null==d.data.size?d.data:d.data.size).toString()),o._chunkSize&&(o._end=o._start+o._chunkSize),c()},function(d){throw d}):o.resumeSize?o.resumeSize().then(function(d){o._start=d,c()},function(d){throw d}):(o._chunkSize&&(o._start=0,o._end=o._start+o._chunkSize),c()):c(),a.success=function(d){return a.then(function(e){d(e.data,e.status,e.headers,o)}),a},a.error=function(d){return a.then(null,function(e){d(e.data,e.status,e.headers,o)}),a},a.progress=function(d){return a.progressFunc=d,a.then(null,null,function(e){d(e)}),a},a.abort=a.pause=function(){return o.__XHR&&n(function(){o.__XHR.abort()}),a},a.xhr=function(d){return o.xhrFn=function(e){return function(){e&&e.apply(a,arguments),d.apply(a,arguments)}}(o.xhrFn),a},k.promisesCount++,a["finally"](function(){k.promisesCount--}),a}function l(e){var d={};for(var f in e){e.hasOwnProperty(f)&&(d[f]=e[f])}return d}var k=this;k.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var j=this.isResumeSupported();this.isUploadInProgress=function(){return k.promisesCount>0},this.rename=function(d,c){return d.ngfName=c,d},this.jsonBlob=function(d){null==d||angular.isString(d)||(d=JSON.stringify(d));var c=new window.Blob([d],{type:"application/json"});return c._ngfBlob=!0,c},this.json=function(b){return angular.toJson(b)},this.isFile=function(b){return null!=b&&(b instanceof window.Blob||b.flashId&&b.name&&b.size)},this.upload=function(e,d){function o(a,q){if(a._ngfBlob){return a}if(e._file=e._file||a,null!=e._start&&j){e._end&&e._end>=a.size&&(e._finished=!0,e._end=a.size);var p=a.slice(e._start,e._end||a.size);return p.name=a.name,p.ngfName=a.ngfName,e._chunkSize&&(q.append("_chunkSize",e._chunkSize),q.append("_currentChunkSize",e._end-e._start),q.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),q.append("_totalSize",e._file.size)),p}return a}function g(a,t,s){if(void 0!==t){if(angular.isDate(t)&&(t=t.toISOString()),angular.isString(t)){a.append(s,t)}else{if(k.isFile(t)){var r=o(t,a),q=s.split(",");q[1]&&(r.ngfName=q[1].replace(/^\s+|\s+$/g,""),s=q[0]),e._fileKey=e._fileKey||s,a.append(s,r,r.ngfName||r.name)}else{if(angular.isObject(t)){if(t.$$ngfCircularDetection){throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+s}t.$$ngfCircularDetection=!0;try{for(var p in t){if(t.hasOwnProperty(p)&&"$$ngfCircularDetection"!==p){var c=null==e.objectKey?"[i]":e.objectKey;t.length&&parseInt(p)>-1&&(c=null==e.arrayKey?c:e.arrayKey),g(a,t[p],s+c.replace(/[ik]/g,p))}}}finally{delete t.$$ngfCircularDetection}}else{a.append(s,t)}}}}}function f(){e._chunkSize=k.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(a){var r,q=new window.FormData;a=a||e.fields||{},e.file&&(a.file=e.file);for(r in a){if(a.hasOwnProperty(r)){var p=a[r];e.formDataAppender?e.formDataAppender(q,r,p):g(q,p,r)}}return q})}return d||(e=l(e)),e._isDigested||(e._isDigested=!0,f()),m(e)},this.http=function(a){return a=l(a),a.transformRequest=a.transformRequest||function(c){return window.ArrayBuffer&&c instanceof window.ArrayBuffer||c instanceof window.Blob?c:i.defaults.transformRequest[0].apply(this,arguments)},a._chunkSize=k.translateScalars(a.resumeChunkSize),a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null,m(a)},this.translateScalars=function(b){if(angular.isString(b)){if(b.search(/kb/i)===b.length-2){return parseFloat(1024*b.substring(0,b.length-2))}if(b.search(/mb/i)===b.length-2){return parseFloat(1048576*b.substring(0,b.length-2))}if(b.search(/gb/i)===b.length-2){return parseFloat(1073741824*b.substring(0,b.length-2))}if(b.search(/b/i)===b.length-1){return parseFloat(b.substring(0,b.length-1))}if(b.search(/s/i)===b.length-1){return parseFloat(b.substring(0,b.length-1))}if(b.search(/m/i)===b.length-1){return parseFloat(60*b.substring(0,b.length-1))}if(b.search(/h/i)===b.length-1){return parseFloat(3600*b.substring(0,b.length-1))}}return b},this.urlToBlob=function(b){var a=h.defer();return i({url:b,method:"get",responseType:"arraybuffer"}).then(function(f){var d=new Uint8Array(f.data),o=f.headers("content-type")||"image/WebP",g=new window.Blob([d],{type:o});a.resolve(g)},function(c){a.reject(c)}),a.promise},this.setDefaults=function(b){this.defaults=b||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(r,q,p,o,n){function m(f,d,h){var g=[j.emptyPromise()];return angular.forEach(f,function(b,a){0===b.type.indexOf("image/jpeg")&&j.attrGetter("ngfFixOrientation",d,h,{$file:b})&&g.push(j.happyPromise(j.applyExifRotation(b),b).then(function(c){f.splice(a,1,c)}))}),o.all(g)}function l(g,d,s){var i=j.attrGetter("ngfResize",d,s);if(!i||!j.isResizeSupported()||!g.length){return j.emptyPromise()}if(!(i instanceof Function)){return k(i,g,d,s)}var h=o.defer();i(g).then(function(a){k(a,g,d,s).then(function(b){h.resolve(b)},function(b){h.reject(b)})},function(b){h.reject(b)})}function k(i,d,w,v){function u(c,b){if(0===c.type.indexOf("image")){if(i.pattern&&!j.validatePattern(c,i.pattern)){return}var a=j.resize(c,i.width,i.height,i.quality,i.type,i.ratio,i.centerCrop,function(f,e){return j.attrGetter("ngfResizeIf",w,v,{$width:f,$height:e,$file:c})},i.restoreExif!==!1);t.push(a),a.then(function(e){d.splice(b,1,e)},function(e){c.$error="resize",c.$errorParam=(e?(e.message?e.message:e)+": ":"")+(c&&c.name)})}}for(var t=[j.emptyPromise()],s=0;s<d.length;s++){u(d[s],s)}return o.all(t)}var j=n;return j.getAttrWithDefaults=function(e,d){if(null!=e[d]){return e[d]}var f=j.defaults[d];return null==f?f:angular.isString(f)?f:JSON.stringify(f)},j.attrGetter=function(a,u,t,s){var i=this.getAttrWithDefaults(u,a);if(!t){return i}try{return s?r(i)(t,s):r(i)(t)}catch(h){if(a.search(/min|max|pattern/i)){return i}throw h}},j.shouldUpdateOn=function(f,e,h){var g=j.attrGetter("ngModelOptions",e,h);return g&&g.updateOn?g.updateOn.split(" ").indexOf(f)>-1:!0},j.emptyPromise=function(){var b=o.defer(),d=arguments;return q(function(){b.resolve.apply(b,d)}),b.promise},j.rejectPromise=function(){var b=o.defer(),d=arguments;return q(function(){b.reject.apply(b,d)}),b.promise},j.happyPromise=function(b,f){var d=o.defer();return b.then(function(c){d.resolve(c)},function(c){q(function(){throw c}),d.resolve(f)}),d.promise},j.updateModel=function(R,Q,P,O,N,M,L){function K(s,h,e,d,c){Q.$$ngfPrevValidFiles=s,Q.$$ngfPrevInvalidFiles=h;var v=s&&s.length?s[0]:null,u=h&&h.length?h[0]:null;R&&(j.applyModelValidation(R,s),R.$setViewValue(c?v:s)),O&&r(O)(P,{$files:s,$file:v,$newFiles:e,$duplicateFiles:d,$invalidFiles:h,$invalidFile:u,$event:M});var t=j.attrGetter("ngfModelInvalid",Q);t&&q(function(){r(t).assign(P,c?u:h)}),q(function(){})}function J(){function e(s,c){return s.name===c.name&&(s.$ngfOrigSize||s.size)===(c.$ngfOrigSize||c.size)&&s.type===c.type}function d(s){var t;for(t=0;t<D.length;t++){if(e(s,D[t])){return !0}}for(t=0;t<C.length;t++){if(e(s,C[t])){return !0}}return !1}if(N){E=[],B=[];for(var h=0;h<N.length;h++){d(N[h])?B.push(N[h]):E.push(N[h])}}}function I(c){return angular.isArray(c)?c:[c]}function H(){g=[],i=[],angular.forEach(E,function(c){c.$error?i.push(c):g.push(c)})}function F(){function c(){q(function(){K(f?D.concat(g):g,f?C.concat(i):i,N,B,b)},G&&G.debounce?G.debounce.change||G.debounce:0)}l(a?E:g,Q,P).then(function(){a?j.validate(E,D.length,R,Q,P).then(function(){H(),c()}):c()},function(d){throw"Could not resize files "+d})}var E,D,C,B=[],i=[],g=[];D=Q.$$ngfPrevValidFiles||[],C=Q.$$ngfPrevInvalidFiles||[],R&&R.$modelValue&&(D=I(R.$modelValue));var f=j.attrGetter("ngfKeep",Q,P);E=(N||[]).slice(0),("distinct"===f||j.attrGetter("ngfKeepDistinct",Q,P)===!0)&&J(Q,P);var b=!f&&!j.attrGetter("ngfMultiple",Q,P)&&!j.attrGetter("multiple",Q);if(!f||E.length){j.attrGetter("ngfBeforeModelChange",Q,P,{$files:N,$file:N&&N.length?N[0]:null,$newFiles:E,$duplicateFiles:B,$event:M});var a=j.attrGetter("ngfValidateAfterResize",Q,P),G=j.attrGetter("ngModelOptions",Q,P);j.validate(E,D.length,R,Q,P).then(function(){L?K(E,[],N,B,b):(G&&G.allowInvalid||a?g=E:H(),j.attrGetter("ngfFixOrientation",Q,P)&&j.isExifSupported()?m(g,Q,P).then(function(){F()}):F())})}},j}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(i,h,n,m){function l(e){var d=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(d&&d.length>2){var f=m.defaults.androidFixMinorVersion||4;return parseInt(d[1])<4||parseInt(d[1])===f&&parseInt(d[2])<f}return -1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function k(P,O,N,M,L,K,J,I){function H(){return"input"===O[0].tagName.toLowerCase()&&N.type&&"file"===N.type.toLowerCase()}function G(){return y("ngfChange")||y("ngfSelect")}function F(a){if(I.shouldUpdateOn("change",N,P)){for(var o=a.__files_||a.target&&a.target.files,d=[],c=0;c<o.length;c++){d.push(o[c])}I.updateModel(M,N,P,G(),d.length?d:null,a)}}function E(b){if(O!==b){for(var o=0;o<O[0].attributes.length;o++){var f=O[0].attributes[o];"type"!==f.name&&"class"!==f.name&&"style"!==f.name&&((null==f.value||""===f.value)&&("required"===f.name&&(f.value="required"),"multiple"===f.name&&(f.value="multiple")),b.attr(f.name,"id"===f.name?"ngf-"+f.value:f.value))}}}function D(){if(H()){return O}var b=angular.element('<input type="file">');E(b);var d=angular.element("<label>upload</label>");return d.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),j.push({el:O,ref:d}),document.body.appendChild(d.append(b)[0]),b}function C(o){if(O.attr("disabled")){return !1}if(!y("ngfSelectDisabled",P)){var b=B(o);if(null!=b){return b}A(o);try{H()||document.body.contains(e[0])||(j.push({el:O,ref:e.parent()}),document.body.appendChild(e.parent()[0]),e.bind("change",F))}catch(a){}return l(navigator.userAgent)?setTimeout(function(){e[0].click()},0):e[0].click(),!1}}function B(f){var d=f.changedTouches||f.originalEvent&&f.originalEvent.changedTouches;if("touchstart"===f.type){return g=d?d[0].clientY:0,!0}if(f.stopPropagation(),f.preventDefault(),"touchend"===f.type){var o=d?d[0].clientY:0;if(Math.abs(o-g)>20){return !1}}}function A(a){I.shouldUpdateOn("click",N,P)&&e.val()&&(e.val(null),I.updateModel(M,N,P,G(),null,a,!0))}function z(d){if(e&&!e.attr("__ngf_ie10_Fix_")){if(!e[0].parentNode){return void (e=null)}d.preventDefault(),d.stopPropagation(),e.unbind("click");var c=e.clone();return e.replaceWith(c),e=c,e.attr("__ngf_ie10_Fix_","true"),e.bind("change",F),e.bind("click",z),e[0].click(),!1}e.removeAttr("__ngf_ie10_Fix_")}var y=function(d,c){return I.attrGetter(d,N,c)};I.registerModelChangeValidator(M,N,P);var x=[];x.push(P.$watch(y("ngfMultiple"),function(){e.attr("multiple",y("ngfMultiple",P))})),x.push(P.$watch(y("ngfCapture"),function(){e.attr("capture",y("ngfCapture",P))})),x.push(P.$watch(y("ngfAccept"),function(){e.attr("accept",y("ngfAccept",P))})),N.$observe("accept",function(){e.attr("accept",y("accept"))}),x.push(function(){N.$$observers&&delete N.$$observers.accept});var g=0,e=O;H()||(e=D()),e.bind("change",F),H()?O.bind("click",A):O.bind("click touchstart touchend",C),-1!==navigator.appVersion.indexOf("MSIE 10")&&e.bind("click",z),M&&M.$formatters.push(function(b){return(null==b||0===b.length)&&e.val()&&e.val(null),b}),P.$on("$destroy",function(){H()||e.parent().remove(),angular.forEach(x,function(b){b()})}),K(function(){for(var d=0;d<j.length;d++){var c=j[d];document.body.contains(c.el[0])||(j.splice(d,1),c.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(O,e,F)}var j=[];return{restrict:"AEC",require:"?ngModel",link:function(d,c,b,a){k(d,c,b,a,i,h,n,m)}}}]),function(){function d(b){return"img"===b.tagName.toLowerCase()?"image":"audio"===b.tagName.toLowerCase()?"audio":"video"===b.tagName.toLowerCase()?"video":/./}function c(r,q,p,o,n,m,l,k){function a(b){var e=r.attrGetter("ngfNoObjectUrl",n,p);r.dataUrl(b,e)["finally"](function(){q(function(){var f=(e?b.$ngfDataUrl:b.$ngfBlobUrl)||b.$ngfDataUrl;k?o.css("background-image","url('"+(f||"")+"')"):o.attr("src",f),f?o.removeClass("ng-hide"):o.addClass("ng-hide")})})}q(function(){var b=p.$watch(n[m],function(h){var g=l;if("ngfThumbnail"===m&&(g||(g={width:o[0].clientWidth,height:o[0].clientHeight}),0===g.width&&window.getComputedStyle)){var e=getComputedStyle(o[0]);g={width:parseInt(e.width.slice(0,-2)),height:parseInt(e.height.slice(0,-2))}}return angular.isString(h)?(o.removeClass("ng-hide"),k?o.css("background-image","url('"+h+"')"):o.attr("src",h)):void (!h||!h.type||0!==h.type.search(d(o[0]))||k&&0!==h.type.indexOf("image")?o.addClass("ng-hide"):g&&r.isResizeSupported()?r.resize(h,g.width,g.height,g.quality).then(function(f){a(f)},function(f){throw f}):a(h))});p.$on("$destroy",function(){b()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(f,e,h){var g=f;return g.base64DataUrl=function(j){if(angular.isArray(j)){var i=h.defer(),k=0;return angular.forEach(j,function(a){g.dataUrl(a,!0)["finally"](function(){if(k++,k===j.length){var b=[];angular.forEach(j,function(l){b.push(l.$ngfDataUrl)}),i.resolve(b,j)}})}),i.promise}return g.dataUrl(j,!0)},g.dataUrl=function(b,k){if(!b){return g.emptyPromise(b,b)}if(k&&null!=b.$ngfDataUrl||!k&&null!=b.$ngfBlobUrl){return g.emptyPromise(k?b.$ngfDataUrl:b.$ngfBlobUrl,b)}var j=k?b.$$ngfDataUrlPromise:b.$$ngfBlobUrlPromise;if(j){return j}var i=h.defer();return e(function(){if(window.FileReader&&b&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||b.size<20000)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||b.size<4000000)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!k){var m;try{m=n.createObjectURL(b)}catch(l){return void e(function(){b.$ngfBlobUrl="",i.reject()})}e(function(){if(b.$ngfBlobUrl=m,m){i.resolve(m,b),g.blobUrls=g.blobUrls||[],g.blobUrlsTotalSize=g.blobUrlsTotalSize||0,g.blobUrls.push({url:m,size:b.size}),g.blobUrlsTotalSize+=b.size||0;for(var o=g.defaults.blobUrlsMaxMemory||268435456,q=g.defaults.blobUrlsMaxQueueSize||200;(g.blobUrlsTotalSize>o||g.blobUrls.length>q)&&g.blobUrls.length>1;){var p=g.blobUrls.splice(0,1)[0];n.revokeObjectURL(p.url),g.blobUrlsTotalSize-=p.size}}})}else{var a=new FileReader;a.onload=function(o){e(function(){b.$ngfDataUrl=o.target.result,i.resolve(o.target.result,b),e(function(){delete b.$ngfDataUrl},1000)})},a.onerror=function(){e(function(){b.$ngfDataUrl="",i.reject()})},a.readAsDataURL(b)}}else{e(function(){b[k?"$ngfDataUrl":"$ngfBlobUrl"]="",i.reject()})}}),j=k?b.$$ngfDataUrlPromise=i.promise:b.$$ngfBlobUrlPromise=i.promise,j["finally"](function(){delete b[k?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),j},g}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(b,e){return{restrict:"AE",link:function(h,g,a){c(b,e,h,g,a,"ngfSrc",b.attrGetter("ngfResize",a,h),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(b,e){return{restrict:"AE",link:function(h,g,a){c(b,e,h,g,a,"ngfBackground",b.attrGetter("ngfResize",a,h),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(b,e){return{restrict:"AE",link:function(j,i,h){var a=b.attrGetter("ngfSize",h,j);c(b,e,j,i,h,"ngfThumbnail",a,b.attrGetter("ngfAsBackground",h,j))}}}]),ngFileUpload.config(["$compileProvider",function(b){b.imgSrcSanitizationWhitelist&&b.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),b.aHrefSanitizationWhitelist&&b.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(f,e){return function(h,g,b){if(angular.isString(h)){return e.trustAsResourceUrl(h)}var a=h&&((g?h.$ngfDataUrl:h.$ngfBlobUrl)||h.$ngfDataUrl);return h&&!a?(!h.$ngfDataUrlFilterInProgress&&angular.isObject(h)&&(h.$ngfDataUrlFilterInProgress=!0,f.dataUrl(h,g)),""):(h&&delete h.$ngfDataUrlFilterInProgress,(h&&a?b?e.trustAsResourceUrl(a):a:h)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(h,g,l){function k(m){var d="",q=[];if(m.length>2&&"/"===m[0]&&"/"===m[m.length-1]){d=m.substring(1,m.length-1)}else{var p=m.split(",");if(p.length>1){for(var o=0;o<p.length;o++){var n=k(p[o]);n.regexp?(d+="("+n.regexp+")",o<p.length-1&&(d+="|")):q=q.concat(n.excludes)}}else{0===m.indexOf("!")?q.push("^((?!"+k(m.substring(1)).regexp+").)*$"):(0===m.indexOf(".")&&(m="*"+m),d="^"+m.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",d=d.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}}return{regexp:d,excludes:q}}function j(d,c){null==c||d.$dirty||(d.$setDirty?d.$setDirty():d.$dirty=!0)}var i=h;return i.validatePattern=function(m,d){if(!d){return !0}var r=k(d),q=!0;if(r.regexp&&r.regexp.length){var p=new RegExp(r.regexp,"i");q=null!=m.type&&p.test(m.type)||null!=m.name&&p.test(m.name)}for(var o=r.excludes.length;o--;){var n=new RegExp(r.excludes[o],"i");q=q&&(null==m.type||n.test(m.type))&&(null==m.name||n.test(m.name))}return q},i.ratioToFloat=function(e){var d=e.toString(),f=d.search(/[x:]/i);return d=f>-1?parseFloat(d.substring(0,f))/parseFloat(d.substring(f+1)):parseFloat(d)},i.registerModelChangeValidator=function(e,d,f){e&&e.$formatters.push(function(a){e.$dirty&&(a&&!angular.isArray(a)&&(a=[a]),i.validate(a,0,e,d,f).then(function(){i.applyModelValidation(e,a)}))})},i.applyModelValidation=function(d,c){j(d,c),angular.forEach(d.$ngfValidations,function(a){d.$setValidity(a.name,a.valid)})},i.getValidationAttr=function(m,f,s,r,q){var p="ngf"+s[0].toUpperCase()+s.substr(1),o=i.attrGetter(p,m,f,{$file:q});if(null==o&&(o=i.attrGetter("ngfValidate",m,f,{$file:q}))){var n=(r||s).split(".");o=o[n[0]],n.length>1&&(o=o&&o[n[1]])}return o},i.validate=function(v,u,t,s,r){function q(a,y,x){if(v){for(var w=v.length,m=null;w--;){var e=v[w];if(e){var d=i.getValidationAttr(s,r,a,y,e);null!=d&&(x(e,d,w)||(e.$error=a,(e.$errorMessages=e.$errorMessages||{})[a]=!0,e.$errorParam=d,v.splice(w,1),m=!1))}}null!==m&&t.$ngfValidations.push({name:a,valid:m})}}function p(z,x,w,e,d){function a(m,c,A){null!=A?e(c,A).then(function(B){d(B,A)?m.resolve():(c.$error=z,(c.$errorMessages=c.$errorMessages||{})[z]=!0,c.$errorParam=A,m.reject())},function(){o("ngfValidateForce",{$file:c})?(c.$error=z,(c.$errorMessages=c.$errorMessages||{})[z]=!0,c.$errorParam=A,m.reject()):m.resolve()}):m.resolve()}var y=[i.emptyPromise()];return v?(v=void 0===v.length?[v]:v,angular.forEach(v,function(c){var m=g.defer();return y.push(m.promise),!w||null!=c.type&&0===c.type.search(w)?void ("dimensions"===z&&null!=i.attrGetter("ngfDimensions",s)?i.imageDimensions(c).then(function(A){a(m,c,o("ngfDimensions",{$file:c,$width:A.width,$height:A.height}))},function(){m.reject()}):"duration"===z&&null!=i.attrGetter("ngfDuration",s)?i.mediaDuration(c).then(function(A){a(m,c,o("ngfDuration",{$file:c,$duration:A}))},function(){m.reject()}):a(m,c,i.getValidationAttr(s,r,z,x,c))):void m.resolve()}),g.all(y).then(function(){t.$ngfValidations.push({name:z,valid:!0})},function(){t.$ngfValidations.push({name:z,valid:!1})})):void 0}t=t||{},t.$ngfValidations=t.$ngfValidations||[],angular.forEach(t.$ngfValidations,function(c){c.valid=!0});var o=function(d,c){return i.attrGetter(d,s,r,c)};if(null==v||0===v.length){return i.emptyPromise(t)}v=void 0===v.length?[v]:v.slice(0),q("maxFiles",null,function(e,c,m){return c>u+m}),q("pattern",null,i.validatePattern),q("minSize","size.min",function(d,c){return d.size+0.1>=i.translateScalars(c)}),q("maxSize","size.max",function(d,c){return d.size-0.1<=i.translateScalars(c)});var n=0;if(q("maxTotalSize",null,function(a,d){return n+=a.size,n>i.translateScalars(d)?(v.splice(0,v.length),!1):!0}),q("validateFn",null,function(d,c){return c===!0||null===c||""===c}),!v.length){return i.emptyPromise(t,t.$ngfValidations)}var f=g.defer(),b=[];return b.push(i.happyPromise(p("maxHeight","height.max",/image/,this.imageDimensions,function(d,c){return d.height<=c}))),b.push(i.happyPromise(p("minHeight","height.min",/image/,this.imageDimensions,function(d,c){return d.height>=c}))),b.push(i.happyPromise(p("maxWidth","width.max",/image/,this.imageDimensions,function(d,c){return d.width<=c}))),b.push(i.happyPromise(p("minWidth","width.min",/image/,this.imageDimensions,function(d,c){return d.width>=c}))),b.push(i.happyPromise(p("dimensions",null,/image/,function(d,c){return i.emptyPromise(c)},function(c){return c}))),b.push(i.happyPromise(p("ratio",null,/image/,this.imageDimensions,function(w,m){for(var z=m.toString().split(","),y=!1,x=0;x<z.length;x++){Math.abs(w.width/w.height-i.ratioToFloat(z[x]))<0.0001&&(y=!0)}return y}))),b.push(i.happyPromise(p("maxRatio","ratio.max",/image/,this.imageDimensions,function(d,c){return d.width/d.height-i.ratioToFloat(c)<0.0001}))),b.push(i.happyPromise(p("minRatio","ratio.min",/image/,this.imageDimensions,function(d,c){return d.width/d.height-i.ratioToFloat(c)>-0.0001}))),b.push(i.happyPromise(p("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(d,c){return d<=i.translateScalars(c)}))),b.push(i.happyPromise(p("minDuration","duration.min",/audio|video/,this.mediaDuration,function(d,c){return d>=i.translateScalars(c)}))),b.push(i.happyPromise(p("duration",null,/audio|video/,function(d,c){return i.emptyPromise(c)},function(c){return c}))),b.push(i.happyPromise(p("validateAsyncFn",null,null,function(d,c){return c},function(c){return c===!0||null===c||""===c}))),g.all(b).then(function(){f.resolve(t,t.$ngfValidations)})},i.imageDimensions=function(b){if(b.$ngfWidth&&b.$ngfHeight){var f=g.defer();return l(function(){f.resolve({width:b.$ngfWidth,height:b.$ngfHeight})}),f.promise}if(b.$ngfDimensionPromise){return b.$ngfDimensionPromise}var c=g.defer();return l(function(){return 0!==b.type.indexOf("image")?void c.reject("not image"):void i.dataUrl(b).then(function(a){function p(){var d=m[0].clientWidth,q=m[0].clientHeight;m.remove(),b.$ngfWidth=d,b.$ngfHeight=q,c.resolve({width:d,height:q})}function o(){m.remove(),c.reject("load error")}function n(){l(function(){m[0].parentNode&&(m[0].clientWidth?p():e>10?o():n())},1000)}var m=angular.element("<img>").attr("src",a).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");m.on("load",p),m.on("error",o);var e=0;n(),angular.element(document.getElementsByTagName("body")[0]).append(m)},function(){c.reject("load error")})}),b.$ngfDimensionPromise=c.promise,b.$ngfDimensionPromise["finally"](function(){delete b.$ngfDimensionPromise}),b.$ngfDimensionPromise},i.mediaDuration=function(b){if(b.$ngfDuration){var f=g.defer();return l(function(){f.resolve(b.$ngfDuration)}),f.promise}if(b.$ngfDurationPromise){return b.$ngfDurationPromise}var c=g.defer();return l(function(){return 0!==b.type.indexOf("audio")&&0!==b.type.indexOf("video")?void c.reject("not media"):void i.dataUrl(b).then(function(a){function p(){var d=m[0].duration;b.$ngfDuration=d,m.remove(),c.resolve(d)}function o(){m.remove(),c.reject("load error")}function n(){l(function(){m[0].parentNode&&(m[0].duration?p():e>10?o():n())},1000)}var m=angular.element(0===b.type.indexOf("audio")?"<audio>":"<video>").attr("src",a).css("visibility","none").css("position","fixed");m.on("loadedmetadata",p),m.on("error",o);var e=0;n(),angular.element(document.body).append(m)},function(){c.reject("load error")})}),b.$ngfDurationPromise=c.promise,b.$ngfDurationPromise["finally"](function(){delete b.$ngfDurationPromise}),b.$ngfDurationPromise},i}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(g,f){var j=g,i=function(l,k,p,o,n){var m=n?Math.max(p/l,o/k):Math.min(p/l,o/k);return{width:l*m,height:k*m,marginX:l*m-p,marginY:k*m-o}},h=function(v,u,t,s,r,q,p,o){var d=f.defer(),c=document.createElement("canvas"),b=document.createElement("img");return b.onload=function(){if(null!=o&&o(b.width,b.height)===!1){return void d.reject("resizeIf")}try{if(q){var k=j.ratioToFloat(q),e=b.width/b.height;k>e?(u=b.width,t=u/k):(t=b.height,u=t*k)}u||(u=b.width),t||(t=b.height);var n=i(b.width,b.height,u,t,p);c.width=Math.min(n.width,u),c.height=Math.min(n.height,t);var m=c.getContext("2d");m.drawImage(b,Math.min(0,-n.marginX/2),Math.min(0,-n.marginY/2),n.width,n.height),d.resolve(c.toDataURL(r||"image/WebP",s||0.934))}catch(l){d.reject(l)}},b.onerror=function(){d.reject()},b.src=v,d.promise};return j.dataUrltoBlob=function(s,r,q){for(var p=s.split(","),o=p[0].match(/:(.*?);/)[1],n=atob(p[1]),m=n.length,l=new Uint8Array(m);m--;){l[m]=n.charCodeAt(m)}var k=new window.Blob([l],{type:o});return k.name=r,k.$ngfOrigSize=q,k},j.isResizeSupported=function(){var b=document.createElement("canvas");return window.atob&&b.getContext&&b.getContext("2d")&&window.Blob},j.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(b){this.$ngfName=b},configurable:!0}),j.resize=function(t,s,r,q,p,o,n,e,c){if(0!==t.type.indexOf("image")){return j.emptyPromise(t)}var b=f.defer();return j.dataUrl(t,!0).then(function(a){h(a,s,r,q,p||t.type,o,n,e).then(function(m){if("image/jpeg"===t.type&&c){try{m=j.restoreExif(a,m)}catch(l){setTimeout(function(){throw l},1)}}try{var k=j.dataUrltoBlob(m,t.name,t.size);b.resolve(k)}catch(l){b.reject(l)}},function(d){"resizeIf"===d&&b.resolve(t),b.reject(d)})},function(d){b.reject(d)}),b.promise},j}]),function(){function d(P,O,N,M,L,K,J,I,H,G){function F(){return O.attr("disabled")||z("ngfDropDisabled",P)}function E(a,e){I.updateModel(M,N,P,z("ngfChange")||z("ngfDrop"),a,e)}function D(a,m){if(!I.shouldUpdateOn(a,N,P)||!m){return I.rejectPromise([])}var l=[];m.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(f,e,g){l.push(g)});var k=[],j=[];if(l.length){angular.forEach(l,function(e){k.push(I.urlToBlob(e).then(function(f){j.push(f)}))});var i=G.defer();return G.all(k).then(function(){i.resolve(j)},function(e){i.reject(e)}),i.promise}return I.emptyPromise()}function C(r,q,p,o){var n=z("ngfDragOverClass",r,{$event:p}),m="dragover";if(angular.isString(n)){m=n}else{if(n&&(n.delay&&(b=n.delay),n.accept||n.reject)){var l=p.dataTransfer.items;if(null!=l&&l.length){for(var k=n.pattern||z("ngfPattern",r,{$event:p}),i=l.length;i--;){if(!I.validatePattern(l[i],k)){m=n.reject;break}m=n.accept}}else{m=n.accept}}}o(m)}function B(W,V,U,T){function S(j,g){var s=G.defer();if(null!=j){if(j.isDirectory){var q=[I.emptyPromise()];if(r){var o={type:"directory"};o.name=o.path=(g||"")+j.name+j.name,k.push(o)}var m=j.createReader(),l=[],n=function(){m.readEntries(function(t){try{t.length?(l=l.concat(Array.prototype.slice.call(t||[],0)),n()):(angular.forEach(l.slice(0),function(e){k.length<=R&&Q>=i&&q.push(S(e,(g?g:"")+j.name+"/"))}),G.all(q).then(function(){s.resolve()},function(e){s.reject(e)}))}catch(p){s.reject(p)}},function(e){s.reject(e)})};n()}else{j.file(function(e){try{e.path=(g?g:"")+e.name,r&&(e=I.rename(e,e.path)),k.push(e),i+=e.size,s.resolve()}catch(f){s.reject(f)}},function(e){s.reject(e)})}}return s.promise}var R=I.getValidationAttr(N,P,"maxFiles")||Number.MAX_VALUE,Q=I.getValidationAttr(N,P,"maxTotalSize")||Number.MAX_VALUE,r=z("ngfIncludeDir",P),k=[],i=0,h=[I.emptyPromise()];if(W&&W.length>0&&"file"!==J.protocol()){for(var a=0;a<W.length;a++){if(W[a].webkitGetAsEntry&&W[a].webkitGetAsEntry()&&W[a].webkitGetAsEntry().isDirectory){var ab=W[a].webkitGetAsEntry();if(ab.isDirectory&&!U){continue}null!=ab&&h.push(S(ab))}else{var aa=W[a].getAsFile();null!=aa&&(k.push(aa),i+=aa.size)}if(k.length>R||i>Q||!T&&k.length>0){break}}}else{if(null!=V){for(var Z=0;Z<V.length;Z++){var Y=V.item(Z);if((Y.type||Y.size>0)&&(k.push(Y),i+=Y.size),k.length>R||i>Q||!T&&k.length>0){break}}}}var X=G.defer();return G.all(h).then(function(){if(T||r||!k.length){X.resolve(k)}else{for(var e=0;k[e]&&"directory"===k[e].type;){e++}X.resolve([k[e]])}},function(e){X.reject(e)}),X.promise}var A=c(),z=function(f,e,g){return I.attrGetter(f,N,e,g)};if(z("dropAvailable")&&K(function(){P[z("dropAvailable")]?P[z("dropAvailable")].value=A:P[z("dropAvailable")]=A}),!A){return void (z("ngfHideOnDropNotAvailable",P)===!0&&O.css("display","none"))}null==z("ngfSelect")&&I.registerModelChangeValidator(M,N,P);var y,x=null,w=L(z("ngfStopPropagation")),b=1;O[0].addEventListener("dragover",function(a){if(!F()&&I.shouldUpdateOn("drop",N,P)){if(a.preventDefault(),w(P)&&a.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var f=a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===f||"linkMove"===f?"move":"copy"}K.cancel(x),y||(y="C",C(P,N,a,function(e){y=e,O.addClass(y),z("ngfDrag",P,{$isDragging:!0,$class:y,$event:a})}))}},!1),O[0].addEventListener("dragenter",function(a){!F()&&I.shouldUpdateOn("drop",N,P)&&(a.preventDefault(),w(P)&&a.stopPropagation())},!1),O[0].addEventListener("dragleave",function(a){!F()&&I.shouldUpdateOn("drop",N,P)&&(a.preventDefault(),w(P)&&a.stopPropagation(),x=K(function(){y&&O.removeClass(y),y=null,z("ngfDrag",P,{$isDragging:!1,$event:a})},b||100))},!1),O[0].addEventListener("drop",function(a){if(!F()&&I.shouldUpdateOn("drop",N,P)){a.preventDefault(),w(P)&&a.stopPropagation(),y&&O.removeClass(y),y=null;var j,i=a.dataTransfer.items;try{j=a.dataTransfer&&a.dataTransfer.getData&&a.dataTransfer.getData("text/html")}catch(h){}B(i,a.dataTransfer.files,z("ngfAllowDir",P)!==!1,z("multiple")||z("ngfMultiple",P)).then(function(e){e.length?E(e,a):D("dropUrl",j).then(function(f){E(f,a)})})}},!1),O[0].addEventListener("paste",function(a){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&z("ngfEnableFirefoxPaste",P)&&a.preventDefault(),!F()&&I.shouldUpdateOn("paste",N,P)){var i=[],h=a.clipboardData||a.originalEvent.clipboardData;if(h&&h.items){for(var g=0;g<h.items.length;g++){-1!==h.items[g].type.indexOf("image")&&i.push(h.items[g].getAsFile())}}i.length?E(i,a):D("pasteUrl",h).then(function(e){E(e,a)})}},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&z("ngfEnableFirefoxPaste",P)&&(O.attr("contenteditable",!0),O.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}))}function c(){var b=document.createElement("div");return"draggable" in b&&"ondrop" in b&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http","$q",function(a,l,k,j,i,h){return{restrict:"AEC",require:"?ngModel",link:function(g,f,e,b){d(g,f,e,b,a,l,k,j,i,h)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(b,e){c()&&e.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(b,f,e){return function(k,j,i){if(c()){var a=b(e.attrGetter("ngfDropAvailable",i));f(function(){a(k),a.assign&&a.assign(k,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(g,f){function j(k,e,m,l){switch(e){case 2:return k.transform(-1,0,0,1,m,0);case 3:return k.transform(-1,0,0,-1,m,l);case 4:return k.transform(1,0,0,-1,0,l);case 5:return k.transform(0,1,1,0,0,0);case 6:return k.transform(0,1,-1,0,l,0);case 7:return k.transform(0,-1,-1,0,l,m);case 8:return k.transform(0,-1,1,0,0,m)}}function i(l){for(var k="",o=new Uint8Array(l),n=o.byteLength,m=0;n>m;m++){k+=String.fromCharCode(o[m])}return window.btoa(k)}var h=g;return h.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&h.isResizeSupported()},h.readOrientation=function(b){var m=f.defer(),l=new FileReader,k=b.slice?b.slice(0,65536):b;return l.readAsArrayBuffer(k),l.onerror=function(c){return m.reject(c)},l.onload=function(v){var u={orientation:1},t=new DataView(this.result);if(65496!==t.getUint16(0,!1)){return m.resolve(u)}for(var s=t.byteLength,r=2;s>r;){var q=t.getUint16(r,!1);if(r+=2,65505===q){if(1165519206!==t.getUint32(r+=2,!1)){return m.resolve(u)}var p=18761===t.getUint16(r+=6,!1);r+=t.getUint32(r+4,p);var o=t.getUint16(r,p);r+=2;for(var n=0;o>n;n++){if(274===t.getUint16(r+12*n,p)){var c=t.getUint16(r+12*n+8,p);return c>=2&&8>=c&&(t.setUint16(r+12*n+8,1,p),u.fixedArrayBuffer=v.target.result),u.orientation=c,m.resolve(u)}}}else{if(65280!==(65280&q)){break}r+=t.getUint16(r,!1)}}return m.resolve(u)},m.promise},h.applyExifRotation=function(b){if(0!==b.type.indexOf("image/jpeg")){return h.emptyPromise(b)}var c=f.defer();return h.readOrientation(b).then(function(a){return a.orientation<2||a.orientation>8?c.resolve(b):void h.dataUrl(b,!0).then(function(k){var e=document.createElement("canvas"),d=document.createElement("img");d.onload=function(){try{e.width=a.orientation>4?d.height:d.width,e.height=a.orientation>4?d.width:d.height;var p=e.getContext("2d");j(p,a.orientation,d.width,d.height),p.drawImage(d,0,0);var o=e.toDataURL(b.type||"image/WebP",0.934);o=h.restoreExif(i(a.fixedArrayBuffer),o);var n=h.dataUrltoBlob(o,b.name);c.resolve(n)}catch(m){return c.reject(m)}},d.onerror=function(){c.reject()},d.src=k},function(d){c.reject(d)})},function(d){c.reject(d)}),c.promise},h.restoreExif=function(e,d){var k={};return k.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k.encode64=function(u){var t,s,r,q,p,o="",n="",m="",l=0;do{t=u[l++],s=u[l++],n=u[l++],r=t>>2,q=(3&t)<<4|s>>4,p=(15&s)<<2|n>>6,m=63&n,isNaN(s)?p=m=64:isNaN(n)&&(m=64),o=o+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(q)+this.KEY_STR.charAt(p)+this.KEY_STR.charAt(m),t=s=n="",r=q=p=m=""}while(l<u.length);return o},k.restore=function(m,l){m.match("data:image/jpeg;base64,")&&(m=m.replace("data:image/jpeg;base64,",""));var p=this.decode64(m),o=this.slice2Segments(p),n=this.exifManipulation(l,o);return"data:image/jpeg;base64,"+this.encode64(n)},k.exifManipulation=function(m,l){var o=this.getExifArray(l),n=this.insertExif(m,o);return new Uint8Array(n)},k.getExifArray=function(m){for(var l,n=0;n<m.length;n++){if(l=m[n],255===l[0]&225===l[1]){return l}}return[]},k.insertExif=function(m,l){var s=m.replace("data:image/jpeg;base64,",""),r=this.decode64(s),q=r.indexOf(255,3),p=r.slice(0,q),o=r.slice(q),n=p;return n=n.concat(l),n=n.concat(o)},k.slice2Segments=function(m){for(var l=0,q=[];;){if(255===m[l]&218===m[l+1]){break}if(255===m[l]&216===m[l+1]){l+=2}else{var p=256*m[l+2]+m[l+3],o=l+p+2,n=m.slice(l,o);q.push(n),l=o}if(l>m.length){break}}return q},k.decode64=function(v){var u,t,s,r,q,p="",o="",n=0,m=[],l=/[^A-Za-z0-9\+\/\=]/g;l.exec(v)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),v=v.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{s=this.KEY_STR.indexOf(v.charAt(n++)),r=this.KEY_STR.indexOf(v.charAt(n++)),q=this.KEY_STR.indexOf(v.charAt(n++)),o=this.KEY_STR.indexOf(v.charAt(n++)),u=s<<2|r>>4,t=(15&r)<<4|q>>2,p=(3&q)<<6|o,m.push(u),64!==q&&m.push(t),64!==o&&m.push(p),u=t=p="",s=r=q=o=""}while(n<v.length);return m},k.restore(e,d)},h}]);