define(["lodash"],function(b){return function a(d){if(!d){d={}}d.options=d.options||[];d["feature-detects"]=d["feature-detects"]||[];var e=b.includes(d.options,"setClasses");var c='require(["ModernizrProto", "Modernizr", "testRunner"';if(e){c+=', "setClasses", "classes"'}if(b.includes(d.options,"html5printshiv")){d.options=b.without(d.options,"html5shiv")}b.forEach(b.without(d.options,"setClasses"),function(f){c+=', "'+f+'"'});b.forEach(d["feature-detects"],function(f){f=f.indexOf("test/")===0?f:"test/"+f;c+=', "'+f+'"'});c+="], function( ModernizrProto, Modernizr, testRunner";if(e){c+=", setClasses, classes"}c+=") {\n  // Run each test\n  testRunner();\n\n";if(e){c+='  // Remove the "no-js" class if it exists\n  setClasses(classes);\n\n'}c+="  delete ModernizrProto.addTest;\n";c+="  delete ModernizrProto.addAsyncTest;\n\n";c+="  // Run the things that are supposed to run after the tests\n  for (var i = 0; i < Modernizr._q.length; i++) {\n    Modernizr._q[i]();\n  }\n\n";c+="  // Leak Modernizr namespace\n  window.Modernizr = Modernizr;\n\n});";return c}});