describe("mq",function(){var b;var d;var c;var a;var e;var f=window.matchMedia||(function(){var i;var g=document.documentElement;var h=g.firstElementChild||g.firstChild;var j=document.createElement("body");var k=document.createElement("div");k.id="mq-test-1";k.style.cssText="position:absolute;top:-100em";j.style.background="none";j.appendChild(k);return function(l){k.innerHTML='&shy;<style media="'+l+'"> #mq-test-1 { width: 42px; }</style>';g.insertBefore(j,h);i=k.offsetWidth===42;g.removeChild(j);return{matches:i,media:l}}})();before(function(g){e=requirejs.config({context:Math.random().toString().slice(2),baseUrl:"../src",paths:{sinon:"../test/js/lib/sinon",cleanup:"../test/cleanup"}});e(["injectElementWithStyles","cleanup","sinon"],function(j,h,i){b=j;c=h;a=i;g()})});if(window.matchMedia||window.msMatchMedia){describe("matchMedia version",function(){before(function(g){e(["mq"],function(h){d=h;g()})});it("works",function(){expect(d("only screen")).to.equal(f("only screen").matches);expect(d("only fake rule")).to.equal(f("only fake rule").matches)})})}else{describe("fallback version",function(){before(function(g){b=a.spy(b);e.undef("injectElementWithStyles");e.undef("mq");define("injectElementWithStyles",[],function(){return b});e(["mq"],function(h){d=h;g()})});it("works",function(){expect(d("only screen")).to.equal(f("only screen").matches);expect(d("only fake rule")).to.equal(f("only fake rule").matches);expect(b.called).to.be(true)})})}afterEach(function(){e.undef("mq")});after(function(){c()})});