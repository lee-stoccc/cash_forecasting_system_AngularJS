var fs=require("fs");var _=require("lodash");var file=require("file");var jsdoc=require("doctrine");var srcRoot=fs.realpathSync(__dirname+"/../src");var commentRE=/^(\s+)?(\/\*)?\*(\/)?\s?/mg;var jsdocRE=/[^\S\r\n]*\/(?:\*{2})([\W\w]+?)\*\//mg;var stripComments=function(a){return a.replace(commentRE,"")};function options(a,b){var c;file.walkSync(srcRoot,function(f,e,d){c=_.chain(d).map(function(g){var i=fs.readFileSync(f+"/"+g,"utf8");var j=i.match(jsdocRE);if(j){j=j.map(stripComments).map(function(k){return jsdoc.parse(k,{sloppy:true,tags:["access","author","class","example","function","memberOf","memberof","name","optionName","optionProp","param","params","preserve","private","returns","type"]})});var h=_.chain(j).flatten().filter(function(k){if(b){return true}else{return k&&_.some(k.tags,{title:"optionName"})}}).map(function(l){if(b){return l}else{var k=l.tags.filter(function(m){return m.title.indexOf("option")===0});return{name:_.filter(k,{title:"optionName"})[0].description,property:_.filter(k,{title:"optionProp"})[0].description}}}).value();return h}}).filter(function(g){return g&&g.length}).flatten().value()});if(a){a(c)}return c}module.exports=options;