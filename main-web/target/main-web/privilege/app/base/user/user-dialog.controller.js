(function(){angular.module("devplatformApp").controller("UserDialogController",a);a.$inject=["$rootScope","ngVerify","$scope","$stateParams","UserService","$state","$uibModalInstance","$timeout","DateUtils","$compile","PublicService"];function a(k,c,n,m,h,b,l,d,f,e,i){if(m.id){n.type="edit";h.getUser(m.id).then(function(o){n.user=o.data;if(!i.isEmptyObject(n.user.expireDate)){n.user.expireDate=dateToGMT(n.user.expireDate)}if(!i.isEmptyObject(n.user.passwordExpireDate)){n.user.passwordExpireDate=dateToGMT(n.user.passwordExpireDate)}n.isOpen=n.user.activated==true?true:false})}n.save=j;n.clear=g;function j(){n.user.activated=n.isOpen?true:false;n.isSaving=true;var o="devplatformApp.user.created";if(n.user.id!==null&&n.user.id!==undefined){o="devplatformApp.user.updated"}else{o="devplatformApp.user.created"}h.saveUser(n.user).then(function(p){if(p.statusCode==="0000"){n.message="global.saveSuccess";i.showDialogTimeout(n.message);k.$broadcast("userEdit","");l.close();b.go("app.user")}else{n.isSaving=false;o=p.msgCode;i.openDialog(o)}})}n.dateformat="yyyy-MM-dd HH:mm";n.datePickerOpenStatus={};n.datePickerOpenStatus.expireDate=false;n.datePickerOpenStatus.passwordExpireDate=false;n.openCalendar=function(o){n.datePickerOpenStatus[o]=true};function g(o){l.close();b.go("app.user",{},{reload:o})}}})();