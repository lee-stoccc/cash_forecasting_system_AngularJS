(function(){angular.module("devplatformApp").controller("UserEditPasswordController",a);a.$inject=["$scope","$uibModalInstance","$compile","UserService","ngDialog","$timeout","dep","PublicService"];function a(k,j,e,f,i,d,h,g){k.editParams=new Object();k.editParams.login=h.loginName;k.clear=function(){j.dismiss("cancel")};k.save=function(){k.isSaving=true;f.editPassword(k.editParams).then(function(l){if(l.statusCode==="0000"){k.message="devplatformApp.user.updated";i.openConfirm({template:"app/common/dialog.html",className:"ngdialog-theme-default",scope:k});d(function(){k.clear()},1000)}else{k.isSaving=false;k.message=l.msgCode;g.showMessageDialog(k)}});k.isSaving=false};k.checkOldPassword=function(){k.oldPasswordValid=true;if(k.editParams.newPassword1===k.editParams.oldPassword){k.newPasswordMsg1="devplatformApp.user.prompt.samePassword";angular.element("#newPasswordDiv1").append(c);angular.element("#field_newPassword1").addClass("input-err")}else{k.newPasswordValid1=false;angular.element("#field_newPassword1").removeClass("input-err");if(c){c.remove()}}};var c=e(angular.element("<span style='color:red;font-size: 10px;' data-translate='{{newPasswordMsg1}}'></span>"))(k);k.checkNewPassword1=function(){k.newPasswordValid1=true;if(k.editParams.newPassword1===k.editParams.oldPassword){k.newPasswordMsg1="devplatformApp.user.prompt.samePassword";angular.element("#newPasswordDiv1").append(c);angular.element("#field_newPassword1").addClass("input-err")}else{if(k.editParams.newPassword1.length<4){k.newPasswordMsg1="devplatformApp.user.prompt.passwordLength";angular.element("#newPasswordDiv1").append(c);angular.element("#field_newPassword1").addClass("input-err")}else{if(!(/^(?![^a-zA-Z]+$)(?!\D+$)/.test(k.editParams.newPassword1))){k.newPasswordMsg1="devplatformApp.user.prompt.passwordStrength";angular.element("#newPasswordDiv1").append(c);angular.element("#field_newPassword1").addClass("input-err")}else{if(k.editParams.newPassword1!==k.editParams.newPassword2&&k.editParams.newPassword2!=undefined){angular.element("#newPasswordDiv1").append(c);angular.element("#field_newPassword1").addClass("input-err");k.newPasswordMsg1="devplatformApp.user.prompt.differentPasswords"}else{if(k.editParams.newPassword1===k.editParams.newPassword2){k.newPasswordValid2=false;angular.element("#field_newPassword2").removeClass("input-err");if(b){b.remove()}}k.newPasswordValid1=false;angular.element("#field_newPassword1").removeClass("input-err");if(c){c.remove()}}}}}};var b=e(angular.element("<span style='color:red;font-size: 10px;' data-translate='{{newPasswordMsg2}}'></span>"))(k);k.checkNewPassword2=function(){k.newPasswordValid2=true;if(k.editParams.newPassword1!==k.editParams.newPassword2){angular.element("#newPasswordDiv2").append(b);angular.element("#field_newPassword2").addClass("input-err");k.newPasswordMsg2="devplatformApp.user.prompt.differentPasswords"}else{if(k.editParams.newPassword1===k.editParams.newPassword2){k.newPasswordValid1=false;angular.element("#field_newPassword1").removeClass("input-err");if(c){c.remove()}}k.newPasswordValid2=false;angular.element("#field_newPassword2").removeClass("input-err");if(b){b.remove()}}}}})();