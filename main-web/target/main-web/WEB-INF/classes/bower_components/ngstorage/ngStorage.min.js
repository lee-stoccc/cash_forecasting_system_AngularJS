/*! ngstorage 0.3.10 | Copyright (c) 2015 Gias Kay Lee | MIT License */
!function(d,c){"function"==typeof define&&define.amd?define(["angular"],c):d.hasOwnProperty("angular")?c(d.angular):"object"==typeof exports&&(module.exports=c(require("angular")))}(this,function(d){function c(a){return function(){var g="ngStorage-";this.setKeyPrefix=function(e){if("string"!=typeof e){throw new TypeError("[ngStorage] - "+a+"Provider.setKeyPrefix() expects a String.")}g=e};var f=d.toJson,b=d.fromJson;this.setSerializer=function(e){if("function"!=typeof e){throw new TypeError("[ngStorage] - "+a+"Provider.setSerializer expects a function.")}f=e},this.setDeserializer=function(e){if("function"!=typeof e){throw new TypeError("[ngStorage] - "+a+"Provider.setDeserializer expects a function.")}b=e},this.get=function(e){return b(window[a].getItem(g+e))},this.set=function(h,i){return window[a].setItem(g+h,f(i))},this.$get=["$rootScope","$window","$log","$timeout","$document",function(z,y,x,w,v){function u(i){var h;try{h=y[i]}catch(k){h=!1}if(h&&"localStorage"===i){var j="__"+Math.round(10000000*Math.random());try{localStorage.setItem(j,j),localStorage.removeItem(j)}catch(k){h=!1}}return h}var t,s,r=g.length,q=u(a)||(x.warn("This browser does not support Web Storage!"),{setItem:d.noop,getItem:d.noop,removeItem:d.noop}),e={$default:function(h){for(var i in h){d.isDefined(e[i])||(e[i]=d.copy(h[i]))}return e.$sync(),e},$reset:function(i){for(var h in e){"$"===h[0]||delete e[h]&&q.removeItem(g+h)}return e.$default(i)},$sync:function(){for(var i,h=0,j=q.length;j>h;h++){(i=q.key(h))&&g===i.slice(0,r)&&(e[i.slice(r)]=b(q.getItem(i)))}},$apply:function(){var h;if(s=null,!d.equals(e,t)){h=d.copy(t),d.forEach(e,function(k,j){d.isDefined(k)&&"$"!==j[0]&&(q.setItem(g+j,f(k)),delete h[j])});for(var i in h){q.removeItem(g+i)}t=d.copy(e)}}};return e.$sync(),t=d.copy(e),z.$watch(function(){s||(s=w(e.$apply,100,!1))}),y.addEventListener&&y.addEventListener("storage",function(h){if(h.key){var i=v[0];i.hasFocus&&i.hasFocus()||g!==h.key.slice(0,r)||(h.newValue?e[h.key.slice(r)]=b(h.newValue):delete e[h.key.slice(r)],t=d.copy(e),z.$apply())}}),y.addEventListener&&y.addEventListener("beforeunload",function(){e.$apply()}),e}]}}return d=d&&d.module?d:window.angular,d.module("ngStorage",[]).provider("$localStorage",c("localStorage")).provider("$sessionStorage",c("sessionStorage"))});