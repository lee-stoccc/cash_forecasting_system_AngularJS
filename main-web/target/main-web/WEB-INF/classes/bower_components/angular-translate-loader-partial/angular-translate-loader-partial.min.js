/*!
 * angular-translate - v2.11.1 - 2016-07-17
 * 
 * Copyright (c) 2016 The angular-translate team, Pascal Precht; Licensed MIT
 */
!function(d,c){"function"==typeof define&&define.amd?define([],function(){return c()}):"object"==typeof exports?module.exports=c():c()}(this,function(){function b(){function i(d,c){this.name=d,this.isActive=!0,this.tables={},this.priority=c||0}function h(c){return Object.prototype.hasOwnProperty.call(j,c)}function n(c){return angular.isString(c)&&""!==c}function m(c){if(!n(c)){throw new TypeError("Invalid type of a first argument, a non-empty string expected.")}return h(c)&&j[c].isActive}function l(e,d){for(var f in d){d[f]&&d[f].constructor&&d[f].constructor===Object?(e[f]=e[f]||{},l(e[f],d[f])):e[f]=d[f]}return e}function k(){var d=[];for(var c in j){j[c].isActive&&d.push(j[c])}return d.sort(function(f,e){return f.priority-e.priority}),d}i.prototype.parseUrl=function(d,c){return angular.isFunction(d)?d(this.name,c):d.replace(/\{part\}/g,this.name).replace(/\{lang\}/g,c)},i.prototype.getTable=function(p,o,u,t,s,r){if(this.tables[p]){return o.when(this.tables[p])}var q=this;return u(angular.extend({method:"GET",url:this.parseUrl(s,p)},t)).then(function(a){return q.tables[p]=a.data,a.data},function(){return r?r(q.name,p).then(function(a){return q.tables[p]=a,a},function(){return o.reject(q.name)}):o.reject(q.name)})};var j={};this.addPart=function(c,a){if(!n(c)){throw new TypeError("Couldn't add part, part name has to be a string!")}return h(c)||(j[c]=new i(c,a)),j[c].isActive=!0,this},this.setPart=function(g,c,a){if(!n(g)){throw new TypeError("Couldn't set part.`lang` parameter has to be a string!")}if(!n(c)){throw new TypeError("Couldn't set part.`part` parameter has to be a string!")}if("object"!=typeof a||null===a){throw new TypeError("Couldn't set part. `table` parameter has to be an object!")}return h(c)||(j[c]=new i(c),j[c].isActive=!1),j[c].tables[g]=a,this},this.deletePart=function(c){if(!n(c)){throw new TypeError("Couldn't delete part, first arg has to be string.")}return h(c)&&(j[c].isActive=!1),this},this.isPartAvailable=m,this.$get=["$rootScope","$injector","$q","$http",function(f,e,d,c){var a=function(p){if(!n(p.key)){throw new TypeError("Unable to load data, a key is not a non-empty string.")}if(!n(p.urlTemplate)&&!angular.isFunction(p.urlTemplate)){throw new TypeError("Unable to load data, a urlTemplate is not a non-empty string or not a function.")}var o=p.loadFailureHandler;if(void 0!==o){if(!angular.isString(o)){throw new Error("Unable to load data, a loadFailureHandler is not a string.")}o=e.get(o)}var r=[],q=k();return angular.forEach(q,function(g){r.push(g.getTable(p.key,d,c,p.$http,p.urlTemplate,o)),g.urlTemplate=p.urlTemplate}),d.all(r).then(function(){var g={};return q=k(),angular.forEach(q,function(s){l(g,s.tables[p.key])}),g},function(){return d.reject(p.key)})};return a.addPart=function(o,g){if(!n(o)){throw new TypeError("Couldn't add part, first arg has to be a string")}return h(o)?j[o].isActive||(j[o].isActive=!0,f.$emit("$translatePartialLoaderStructureChanged",o)):(j[o]=new i(o,g),f.$emit("$translatePartialLoaderStructureChanged",o)),a},a.deletePart=function(g,r){if(!n(g)){throw new TypeError("Couldn't delete part, first arg has to be string")}if(void 0===r){r=!1}else{if("boolean"!=typeof r){throw new TypeError("Invalid type of a second argument, a boolean expected.")}}if(h(g)){var q=j[g].isActive;if(r){var p=e.get("$translate"),o=p.loaderCache();"string"==typeof o&&(o=e.get(o)),"object"==typeof o&&angular.forEach(j[g].tables,function(s,t){o.remove(j[g].parseUrl(j[g].urlTemplate,t))}),delete j[g]}else{j[g].isActive=!1}q&&f.$emit("$translatePartialLoaderStructureChanged",g)}return a},a.isPartLoaded=function(o,g){return angular.isDefined(j[o])&&angular.isDefined(j[o].tables[g])},a.getRegisteredParts=function(){var g=[];return angular.forEach(j,function(o){o.isActive&&g.push(o.name)}),g},a.isPartAvailable=m,a}]}return angular.module("pascalprecht.translate").provider("$translatePartialLoader",b),b.displayName="$translatePartialLoader","pascalprecht.translate"});