define(["../core","../var/document","../core/readyException","../deferred"],function(c,a){var d=c.Deferred();c.fn.ready=function(e){d.then(e)["catch"](function(f){c.readyException(f)});return this};c.extend({isReady:false,readyWait:1,holdReady:function(e){if(e){c.readyWait++}else{c.ready(true)}},ready:function(e){if(e===true?--c.readyWait:c.isReady){return}c.isReady=true;if(e!==true&&--c.readyWait>0){return}d.resolveWith(a,[c])}});c.ready.then=d.then;function b(){a.removeEventListener("DOMContentLoaded",b);window.removeEventListener("load",b);c.ready()}if(a.readyState==="complete"||(a.readyState!=="loading"&&!a.documentElement.doScroll)){window.setTimeout(c.ready)}else{a.addEventListener("DOMContentLoaded",b);window.addEventListener("load",b)}});