angular.module("infinite-scroll",[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(f,e,h,g){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(R,Q,P){var O,N,M,L,K,J,I,H,G,F,E,D,C,B,A,d,c,b,a;return a=angular.element(e),B=null,A=null,M=null,L=null,E=!0,b=!1,c=null,N=!1,F=function(i){return i=i[0]||i,isNaN(i.offsetHeight)?i.document.documentElement.clientHeight:i.offsetHeight},D=function(i){if(i[0].getBoundingClientRect&&!i.css("none")){return i[0].getBoundingClientRect().top+C(i)}},C=function(i){return i=i[0]||i,isNaN(window.pageYOffset)?i.document.documentElement.scrollTop:i.ownerDocument.defaultView.pageYOffset},G=function(){var i,n,m,k,j;return L===a?(i=F(L)+C(L[0].document.documentElement),m=D(Q)+F(Q)):(i=F(L),n=0,void 0!==D(L)&&(n=D(L)),m=D(Q)-n+F(Q)),b&&(m=F((Q[0].ownerDocument||Q[0].document).documentElement)),k=m-i,j=k<=F(L)*B+1,j?(M=!0,A?R.$$phase||f.$$phase?R.infiniteScroll():R.$apply(R.infiniteScroll):void 0):(N&&h.cancel(N),M=!1)},d=function(j,i){var m,l,k;return k=null,l=0,m=function(){return l=(new Date).getTime(),h.cancel(k),k=null,j.call()},function(){var o,n;return o=(new Date).getTime(),n=i-(o-l),n<=0?(h.cancel(k),k=null,l=o,j.call()):k?void 0:k=h(m,n,1)}},null!=g&&(G=d(G,g)),R.$on("$destroy",function(){if(L.unbind("scroll",G),null!=c&&(c(),c=null),N){return h.cancel(N)}}),I=function(i){return B=parseFloat(i)||0},R.$watch("infiniteScrollDistance",I),I(R.infiniteScrollDistance),J=function(i){if(A=!i,A&&M){return M=!1,G()}},R.$watch("infiniteScrollDisabled",J),J(R.infiniteScrollDisabled),H=function(i){return b=i},R.$watch("infiniteScrollUseDocumentBottom",H),H(R.infiniteScrollUseDocumentBottom),O=function(i){if(null!=L&&L.unbind("scroll",G),L=i,null!=i){return L.bind("scroll",G)}},O(a),R.infiniteScrollListenForEvent&&(c=f.$on(R.infiniteScrollListenForEvent,G)),K=function(i){if(null!=i&&0!==i.length){if(i.nodeType&&1===i.nodeType?i=angular.element(i):"function"==typeof i.append?i=angular.element(i[i.length-1]):"string"==typeof i&&(i=angular.element(document.querySelector(i))),null!=i){return O(i)}throw new Error("invalid infinite-scroll-container attribute.")}},R.$watch("infiniteScrollContainer",K),K(R.infiniteScrollContainer||[]),null!=P.infiniteScrollParent&&O(angular.element(Q.parent())),null!=P.infiniteScrollImmediateCheck&&(E=R.$eval(P.infiniteScrollImmediateCheck)),N=h(function(){return E&&G(),h.cancel(N)})}}}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="infinite-scroll");