if(typeof define!=="function"){var projectRoot=require("find-parent-dir").sync(__dirname,"package.json");var filesRoot=projectRoot;if(process.env.APP_DIR_FOR_CODE_COVERAGE){filesRoot=filesRoot+process.env.APP_DIR_FOR_CODE_COVERAGE}var requirejs=require("requirejs");var expect=require("expect.js")}else{var projectRoot="..";var filesRoot=".."}var cleanup;var req;describe("build-query",function(){var a;before(function(b){req=requirejs.config({context:Math.random().toString().slice(2),paths:{lib:filesRoot+"/lib",lodash:projectRoot+"/node_modules/lodash/lodash",metadata:projectRoot+"/test/mocks/lib/metadata",cleanup:projectRoot+"/test/cleanup"}});req(["lib/build-query","cleanup"],function(d,c){a=d;cleanup=c;b()})});it("builds a query from a feature-detect",function(){var b=a({"feature-detects":["css/boxsizing"]});expect(b).to.be("?-boxsizing-dontmin")});it("properly formats detects with multiple properties",function(){var b=a({"feature-detects":["dom/createElement-attrs"]});expect(b).to.be("?-createelementattrs_createelement_attrs-dontmin")});it("adds options to the query",function(){var b=a({options:["mq"]});expect(b).to.be("?-mq-dontmin")});it("adds classPrefix when setClasses is true as well",function(){var b=a({classPrefix:"TEST_PREFIX",options:["setClasses"]});expect(b).to.be("?-setclasses-dontmin-cssclassprefix:TEST_PREFIX")});it("strips `html5` from the shiv options",function(){var b=a({options:["html5shiv"]});expect(b).to.be("?-shiv-dontmin")});it("removes the dontmin option when minify is true",function(){var b=a({minify:true});expect(b).to.be("?-")});it("removes custom tests from the build query",function(){var b=a({"feature-detects":["css/boxsizing","custom/test/path"]});expect(b).to.be("?-boxsizing-dontmin")});after(function(){cleanup()})});