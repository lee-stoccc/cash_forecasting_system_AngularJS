/*! JSON Editor v0.7.22 - JSON Schema -> HTML Editor
 * By Jeremy Dorn - https://github.com/jdorn/json-editor/
 * Released under the MIT license
 *
 * Date: 2015-08-12
 */
!function(){var j;!function(){var a=!1,d=/xyz/.test(function(){window.postMessage("xyz")})?/\b_super\b/:/.*/;return j=function(){},j.extend=function(b){function r(){!a&&this.init&&this.init.apply(this,arguments)}var q=this.prototype;a=!0;var h=new this;a=!1;for(var c in b){h[c]="function"==typeof b[c]&&"function"==typeof q[c]&&d.test(b[c])?function(f,e){return function(){var s=this._super;this._super=q[f];var g=e.apply(this,arguments);return this._super=s,g}}(c,b[c]):b[c]}return r.prototype=h,r.prototype.constructor=r,r.extend=arguments.callee,r},j}(),function(){function b(e,d){d=d||{bubbles:!1,cancelable:!1,detail:void 0};var f=document.createEvent("CustomEvent");return f.initCustomEvent(e,d.bubbles,d.cancelable,d.detail),f}b.prototype=window.Event.prototype,window.CustomEvent=b}(),function(){for(var e=0,d=["ms","moz","webkit","o"],f=0;f<d.length&&!window.requestAnimationFrame;++f){window.requestAnimationFrame=window[d[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[f]+"CancelAnimationFrame"]||window[d[f]+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(a,r){var q=(new Date).getTime(),h=Math.max(0,16-(q-e)),g=window.setTimeout(function(){a(q+h)},h);return e=q+h,g}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(b){clearTimeout(b)})}(),function(){Array.isArray||(Array.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)})}();var i=function(b){return"object"!=typeof b||b.nodeType||null!==b&&b===b.window?!1:b.constructor&&!Object.prototype.hasOwnProperty.call(b.constructor.prototype,"isPrototypeOf")?!1:!0},p=function(b){var h,g,c;for(g=1;g<arguments.length;g++){h=arguments[g];for(c in h){h.hasOwnProperty(c)&&(h[c]&&i(h[c])?(b.hasOwnProperty(c)||(b[c]={}),p(b[c],h[c])):b[c]=h[c])}}return b},o=function(f,e){if(f&&"object"==typeof f){var h;if(Array.isArray(f)||"number"==typeof f.length&&f.length>0&&f.length-1 in f){for(h=0;h<f.length;h++){if(e(h,f[h])===!1){return}}}else{if(Object.keys){var g=Object.keys(f);for(h=0;h<g.length;h++){if(e(g[h],f[g[h]])===!1){return}}}else{for(h in f){if(f.hasOwnProperty(h)&&e(h,f[h])===!1){return}}}}}},n=function(e,d){var f=document.createEvent("HTMLEvents");f.initEvent(d,!0,!0),e.dispatchEvent(f)},m=function(d,c){if(!(d instanceof Element)){throw new Error("element should be an instance of Element")}c=p({},m.defaults.options,c||{}),this.element=d,this.options=c,this.init()};m.prototype={constructor:m,init:function(){var e=this;this.ready=!1;var d=m.defaults.themes[this.options.theme||m.defaults.theme];if(!d){throw"Unknown theme "+(this.options.theme||m.defaults.theme)}this.schema=this.options.schema,this.theme=new d,this.template=this.options.template,this.refs=this.options.refs||{},this.uuid=0,this.__data={};var f=m.defaults.iconlibs[this.options.iconlib||m.defaults.iconlib];f&&(this.iconlib=new f),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.translate=this.options.translate||m.defaults.translate,this._loadExternalRefs(this.schema,function(){e._getDefinitions(e.schema),e.validator=new m.Validator(e);var a=e.getEditorClass(e.schema);e.root=e.createEditor(a,{jsoneditor:e,schema:e.schema,required:!0,container:e.root_container}),e.root.preBuild(),e.root.build(),e.root.postBuild(),e.options.startval&&e.root.setValue(e.options.startval),e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.ready=!0,window.requestAnimationFrame(function(){e.ready&&(e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.trigger("ready"),e.trigger("change"))})})},getValue:function(){if(!this.ready){throw"JSON Editor not ready yet.  Listen for 'ready' event before getting the value"}return this.root.getValue()},setValue:function(b){if(!this.ready){throw"JSON Editor not ready yet.  Listen for 'ready' event before setting the value"}return this.root.setValue(b),this},validate:function(b){if(!this.ready){throw"JSON Editor not ready yet.  Listen for 'ready' event before validating"}return 1===arguments.length?this.validator.validate(b):this.validation_results},destroy:function(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.destroyed=!0)},on:function(d,c){return this.callbacks=this.callbacks||{},this.callbacks[d]=this.callbacks[d]||[],this.callbacks[d].push(c),this},off:function(f,e){if(f&&e){this.callbacks=this.callbacks||{},this.callbacks[f]=this.callbacks[f]||[];for(var h=[],g=0;g<this.callbacks[f].length;g++){this.callbacks[f][g]!==e&&h.push(this.callbacks[f][g])}this.callbacks[f]=h}else{f?(this.callbacks=this.callbacks||{},this.callbacks[f]=[]):this.callbacks={}}return this},trigger:function(d){if(this.callbacks&&this.callbacks[d]&&this.callbacks[d].length){for(var c=0;c<this.callbacks[d].length;c++){this.callbacks[d][c]()}}return this},setOption:function(d,c){if("show_errors"!==d){throw"Option "+d+" must be set during instantiation and cannot be changed later"}return this.options.show_errors=c,this.onChange(),this},getEditorClass:function(d){var c;if(d=this.expandSchema(d),o(m.defaults.resolvers,function(f,b){var a=b(d);return a&&m.defaults.editors[a]?(c=a,!1):void 0}),!c){throw"Unknown editor for schema "+JSON.stringify(d)}if(!m.defaults.editors[c]){throw"Unknown editor "+c}return m.defaults.editors[c]},createEditor:function(d,c){return c=p({},d.options||{},c),new d(c)},onChange:function(){if(this.ready&&!this.firing_change){this.firing_change=!0;var b=this;return window.requestAnimationFrame(function(){b.firing_change=!1,b.ready&&(b.validation_results=b.validator.validate(b.root.getValue()),"never"!==b.options.show_errors?b.root.showValidationErrors(b.validation_results):b.root.showValidationErrors([]),b.trigger("change"))}),this}},compileTemplate:function(e,d){d=d||m.defaults.template;var f;if("string"==typeof d){if(!m.defaults.templates[d]){throw"Unknown template engine "+d}if(f=m.defaults.templates[d](),!f){throw"Template engine "+d+" missing required library."}}else{f=d}if(!f){throw"No template engine set"}if(!f.compile){throw"Invalid template engine set"}return f.compile(e)},_data:function(f,e,h){if(3!==arguments.length){return f.hasAttribute("data-jsoneditor-"+e)?this.__data[f.getAttribute("data-jsoneditor-"+e)]:null}var g;f.hasAttribute("data-jsoneditor-"+e)?g=f.getAttribute("data-jsoneditor-"+e):(g=this.uuid++,f.setAttribute("data-jsoneditor-"+e,g)),this.__data[g]=h},registerEditor:function(b){return this.editors=this.editors||{},this.editors[b.path]=b,this},unregisterEditor:function(b){return this.editors=this.editors||{},this.editors[b.path]=null,this},getEditor:function(b){return this.editors?this.editors[b]:void 0},watch:function(d,c){return this.watchlist=this.watchlist||{},this.watchlist[d]=this.watchlist[d]||[],this.watchlist[d].push(c),this},unwatch:function(f,e){if(!this.watchlist||!this.watchlist[f]){return this}if(!e){return this.watchlist[f]=null,this}for(var h=[],g=0;g<this.watchlist[f].length;g++){this.watchlist[f][g]!==e&&h.push(this.watchlist[f][g])}return this.watchlist[f]=h.length?h:null,this},notifyWatchers:function(d){if(!this.watchlist||!this.watchlist[d]){return this}for(var c=0;c<this.watchlist[d].length;c++){this.watchlist[d][c]()}},isEnabled:function(){return !this.root||this.root.isEnabled()},enable:function(){this.root.enable()},disable:function(){this.root.disable()},_getDefinitions:function(e,d){if(d=d||"#/definitions/",e.definitions){for(var f in e.definitions){e.definitions.hasOwnProperty(f)&&(this.refs[d+f]=e.definitions[f],e.definitions[f].definitions&&this._getDefinitions(e.definitions[f],d+f+"/definitions/"))}}},_getExternalRefs:function(g){var f={},r=function(b){for(var d in b){b.hasOwnProperty(d)&&(f[d]=!0)}};g.$ref&&"object"!=typeof g.$ref&&"#"!==g.$ref.substr(0,1)&&!this.refs[g.$ref]&&(f[g.$ref]=!0);for(var q in g){if(g.hasOwnProperty(q)){if(g[q]&&"object"==typeof g[q]&&Array.isArray(g[q])){for(var h=0;h<g[q].length;h++){"object"==typeof g[q][h]&&r(this._getExternalRefs(g[q][h]))}}else{g[q]&&"object"==typeof g[q]&&r(this._getExternalRefs(g[q]))}}}return f},_loadExternalRefs:function(q,d){var v=this,u=this._getExternalRefs(q),t=0,s=0,r=!1;o(u,function(b){if(!v.refs[b]){if(!v.options.ajax){throw"Must set ajax option to true to load external ref "+b}v.refs[b]="loading",s++;var c=new XMLHttpRequest;c.open("GET",b,!0),c.onreadystatechange=function(){if(4==c.readyState){if(200!==c.status){throw window.console.log(c),"Failed to fetch ref via ajax- "+b}var f;try{f=JSON.parse(c.responseText)}catch(a){throw window.console.log(a),"Failed to parse external ref "+b}if(!f||"object"!=typeof f){throw"External ref does not contain a valid schema - "+b}v.refs[b]=f,v._loadExternalRefs(f,function(){t++,t>=s&&!r&&(r=!0,d())})}},c.send()}}),s||d()},expandRefs:function(d){for(d=p({},d);d.$ref;){var c=d.$ref;delete d.$ref,this.refs[c]||(c=decodeURIComponent(c)),d=this.extendSchemas(d,this.refs[c])}return d},expandSchema:function(d){var c,r=this,q=p({},d);if("object"==typeof d.type&&(Array.isArray(d.type)?o(d.type,function(a,e){"object"==typeof e&&(d.type[a]=r.expandSchema(e))}):d.type=r.expandSchema(d.type)),"object"==typeof d.disallow&&(Array.isArray(d.disallow)?o(d.disallow,function(a,e){"object"==typeof e&&(d.disallow[a]=r.expandSchema(e))}):d.disallow=r.expandSchema(d.disallow)),d.anyOf&&o(d.anyOf,function(a,e){d.anyOf[a]=r.expandSchema(e)}),d.dependencies&&o(d.dependencies,function(a,e){"object"!=typeof e||Array.isArray(e)||(d.dependencies[a]=r.expandSchema(e))}),d.not&&(d.not=this.expandSchema(d.not)),d.allOf){for(c=0;c<d.allOf.length;c++){q=this.extendSchemas(q,this.expandSchema(d.allOf[c]))}delete q.allOf}if(d["extends"]){if(Array.isArray(d["extends"])){for(c=0;c<d["extends"].length;c++){q=this.extendSchemas(q,this.expandSchema(d["extends"][c]))}}else{q=this.extendSchemas(q,this.expandSchema(d["extends"]))}delete q["extends"]}if(d.oneOf){var h=p({},q);for(delete h.oneOf,c=0;c<d.oneOf.length;c++){q.oneOf[c]=this.extendSchemas(this.expandSchema(d.oneOf[c]),h)}}return this.expandRefs(q)},extendSchemas:function(d,c){d=p({},d),c=p({},c);var h=this,g={};return o(d,function(b,e){"undefined"!=typeof c[b]?"required"===b&&"object"==typeof e&&Array.isArray(e)?g.required=e.concat(c[b]).reduce(function(q,f){return q.indexOf(f)<0&&q.push(f),q},[]):"type"!==b||"string"!=typeof e&&!Array.isArray(e)?"object"==typeof e&&Array.isArray(e)?g[b]=e.filter(function(a){return -1!==c[b].indexOf(a)}):"object"==typeof e&&null!==e?g[b]=h.extendSchemas(e,c[b]):g[b]=e:("string"==typeof e&&(e=[e]),"string"==typeof c.type&&(c.type=[c.type]),g.type=e.filter(function(f){return -1!==c.type.indexOf(f)}),1===g.type.length&&"string"==typeof g.type[0]&&(g.type=g.type[0])):g[b]=e}),o(c,function(a,e){"undefined"==typeof d[a]&&(g[a]=e)}),g}},m.defaults={themes:{},templates:{},iconlibs:{},editors:{},languages:{},resolvers:[],custom_validators:[]},m.Validator=j.extend({init:function(d,c){this.jsoneditor=d,this.schema=c||this.jsoneditor.schema,this.options={},this.translate=this.jsoneditor.translate||m.defaults.translate},validate:function(b){return this._validateSchema(this.schema,b)},_validateSchema:function(B,A,z){var y,x,w,v=this,u=[],t=JSON.stringify(A);if(z=z||"root",B=p({},this.jsoneditor.expandRefs(B)),B.required&&B.required===!0){if("undefined"==typeof A){return u.push({path:z,property:"required",message:this.translate("error_notset")}),u}}else{if("undefined"==typeof A){if(!this.jsoneditor.options.required_by_default){return u}u.push({path:z,property:"required",message:this.translate("error_notset")})}}if(B["enum"]){for(y=!1,x=0;x<B["enum"].length;x++){t===JSON.stringify(B["enum"][x])&&(y=!0)}y||u.push({path:z,property:"enum",message:this.translate("error_enum")})}if(B["extends"]){for(x=0;x<B["extends"].length;x++){u=u.concat(this._validateSchema(B["extends"][x],A,z))}}if(B.allOf){for(x=0;x<B.allOf.length;x++){u=u.concat(this._validateSchema(B.allOf[x],A,z))}}if(B.anyOf){for(y=!1,x=0;x<B.anyOf.length;x++){if(!this._validateSchema(B.anyOf[x],A,z).length){y=!0;break}}y||u.push({path:z,property:"anyOf",message:this.translate("error_anyOf")})}if(B.oneOf){y=0;var s=[];for(x=0;x<B.oneOf.length;x++){var r=this._validateSchema(B.oneOf[x],A,z);for(r.length||y++,w=0;w<r.length;w++){r[w].path=z+".oneOf["+x+"]"+r[w].path.substr(z.length)}s=s.concat(r)}1!==y&&(u.push({path:z,property:"oneOf",message:this.translate("error_oneOf",[y])}),u=u.concat(s))}if(B.not&&(this._validateSchema(B.not,A,z).length||u.push({path:z,property:"not",message:this.translate("error_not")})),B.type){if(Array.isArray(B.type)){for(y=!1,x=0;x<B.type.length;x++){if(this._checkType(B.type[x],A)){y=!0;break}}y||u.push({path:z,property:"type",message:this.translate("error_type_union")})}else{this._checkType(B.type,A)||u.push({path:z,property:"type",message:this.translate("error_type",[B.type])})}}if(B.disallow){if(Array.isArray(B.disallow)){for(y=!0,x=0;x<B.disallow.length;x++){if(this._checkType(B.disallow[x],A)){y=!1;break}}y||u.push({path:z,property:"disallow",message:this.translate("error_disallow_union")})}else{this._checkType(B.disallow,A)&&u.push({path:z,property:"disallow",message:this.translate("error_disallow",[B.disallow])})}}if("number"==typeof A){(B.multipleOf||B.divisibleBy)&&(y=A/(B.multipleOf||B.divisibleBy),y!==Math.floor(y)&&u.push({path:z,property:B.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[B.multipleOf||B.divisibleBy])})),B.hasOwnProperty("maximum")&&(B.exclusiveMaximum&&A>=B.maximum?u.push({path:z,property:"maximum",message:this.translate("error_maximum_excl",[B.maximum])}):!B.exclusiveMaximum&&A>B.maximum&&u.push({path:z,property:"maximum",message:this.translate("error_maximum_incl",[B.maximum])})),B.hasOwnProperty("minimum")&&(B.exclusiveMinimum&&A<=B.minimum?u.push({path:z,property:"minimum",message:this.translate("error_minimum_excl",[B.minimum])}):!B.exclusiveMinimum&&A<B.minimum&&u.push({path:z,property:"minimum",message:this.translate("error_minimum_incl",[B.minimum])}))}else{if("string"==typeof A){B.maxLength&&(A+"").length>B.maxLength&&u.push({path:z,property:"maxLength",message:this.translate("error_maxLength",[B.maxLength])}),B.minLength&&(A+"").length<B.minLength&&u.push({path:z,property:"minLength",message:this.translate(1===B.minLength?"error_notempty":"error_minLength",[B.minLength])}),B.pattern&&(new RegExp(B.pattern).test(A)||u.push({path:z,property:"pattern",message:this.translate("error_pattern")}))}else{if("object"==typeof A&&null!==A&&Array.isArray(A)){if(B.items){if(Array.isArray(B.items)){for(x=0;x<A.length;x++){if(B.items[x]){u=u.concat(this._validateSchema(B.items[x],A[x],z+"."+x))}else{if(B.additionalItems===!0){break}if(!B.additionalItems){if(B.additionalItems===!1){u.push({path:z,property:"additionalItems",message:this.translate("error_additionalItems")});break}break}u=u.concat(this._validateSchema(B.additionalItems,A[x],z+"."+x))}}}else{for(x=0;x<A.length;x++){u=u.concat(this._validateSchema(B.items,A[x],z+"."+x))}}}if(B.maxItems&&A.length>B.maxItems&&u.push({path:z,property:"maxItems",message:this.translate("error_maxItems",[B.maxItems])}),B.minItems&&A.length<B.minItems&&u.push({path:z,property:"minItems",message:this.translate("error_minItems",[B.minItems])}),B.uniqueItems){var f={};for(x=0;x<A.length;x++){if(y=JSON.stringify(A[x]),f[y]){u.push({path:z,property:"uniqueItems",message:this.translate("error_uniqueItems")});break}f[y]=!0}}}else{if("object"==typeof A&&null!==A){if(B.maxProperties){y=0;for(x in A){A.hasOwnProperty(x)&&y++}y>B.maxProperties&&u.push({path:z,property:"maxProperties",message:this.translate("error_maxProperties",[B.maxProperties])})}if(B.minProperties){y=0;for(x in A){A.hasOwnProperty(x)&&y++}y<B.minProperties&&u.push({path:z,property:"minProperties",message:this.translate("error_minProperties",[B.minProperties])})}if(B.required&&Array.isArray(B.required)){for(x=0;x<B.required.length;x++){"undefined"==typeof A[B.required[x]]&&u.push({path:z,property:"required",message:this.translate("error_required",[B.required[x]])})}}var d={};if(B.properties){for(x in B.properties){B.properties.hasOwnProperty(x)&&(d[x]=!0,u=u.concat(this._validateSchema(B.properties[x],A[x],z+"."+x)))}}if(B.patternProperties){for(x in B.patternProperties){if(B.patternProperties.hasOwnProperty(x)){var c=new RegExp(x);for(w in A){A.hasOwnProperty(w)&&c.test(w)&&(d[w]=!0,u=u.concat(this._validateSchema(B.patternProperties[x],A[w],z+"."+w)))}}}}if("undefined"!=typeof B.additionalProperties||!this.jsoneditor.options.no_additional_properties||B.oneOf||B.anyOf||(B.additionalProperties=!1),"undefined"!=typeof B.additionalProperties){for(x in A){if(A.hasOwnProperty(x)&&!d[x]){if(!B.additionalProperties){u.push({path:z,property:"additionalProperties",message:this.translate("error_additional_properties",[x])});break}if(B.additionalProperties===!0){break}u=u.concat(this._validateSchema(B.additionalProperties,A[x],z+"."+x))}}}if(B.dependencies){for(x in B.dependencies){if(B.dependencies.hasOwnProperty(x)&&"undefined"!=typeof A[x]){if(Array.isArray(B.dependencies[x])){for(w=0;w<B.dependencies[x].length;w++){"undefined"==typeof A[B.dependencies[x][w]]&&u.push({path:z,property:"dependencies",message:this.translate("error_dependency",[B.dependencies[x][w]])})}}else{u=u.concat(this._validateSchema(B.dependencies[x],A,z))}}}}}}}}return o(m.defaults.custom_validators,function(b,a){u=u.concat(a.call(v,B,A,z))}),u},_checkType:function(d,c){return"string"==typeof d?"string"===d?"string"==typeof c:"number"===d?"number"==typeof c:"integer"===d?"number"==typeof c&&c===Math.floor(c):"boolean"===d?"boolean"==typeof c:"array"===d?Array.isArray(c):"object"===d?null!==c&&!Array.isArray(c)&&"object"==typeof c:"null"===d?null===c:!0:!this._validateSchema(d,c).length}}),m.AbstractEditor=j.extend({onChildEditorChange:function(b){this.onChange(!0)},notify:function(){this.jsoneditor.notifyWatchers(this.path)},change:function(){this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()},onChange:function(b){this.notify(),this.watch_listener&&this.watch_listener(),b&&this.change()},register:function(){this.jsoneditor.registerEditor(this),this.onChange()},unregister:function(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)},getNumColumns:function(){return 12},init:function(b){this.jsoneditor=b.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.original_schema=b.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.options=p({},this.options||{},b.schema.options||{},b),b.path||this.schema.id||(this.schema.id="root"),this.path=b.path||"root",this.formname=b.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.jsoneditor.options.form_name_root&&(this.formname=this.formname.replace(/^root\[/,this.jsoneditor.options.form_name_root+"[")),this.key=this.path.split(".").pop(),this.parent=b.parent,this.link_watchers=[],b.container&&this.setContainer(b.container)},setContainer:function(b){this.container=b,this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&"string"==typeof this.schema.type&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)},preBuild:function(){},build:function(){},postBuild:function(){this.setupWatchListeners(),this.addLinks(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.register(),this.onWatchedFieldChange()},setupWatchListeners:function(){var q=this;if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=function(){q.refreshWatchedFieldValues()&&q.onWatchedFieldChange()},this.register(),this.schema.hasOwnProperty("watch")){var h,v,u,t,s;for(var r in this.schema.watch){if(this.schema.watch.hasOwnProperty(r)){if(h=this.schema.watch[r],Array.isArray(h)?v=[h[0]].concat(h[1].split(".")):(v=h.split("."),q.theme.closest(q.container,'[data-schemaid="'+v[0]+'"]')||v.unshift("#")),u=v.shift(),"#"===u&&(u=q.jsoneditor.schema.id||"root"),t=q.theme.closest(q.container,'[data-schemaid="'+u+'"]'),!t){throw"Could not find ancestor node with id "+u}s=t.getAttribute("data-schemapath")+"."+v.join("."),q.jsoneditor.watch(s,q.watch_listener),q.watched[r]=s}}}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))},addLinks:function(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),this.container.appendChild(this.link_holder),this.schema.links)){for(var b=0;b<this.schema.links.length;b++){this.addLink(this.getLink(this.schema.links[b]))}}},getButton:function(g,f,r){var q="json-editor-btn-"+f;f=this.iconlib?this.iconlib.getIcon(f):null,!f&&r&&(g=r,r=null);var h=this.theme.getButton(g,f,r);return h.className+=" "+q+" ",h},setButtonText:function(f,e,h,g){return h=this.iconlib?this.iconlib.getIcon(h):null,!h&&g&&(e=g,g=null),this.theme.setButtonText(f,e,h,g)},addLink:function(b){this.link_holder&&this.link_holder.appendChild(b)},getLink:function(r){var q,x,w=r.mediaType||"application/javascript",v=w.split("/")[0],u=this.jsoneditor.compileTemplate(r.href,this.template_engine);if("image"===v){q=this.theme.getBlockLinkHolder(),x=document.createElement("a"),x.setAttribute("target","_blank");var t=document.createElement("img");this.theme.createImageLink(q,x,t),this.link_watchers.push(function(a){var c=u(a);x.setAttribute("href",c),x.setAttribute("title",r.rel||c),t.setAttribute("src",c)})}else{if(["audio","video"].indexOf(v)>=0){q=this.theme.getBlockLinkHolder(),x=this.theme.getBlockLink(),x.setAttribute("target","_blank");var s=document.createElement(v);s.setAttribute("controls","controls"),this.theme.createMediaLink(q,x,s),this.link_watchers.push(function(a){var c=u(a);x.setAttribute("href",c),x.textContent=r.rel||c,s.setAttribute("src",c)})}else{q=this.theme.getBlockLink(),q.setAttribute("target","_blank"),q.textContent=r.rel,this.link_watchers.push(function(b){var a=u(b);q.setAttribute("href",a),q.textContent=r.rel||a})}}return q},refreshWatchedFieldValues:function(){if(this.watched_values){var h={},g=!1,t=this;if(this.watched){var s,r;for(var q in this.watched){this.watched.hasOwnProperty(q)&&(r=t.jsoneditor.getEditor(this.watched[q]),s=r?r.getValue():null,t.watched_values[q]!==s&&(g=!0),h[q]=s)}}return h.self=this.getValue(),this.watched_values.self!==h.self&&(g=!0),this.watched_values=h,g}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){if(this.header){if(this.header.children.length){for(var b=0;b<this.header.childNodes.length;b++){if(3===this.header.childNodes[b].nodeType){this.header.childNodes[b].nodeValue=this.getHeaderText();break}}}else{this.header.textContent=this.getHeaderText()}}},getHeaderText:function(b){return this.header_text?this.header_text:b?this.schema.title:this.getTitle()},onWatchedFieldChange:function(){var e;if(this.header_template){e=p(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:1*this.key,i1:1*this.key+1,title:this.getTitle()});var c=this.header_template(e);c!==this.header_text&&(this.header_text=c,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(var f=0;f<this.link_watchers.length;f++){this.link_watchers[f](e)}}},setValue:function(b){this.value=b},getValue:function(){return this.value},refreshValue:function(){},getChildEditors:function(){return !1},destroy:function(){var b=this;this.unregister(this),o(this.watched,function(a,d){b.jsoneditor.unwatch(d,b.watch_listener)}),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null},getDefault:function(){if(this.schema["default"]){return this.schema["default"]}if(this.schema["enum"]){return this.schema["enum"][0]}var b=this.schema.type||this.schema.oneOf;if(b&&Array.isArray(b)&&(b=b[0]),b&&"object"==typeof b&&(b=b.type),b&&Array.isArray(b)&&(b=b[0]),"string"==typeof b){if("number"===b){return 0}if("boolean"===b){return !1}if("integer"===b){return 0}if("string"===b){return""}if("object"===b){return{}}if("array"===b){return[]}}return null},getTitle:function(){return this.schema.title||this.key},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},isEnabled:function(){return !this.disabled},isRequired:function(){return"boolean"==typeof this.schema.required?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.indexOf(this.key)>-1:this.jsoneditor.options.required_by_default?!0:!1},getDisplayText:function(f){var d=[],h={};o(f,function(e,c){c.title&&(h[c.title]=h[c.title]||0,h[c.title]++),c.description&&(h[c.description]=h[c.description]||0,h[c.description]++),c.format&&(h[c.format]=h[c.format]||0,h[c.format]++),c.type&&(h[c.type]=h[c.type]||0,h[c.type]++)}),o(f,function(b,q){var c;c="string"==typeof q?q:q.title&&h[q.title]<=1?q.title:q.format&&h[q.format]<=1?q.format:q.type&&h[q.type]<=1?q.type:q.description&&h[q.description]<=1?q.descripton:q.title?q.title:q.format?q.format:q.type?q.type:q.description?q.description:JSON.stringify(q).length<50?JSON.stringify(q):"type",d.push(c)});var g={};return o(d,function(b,c){g[c]=g[c]||0,g[c]++,h[c]>1&&(d[b]=c+" "+g[c])}),d},getOption:function(d){try{throw"getOption is deprecated"}catch(c){window.console.error(c)}return this.options[d]},showValidationErrors:function(b){}}),m.defaults.editors["null"]=m.AbstractEditor.extend({getValue:function(){return null},setValue:function(){this.onChange()},getNumColumns:function(){return 2}}),m.defaults.editors.string=m.AbstractEditor.extend({register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},setValue:function(g,f,r){if((!this.template||r)&&(null===g||"undefined"==typeof g?g="":"object"==typeof g?g=JSON.stringify(g):"string"!=typeof g&&(g=""+g),g!==this.serialized)){var q=this.sanitize(g);if(this.input.value!==q){this.input.value=q,this.sceditor_instance?this.sceditor_instance.val(q):this.epiceditor?this.epiceditor.importFile(null,q):this.ace_editor&&this.ace_editor.setValue(q);var h=r||this.getValue()!==g;this.refreshValue(),f?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(h)}}},getNumColumns:function(){var d,c=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);return d="textarea"===this.input_type?6:["text","email"].indexOf(this.input_type)>=0?4:2,Math.min(12,Math.max(c,d))},build:function(){var f=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format){if("textarea"===this.format){this.input_type="textarea",this.input=this.theme.getTextareaInput()}else{if("range"===this.format){this.input_type="range";var e=this.schema.minimum||0,h=this.schema.maximum||Math.max(100,e+1),g=1;this.schema.multipleOf&&(e%this.schema.multipleOf&&(e=Math.ceil(e/this.schema.multipleOf)*this.schema.multipleOf),h%this.schema.multipleOf&&(h=Math.floor(h/this.schema.multipleOf)*this.schema.multipleOf),g=this.schema.multipleOf),this.input=this.theme.getRangeInput(e,h,g)}else{["actionscript","batchfile","bbcode","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","markdown","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","r","ruby","sass","scala","scss","smarty","sql","stylus","svg","twig","vbscript","xml","yaml"].indexOf(this.format)>=0?(this.input_type=this.format,this.source_code=!0,this.input=this.theme.getTextareaInput()):(this.input_type=this.format,this.input=this.theme.getFormInputField(this.input_type))}}}else{this.input_type="text",this.input=this.theme.getFormInputField(this.input_type)}"undefined"!=typeof this.schema.maxLength&&this.input.setAttribute("maxlength",this.schema.maxLength),"undefined"!=typeof this.schema.pattern?this.input.setAttribute("pattern",this.schema.pattern):"undefined"!=typeof this.schema.minLength&&this.input.setAttribute("pattern",".{"+this.schema.minLength+",}"),this.options.compact?this.container.className+=" compact":this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(a){if(a.preventDefault(),a.stopPropagation(),f.schema.template){return void (this.value=f.value)}var r=this.value,q=f.sanitize(r);r!==q&&(this.value=q),f.is_dirty=!0,f.refreshValue(),f.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=function(q){if(q){var d,r=q.offsetHeight;if(q.offsetHeight<q.scrollHeight){for(d=0;q.offsetHeight<q.scrollHeight+3&&!(d>100);){d++,r++,q.style.height=r+"px"}}else{for(d=0;q.offsetHeight>=q.scrollHeight+3&&!(d>100);){d++,r--,q.style.height=r+"px"}q.style.height=r+1+"px"}}},this.input.addEventListener("keyup",function(a){f.adjust_height(this)}),this.input.addEventListener("change",function(a){f.adjust_height(this)}),this.adjust_height()),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),window.requestAnimationFrame(function(){f.input.parentNode&&f.afterInputReady(),f.adjust_height&&f.adjust_height(f.input)}),this.schema.template?(this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()):this.refreshValue()},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},afterInputReady:function(){var e,c=this;if(this.source_code){if(this.options.wysiwyg&&["html","bbcode"].indexOf(this.input_type)>=0&&window.jQuery&&window.jQuery.fn&&window.jQuery.fn.sceditor){e=p({},{plugins:"html"===c.input_type?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300},m.plugins.sceditor,c.options.sceditor_options||{}),window.jQuery(c.input).sceditor(e),c.sceditor_instance=window.jQuery(c.input).sceditor("instance"),c.sceditor_instance.blur(function(){var b=window.jQuery("<div>"+c.sceditor_instance.val()+"</div>");window.jQuery("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",b).remove(),c.input.value=b.html(),c.value=c.input.value,c.is_dirty=!0,c.onChange(!0)})}else{if("markdown"===this.input_type&&window.EpicEditor){this.epiceditor_container=document.createElement("div"),this.input.parentNode.insertBefore(this.epiceditor_container,this.input),this.input.style.display="none",e=p({},m.plugins.epiceditor,{container:this.epiceditor_container,clientSideStorage:!1}),this.epiceditor=new window.EpicEditor(e).load(),this.epiceditor.importFile(null,this.getValue()),this.epiceditor.on("update",function(){var b=c.epiceditor.exportFile();c.input.value=b,c.value=b,c.is_dirty=!0,c.onChange(!0)})}else{if(window.ace){var f=this.input_type;("cpp"===f||"c++"===f||"c"===f)&&(f="c_cpp"),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.ace_container.style.height="400px",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor=window.ace.edit(this.ace_container),this.ace_editor.setValue(this.getValue()),m.plugins.ace.theme&&this.ace_editor.setTheme("ace/theme/"+m.plugins.ace.theme),f=window.ace.require("ace/mode/"+f),f&&this.ace_editor.getSession().setMode(new f.Mode),this.ace_editor.on("change",function(){var b=c.ace_editor.getValue();c.input.value=b,c.refreshValue(),c.is_dirty=!0,c.onChange(!0)})}}}}c.theme.afterInputReady(c.input)},refreshValue:function(){this.value=this.input.value,"string"!=typeof this.value&&(this.value=""),this.serialized=this.value},destroy:function(){this.sceditor_instance?this.sceditor_instance.destroy():this.epiceditor?this.epiceditor.unload():this.ace_editor&&this.ace_editor.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this._super()},sanitize:function(b){return b},onWatchedFieldChange:function(){var b;this.template&&(b=this.getWatchedFieldValues(),this.setValue(this.template(b),!1,!0)),this._super()},showValidationErrors:function(e){var d=this;if("always"===this.jsoneditor.options.show_errors){}else{if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors){return}}this.previous_error_setting=this.jsoneditor.options.show_errors;var f=[];o(e,function(b,c){c.path===d.path&&f.push(c.message)}),f.length?this.theme.addInputError(this.input,f.join(". ")+"."):this.theme.removeInputError(this.input)}}),m.defaults.editors.number=m.defaults.editors.string.extend({sanitize:function(b){return(b+"").replace(/[^0-9\.\-eE]/g,"")},getNumColumns:function(){return 2},getValue:function(){return 1*this.value}}),m.defaults.editors.integer=m.defaults.editors.number.extend({sanitize:function(b){return b+="",b.replace(/[^0-9\-]/g,"")},getNumColumns:function(){return 2}}),m.defaults.editors.object=m.AbstractEditor.extend({getDefault:function(){return p({},this.schema["default"]||{})},getChildEditors:function(){return this.editors},register:function(){if(this._super(),this.editors){for(var b in this.editors){this.editors.hasOwnProperty(b)&&this.editors[b].register()}}},unregister:function(){if(this._super(),this.editors){for(var b in this.editors){this.editors.hasOwnProperty(b)&&this.editors[b].unregister()}}},getNumColumns:function(){return Math.max(Math.min(12,this.maxwidth),3)},enable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),this._super(),this.editors){for(var b in this.editors){this.editors.hasOwnProperty(b)&&this.editors[b].enable()}}},disable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),this._super(),this.editors){for(var b in this.editors){this.editors.hasOwnProperty(b)&&this.editors[b].disable()}}},layoutEditors:function(){var y,x,w=this;if(this.row_container){this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(f,c){var h=w.editors[f].schema.propertyOrder,g=w.editors[c].schema.propertyOrder;return"number"!=typeof h&&(h=1000),"number"!=typeof g&&(g=1000),h-g});var v;if("grid"===this.format){var u=[];for(o(this.property_order,function(f,c){var D=w.editors[c];if(!D.property_removed){for(var C=!1,B=D.options.hidden?0:D.options.grid_columns||D.getNumColumns(),A=D.options.hidden?0:D.container.offsetHeight,z=0;z<u.length;z++){u[z].width+B<=12&&(!A||0.5*u[z].minh<A&&2*u[z].maxh>A)&&(C=z)}C===!1&&(u.push({width:0,minh:999999,maxh:0,editors:[]}),C=u.length-1),u[C].editors.push({key:c,width:B,height:A}),u[C].width+=B,u[C].minh=Math.min(u[C].minh,A),u[C].maxh=Math.max(u[C].maxh,A)}}),y=0;y<u.length;y++){if(u[y].width<12){var t=!1,s=0;for(x=0;x<u[y].editors.length;x++){t===!1?t=x:u[y].editors[x].width>u[y].editors[t].width&&(t=x),u[y].editors[x].width*=12/u[y].width,u[y].editors[x].width=Math.floor(u[y].editors[x].width),s+=u[y].editors[x].width}12>s&&(u[y].editors[t].width+=12-s),u[y].width=12}}if(this.layout===JSON.stringify(u)){return !1}for(this.layout=JSON.stringify(u),v=document.createElement("div"),y=0;y<u.length;y++){var r=this.theme.getGridRow();for(v.appendChild(r),x=0;x<u[y].editors.length;x++){var q=u[y].editors[x].key,d=this.editors[q];d.options.hidden?d.container.style.display="none":this.theme.setGridColumnSize(d.container,u[y].editors[x].width),r.appendChild(d.container)}}}else{v=document.createElement("div"),o(this.property_order,function(e,c){var h=w.editors[c];if(!h.property_removed){var g=w.theme.getGridRow();v.appendChild(g),h.options.hidden?h.container.style.display="none":w.theme.setGridColumnSize(h.container,12),g.appendChild(h.container)}})}this.row_container.innerHTML="",this.row_container.appendChild(v)}},getPropertySchema:function(g){var c=this.schema.properties[g]||{};c=p({},c);var r=this.schema.properties[g]?!0:!1;if(this.schema.patternProperties){for(var q in this.schema.patternProperties){if(this.schema.patternProperties.hasOwnProperty(q)){var h=new RegExp(q);h.test(g)&&(c.allOf=c.allOf||[],c.allOf.push(this.schema.patternProperties[q]),r=!0)}}}return !r&&this.schema.additionalProperties&&"object"==typeof this.schema.additionalProperties&&(c=p({},this.schema.additionalProperties)),c},preBuild:function(){this._super(),this.editors={},this.cached_editors={};var b=this;if(this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row){o(this.schema.properties,function(a,h){var g=b.jsoneditor.getEditorClass(h);b.editors[a]=b.jsoneditor.createEditor(g,{jsoneditor:b.jsoneditor,schema:h,path:b.path+"."+a,parent:b,compact:!0,required:!0}),b.editors[a].preBuild();var f=b.editors[a].options.hidden?0:b.editors[a].options.grid_columns||b.editors[a].getNumColumns();b.minwidth+=f,b.maxwidth+=f}),this.no_link_holder=!0}else{if(this.options.table){throw"Not supported yet"}this.defaultProperties=this.schema.defaultProperties||Object.keys(this.schema.properties),b.maxwidth+=1,o(this.defaultProperties,function(a,d){b.addObjectProperty(d,!0),b.editors[d]&&(b.minwidth=Math.max(b.minwidth,b.editors[d].options.grid_columns||b.editors[d].getNumColumns()),b.maxwidth+=b.editors[d].options.grid_columns||b.editors[d].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(a,h){var g=b.editors[a].schema.propertyOrder,f=b.editors[h].schema.propertyOrder;return"number"!=typeof g&&(g=1000),"number"!=typeof f&&(f=1000),g-f})},build:function(){var d=this;if(this.options.table_row){this.editor_holder=this.container,o(this.editors,function(a,f){var e=d.theme.getTableCell();d.editor_holder.appendChild(e),f.setContainer(e),f.build(),f.postBuild(),d.editors[a].options.hidden&&(e.style.display="none"),d.editors[a].options.input_width&&(e.style.width=d.editors[a].options.input_width)})}else{if(this.options.table){throw"Not supported yet"}this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.container.style.position="relative",this.editjson_holder=this.theme.getModal(),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.style.height="170px",this.editjson_textarea.style.width="300px",this.editjson_textarea.style.display="block",this.editjson_save=this.getButton("Save","save","Save"),this.editjson_save.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),d.saveJSON()}),this.editjson_cancel=this.getButton("Cancel","cancel","Cancel"),this.editjson_cancel.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),d.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.style.width="295px",this.addproperty_list.style.maxHeight="160px",this.addproperty_list.style.padding="5px 0",this.addproperty_list.style.overflowY="auto",this.addproperty_list.style.overflowX="hidden",this.addproperty_list.style.paddingLeft="5px",this.addproperty_list.setAttribute("class","property-selector"),this.addproperty_add=this.getButton("add","add","add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input.style.width="220px",this.addproperty_input.style.marginBottom="0",this.addproperty_input.style.display="inline-block",this.addproperty_add.addEventListener("click",function(a){if(a.preventDefault(),a.stopPropagation(),d.addproperty_input.value){if(d.editors[d.addproperty_input.value]){return void window.alert("there is already a property with that name")}d.addObjectProperty(d.addproperty_input.value),d.editors[d.addproperty_input.value]&&d.editors[d.addproperty_input.value].disable(),d.onChange(!0)}}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);var c=document.createElement("div");c.style.clear="both",this.addproperty_holder.appendChild(c),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.editor_holder.style.paddingBottom="0",this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),this.editor_holder.appendChild(this.row_container),o(this.editors,function(a,f){var e=d.theme.getGridColumn();d.row_container.appendChild(e),f.setContainer(e),f.build(),f.postBuild()}),this.title_controls=this.theme.getHeaderButtonHolder(),this.editjson_controls=this.theme.getHeaderButtonHolder(),this.addproperty_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.title.appendChild(this.editjson_controls),this.title.appendChild(this.addproperty_controls),this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse"),this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),d.collapsed?(d.editor_holder.style.display="",d.collapsed=!1,d.setButtonText(d.toggle_button,"","collapse","Collapse")):(d.editor_holder.style.display="none",d.collapsed=!0,d.setButtonText(d.toggle_button,"","expand","Expand"))}),this.options.collapsed&&n(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.editjson_button=this.getButton("JSON","edit","Edit JSON"),this.editjson_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),d.toggleEditJSON()}),this.editjson_controls.appendChild(this.editjson_button),this.editjson_controls.appendChild(this.editjson_holder),this.schema.options&&"undefined"!=typeof this.schema.options.disable_edit_json?this.schema.options.disable_edit_json&&(this.editjson_button.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_button.style.display="none"),this.addproperty_button=this.getButton("Properties","edit","Object Properties"),this.addproperty_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),d.toggleAddProperty()}),this.addproperty_controls.appendChild(this.addproperty_button),this.addproperty_controls.appendChild(this.addproperty_holder),this.refreshAddProperties()}this.options.table_row?(this.editor_holder=this.container,o(this.property_order,function(a,e){d.editor_holder.appendChild(d.editors[e].container)})):(this.layoutEditors(),this.layoutEditors())},showEditJSON:function(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=this.editjson_button.offsetLeft+"px",this.editjson_holder.style.top=this.editjson_button.offsetTop+this.editjson_button.offsetHeight+"px",this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_button.disabled=!1,this.editing_json=!0)},hideEditJSON:function(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)},saveJSON:function(){if(this.editjson_holder){try{var d=JSON.parse(this.editjson_textarea.value);this.setValue(d),this.hideEditJSON()}catch(c){throw window.alert("invalid JSON"),c}}},toggleEditJSON:function(){this.editing_json?this.hideEditJSON():this.showEditJSON()},insertPropertyControlUsingPropertyOrder:function(h,g,t){var s;this.schema.properties[h]&&(s=this.schema.properties[h].propertyOrder),"number"!=typeof s&&(s=1000),g.propertyOrder=s;for(var r=0;r<t.childNodes.length;r++){var q=t.childNodes[r];if(g.propertyOrder<q.propertyOrder){this.addproperty_list.insertBefore(g,q),g=null;break}}g&&this.addproperty_list.appendChild(g)},addPropertyCheckbox:function(h){var g,t,s,r,q=this;return g=q.theme.getCheckbox(),g.style.width="auto",s=this.schema.properties[h]&&this.schema.properties[h].title?this.schema.properties[h].title:h,t=q.theme.getCheckboxLabel(s),r=q.theme.getFormControl(t,g),r.style.paddingBottom=r.style.marginBottom=r.style.paddingTop=r.style.marginTop=0,r.style.height="auto",this.insertPropertyControlUsingPropertyOrder(h,r,this.addproperty_list),g.checked=h in this.editors,g.addEventListener("change",function(){g.checked?q.addObjectProperty(h):q.removeObjectProperty(h),q.onChange(!0)}),q.addproperty_checkboxes[h]=g,g},showAddProperty:function(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=this.addproperty_button.offsetLeft+"px",this.addproperty_holder.style.top=this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight+"px",this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())},hideAddProperty:function(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)},toggleAddProperty:function(){this.adding_property?this.hideAddProperty():this.showAddProperty()},removeObjectProperty:function(b){this.editors[b]&&(this.editors[b].unregister(),delete this.editors[b],this.refreshValue(),this.layoutEditors())},addObjectProperty:function(h,g){var t=this;if(!this.editors[h]){if(this.cached_editors[h]){if(this.editors[h]=this.cached_editors[h],g){return}this.editors[h].register()}else{if(!(this.canHaveAdditionalProperties()||this.schema.properties&&this.schema.properties[h])){return}var s=t.getPropertySchema(h),r=t.jsoneditor.getEditorClass(s);if(t.editors[h]=t.jsoneditor.createEditor(r,{jsoneditor:t.jsoneditor,schema:s,path:t.path+"."+h,parent:t}),t.editors[h].preBuild(),!g){var q=t.theme.getChildEditorHolder();t.editor_holder.appendChild(q),t.editors[h].setContainer(q),t.editors[h].build(),t.editors[h].postBuild()}t.cached_editors[h]=t.editors[h]}g||(t.refreshValue(),t.layoutEditors())}},onChildEditorChange:function(b){this.refreshValue(),this._super(b)},canHaveAdditionalProperties:function(){return"boolean"==typeof this.schema.additionalProperties?this.schema.additionalProperties:!this.jsoneditor.options.no_additional_properties},destroy:function(){o(this.cached_editors,function(d,c){c.destroy()}),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,this._super()},getValue:function(){var d=this._super();if(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties){for(var c in d){d.hasOwnProperty(c)&&(d[c]||delete d[c])}}return d},refreshValue:function(){this.value={};for(var b in this.editors){this.editors.hasOwnProperty(b)&&(this.value[b]=this.editors[b].getValue())}this.adding_property&&this.refreshAddProperties()},refreshAddProperties:function(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties){return void (this.addproperty_controls.style.display="none")}var g,f=!1,r=!1,q=0,h=!1;for(g in this.editors){this.editors.hasOwnProperty(g)&&q++}f=this.canHaveAdditionalProperties()&&!("undefined"!=typeof this.schema.maxProperties&&q>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={};for(g in this.cached_editors){this.cached_editors.hasOwnProperty(g)&&(this.addPropertyCheckbox(g),this.isRequired(this.cached_editors[g])&&g in this.editors&&(this.addproperty_checkboxes[g].disabled=!0),"undefined"!=typeof this.schema.minProperties&&q<=this.schema.minProperties?(this.addproperty_checkboxes[g].disabled=this.addproperty_checkboxes[g].checked,this.addproperty_checkboxes[g].checked||(h=!0)):g in this.editors?(h=!0,r=!0):f||this.schema.properties.hasOwnProperty(g)?(this.addproperty_checkboxes[g].disabled=!1,h=!0):this.addproperty_checkboxes[g].disabled=!0)}this.canHaveAdditionalProperties()&&(h=!0);for(g in this.schema.properties){this.schema.properties.hasOwnProperty(g)&&(this.cached_editors[g]||(h=!0,this.addPropertyCheckbox(g)))}h?this.canHaveAdditionalProperties()?f?this.addproperty_add.disabled=!1:this.addproperty_add.disabled=!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_controls.style.display="none")},isRequired:function(b){return"boolean"==typeof b.schema.required?b.schema.required:Array.isArray(this.schema.required)?this.schema.required.indexOf(b.key)>-1:this.jsoneditor.options.required_by_default?!0:!1},setValue:function(e,d){var f=this;e=e||{},("object"!=typeof e||Array.isArray(e))&&(e={}),o(this.cached_editors,function(b,a){"undefined"!=typeof e[b]?(f.addObjectProperty(b),a.setValue(e[b],d)):d||f.isRequired(a)?a.setValue(a.getDefault(),d):f.removeObjectProperty(b)}),o(e,function(b,c){f.cached_editors[b]||(f.addObjectProperty(b),f.editors[b]&&f.editors[b].setValue(c,d))}),this.refreshValue(),this.layoutEditors(),this.onChange()},showValidationErrors:function(f){var d=this,h=[],g=[];if(o(f,function(b,c){c.path===d.path?h.push(c):g.push(c)}),this.error_holder){if(h.length){this.error_holder.innerHTML="",this.error_holder.style.display="",o(h,function(b,e){d.error_holder.appendChild(d.theme.getErrorMessage(e.message))})}else{this.error_holder.style.display="none"}}this.options.table_row&&(h.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),o(this.editors,function(e,c){c.showValidationErrors(g)})}}),m.defaults.editors.array=m.AbstractEditor.extend({getDefault:function(){return this.schema["default"]||[]},register:function(){if(this._super(),this.rows){for(var b=0;b<this.rows.length;b++){this.rows[b].register()}}},unregister:function(){if(this._super(),this.rows){for(var b=0;b<this.rows.length;b++){this.rows[b].unregister()}}},getNumColumns:function(){var b=this.getItemInfo(0);return this.tabs_holder?Math.max(Math.min(12,b.width+2),4):b.width},enable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!1),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!1),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!1),this.rows){for(var b=0;b<this.rows.length;b++){this.rows[b].enable(),this.rows[b].moveup_button&&(this.rows[b].moveup_button.disabled=!1),this.rows[b].movedown_button&&(this.rows[b].movedown_button.disabled=!1),this.rows[b].delete_button&&(this.rows[b].delete_button.disabled=!1)}}this._super()},disable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!0),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!0),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!0),this.rows){for(var b=0;b<this.rows.length;b++){this.rows[b].disable(),this.rows[b].moveup_button&&(this.rows[b].moveup_button.disabled=!0),this.rows[b].movedown_button&&(this.rows[b].movedown_button.disabled=!0),this.rows[b].delete_button&&(this.rows[b].delete_button.disabled=!0)}}this._super()},preBuild:function(){this._super(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add},build:function(){this.options.compact?(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.isRequired()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),"tabs"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls))),this.addControls()},onChildEditorChange:function(b){this.refreshValue(),this.refreshTabs(!0),this._super(b)},getItemTitle:function(){if(!this.item_title){if(this.schema.items&&!Array.isArray(this.schema.items)){var b=this.jsoneditor.expandRefs(this.schema.items);this.item_title=b.title||"item"}else{this.item_title="item"}}return this.item_title},getItemSchema:function(b){return Array.isArray(this.schema.items)?b>=this.schema.items.length?this.schema.additionalItems===!0?{}:this.schema.additionalItems?p({},this.schema.additionalItems):void 0:p({},this.schema.items[b]):this.schema.items?p({},this.schema.items):{}},getItemInfo:function(e){var d=this.getItemSchema(e);this.item_info=this.item_info||{};var f=JSON.stringify(d);return"undefined"!=typeof this.item_info[f]?this.item_info[f]:(d=this.jsoneditor.expandRefs(d),this.item_info[f]={title:d.title||"item","default":d["default"],width:12,child_editors:d.properties||d.items},this.item_info[f])},getElementEditor:function(h){var g=this.getItemInfo(h),t=this.getItemSchema(h);t=this.jsoneditor.expandRefs(t),t.title=g.title+" "+(h+1);var s,r=this.jsoneditor.getEditorClass(t);s=this.tabs_holder?this.theme.getTabContent():g.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel(),this.row_holder.appendChild(s);var q=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:t,container:s,path:this.path+"."+h,parent:this,required:!0});return q.preBuild(),q.build(),q.postBuild(),q.title_controls||(q.array_controls=this.theme.getButtonHolder(),s.appendChild(q.array_controls)),q},destroy:function(){this.empty(!0),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.controls&&this.controls.parentNode&&this.controls.parentNode.removeChild(this.controls),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,this._super()},empty:function(d){if(this.rows){var c=this;o(this.rows,function(b,a){d&&(a.tab&&a.tab.parentNode&&a.tab.parentNode.removeChild(a.tab),c.destroyRow(a,!0),c.row_cache[b]=null),c.rows[b]=null}),c.rows=[],d&&(c.row_cache=[])}},destroyRow:function(e,d){var f=e.container;d?(e.destroy(),f.parentNode&&f.parentNode.removeChild(f),e.tab&&e.tab.parentNode&&e.tab.parentNode.removeChild(e.tab)):(e.tab&&(e.tab.style.display="none"),f.style.display="none",e.unregister())},getMax:function(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0},refreshTabs:function(d){var c=this;o(this.rows,function(b,a){a.tab&&(d?a.tab_text.textContent=a.getHeaderText():a.tab===c.active_tab?(c.theme.markTabActive(a.tab),a.container.style.display=""):(c.theme.markTabInactive(a.tab),a.container.style.display="none"))})},setValue:function(h,d){h=h||[],Array.isArray(h)||(h=[h]);var t=JSON.stringify(h);if(t!==this.serialized){if(this.schema.minItems){for(;h.length<this.schema.minItems;){h.push(this.getItemInfo(h.length)["default"])}}this.getMax()&&h.length>this.getMax()&&(h=h.slice(0,this.getMax()));var s=this;o(h,function(b,e){s.rows[b]?s.rows[b].setValue(e,d):s.row_cache[b]?(s.rows[b]=s.row_cache[b],s.rows[b].setValue(e,d),s.rows[b].container.style.display="",s.rows[b].tab&&(s.rows[b].tab.style.display=""),s.rows[b].register()):s.addRow(e,d)});for(var r=h.length;r<s.rows.length;r++){s.destroyRow(s.rows[r]),s.rows[r]=null}s.rows=s.rows.slice(0,h.length);var q=null;o(s.rows,function(e,c){return c.tab===s.active_tab?(q=c.tab,!1):void 0}),!q&&s.rows.length&&(q=s.rows[0].tab),s.active_tab=q,s.refreshValue(d),s.refreshTabs(!0),s.refreshTabs(),s.onChange()}},refreshValue:function(g){var d=this,r=this.value?this.value.length:0;if(this.value=[],o(this.rows,function(b,e){d.value[b]=e.getValue()}),r!==this.value.length||g){var q=this.schema.minItems&&this.schema.minItems>=this.rows.length;o(this.rows,function(b,e){e.movedown_button&&(b===d.rows.length-1?e.movedown_button.style.display="none":e.movedown_button.style.display=""),e.delete_button&&(q?e.delete_button.style.display="none":e.delete_button.style.display=""),d.value[b]=e.getValue()});var h=!1;this.value.length?1===this.value.length?(this.remove_all_rows_button.style.display="none",q||this.hide_delete_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",h=!0)):q||this.hide_delete_buttons?(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"):(this.delete_last_row_button.style.display="",this.remove_all_rows_button.style.display="",h=!0):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"),this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",h=!0),!this.collapsed&&h?this.controls.style.display="inline-block":this.controls.style.display="none"}},addRow:function(g,d){var r=this,q=this.rows.length;r.rows[q]=this.getElementEditor(q),r.row_cache[q]=r.rows[q],r.tabs_holder&&(r.rows[q].tab_text=document.createElement("span"),r.rows[q].tab_text.textContent=r.rows[q].getHeaderText(),r.rows[q].tab=r.theme.getTab(r.rows[q].tab_text),r.rows[q].tab.addEventListener("click",function(b){r.active_tab=r.rows[q].tab,r.refreshTabs(),b.preventDefault(),b.stopPropagation()}),r.theme.addTab(r.tabs_holder,r.rows[q].tab));var h=r.rows[q].title_controls||r.rows[q].array_controls;r.hide_delete_buttons||(r.rows[q].delete_button=this.getButton(r.getItemTitle(),"delete","Delete "+r.getItemTitle()),r.rows[q].delete_button.className+=" delete",r.rows[q].delete_button.setAttribute("data-i",q),r.rows[q].delete_button.addEventListener("click",function(s){s.preventDefault(),s.stopPropagation();var c=1*this.getAttribute("data-i"),v=r.getValue(),u=[],t=null;o(v,function(b,e){return b===c?void (r.rows[b].tab===r.active_tab&&(r.rows[b+1]?t=r.rows[b].tab:b&&(t=r.rows[b-1].tab))):void u.push(e)}),r.setValue(u),t&&(r.active_tab=t,r.refreshTabs()),r.onChange(!0)}),h&&h.appendChild(r.rows[q].delete_button)),q&&!r.hide_move_buttons&&(r.rows[q].moveup_button=this.getButton("","moveup","Move up"),r.rows[q].moveup_button.className+=" moveup",r.rows[q].moveup_button.setAttribute("data-i",q),r.rows[q].moveup_button.addEventListener("click",function(f){f.preventDefault(),f.stopPropagation();var c=1*this.getAttribute("data-i");if(!(0>=c)){var t=r.getValue(),s=t[c-1];t[c-1]=t[c],t[c]=s,r.setValue(t),r.active_tab=r.rows[c-1].tab,r.refreshTabs(),r.onChange(!0)}}),h&&h.appendChild(r.rows[q].moveup_button)),r.hide_move_buttons||(r.rows[q].movedown_button=this.getButton("","movedown","Move down"),r.rows[q].movedown_button.className+=" movedown",r.rows[q].movedown_button.setAttribute("data-i",q),r.rows[q].movedown_button.addEventListener("click",function(f){f.preventDefault(),f.stopPropagation();var c=1*this.getAttribute("data-i"),t=r.getValue();if(!(c>=t.length-1)){var s=t[c+1];t[c+1]=t[c],t[c]=s,r.setValue(t),r.active_tab=r.rows[c+1].tab,r.refreshTabs(),r.onChange(!0)}}),h&&h.appendChild(r.rows[q].movedown_button)),g&&r.rows[q].setValue(g,d),r.refreshTabs()},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse"),this.title_controls.appendChild(this.toggle_button);var d=e.row_holder.style.display,f=e.controls.style.display;this.toggle_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),e.collapsed?(e.collapsed=!1,e.panel&&(e.panel.style.display=""),e.row_holder.style.display=d,e.tabs_holder&&(e.tabs_holder.style.display=""),e.controls.style.display=f,e.setButtonText(this,"","collapse","Collapse")):(e.collapsed=!0,e.row_holder.style.display="none",e.tabs_holder&&(e.tabs_holder.style.display="none"),e.controls.style.display="none",e.panel&&(e.panel.style.display="none"),e.setButtonText(this,"","expand","Expand"))}),this.options.collapsed&&n(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this.getButton(this.getItemTitle(),"add","Add "+this.getItemTitle()),this.add_row_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation();var g=e.rows.length;e.row_cache[g]?(e.rows[g]=e.row_cache[g],e.rows[g].setValue(e.rows[g].getDefault()),e.rows[g].container.style.display="",e.rows[g].tab&&(e.rows[g].tab.style.display=""),e.rows[g].register()):e.addRow(),e.active_tab=e.rows[g].tab,e.refreshTabs(),e.refreshValue(),e.onChange(!0)}),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton("Last "+this.getItemTitle(),"delete","Delete Last "+this.getItemTitle()),this.delete_last_row_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation();var h=e.getValue(),g=null;e.rows.length>1&&e.rows[e.rows.length-1].tab===e.active_tab&&(g=e.rows[e.rows.length-2].tab),h.pop(),e.setValue(h),g&&(e.active_tab=g,e.refreshTabs()),e.onChange(!0)}),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton("All","delete","Delete All"),this.remove_all_rows_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),e.setValue([]),e.onChange(!0)}),e.controls.appendChild(this.remove_all_rows_button),e.tabs&&(this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px")},showValidationErrors:function(f){var d=this,h=[],g=[];if(o(f,function(b,c){c.path===d.path?h.push(c):g.push(c)}),this.error_holder){if(h.length){this.error_holder.innerHTML="",this.error_holder.style.display="",o(h,function(b,e){d.error_holder.appendChild(d.theme.getErrorMessage(e.message))})}else{this.error_holder.style.display="none"}}o(this.rows,function(e,c){c.showValidationErrors(g)})}}),m.defaults.editors.table=m.defaults.editors.array.extend({register:function(){if(this._super(),this.rows){for(var b=0;b<this.rows.length;b++){this.rows[b].register()}}},unregister:function(){if(this._super(),this.rows){for(var b=0;b<this.rows.length;b++){this.rows[b].unregister()}}},getNumColumns:function(){return Math.max(Math.min(12,this.width),3)},preBuild:function(){var b=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=b.title||"row",this.item_default=b["default"]||null,this.item_has_child_editors=b.properties||b.items,this.width=12,this._super()},build:function(){var h=this;this.table=this.theme.getTable(),this.container.appendChild(this.table),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);var g=this.getElementEditor(0,!0);if(this.item_default=g.getDefault(),this.width=g.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.title=this.theme.getHeader(this.getTitle(),this.isRequired()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors){for(var t=g.getChildEditors(),s=g.property_order||Object.keys(t),r=0;r<s.length;r++){var q=h.theme.getTableHeaderCell(t[s[r]].getTitle());t[s[r]].options.hidden&&(q.style.display="none"),h.header_row.appendChild(q)}}else{h.header_row.appendChild(h.theme.getTableHeaderCell(this.item_title))}g.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=h.theme.getTableHeaderCell(" "),h.header_row.appendChild(this.controls_header_cell),this.addControls()},onChildEditorChange:function(b){this.refreshValue(),this._super()},getItemDefault:function(){return p({},{"default":this.item_default})["default"]},getItemTitle:function(){return this.item_title},getElementEditor:function(q,c){var v=p({},this.schema.items),u=this.jsoneditor.getEditorClass(v,this.jsoneditor),t=this.row_holder.appendChild(this.theme.getTableRow()),s=t;this.item_has_child_editors||(s=this.theme.getTableCell(),t.appendChild(s));var r=this.jsoneditor.createEditor(u,{jsoneditor:this.jsoneditor,schema:v,container:s,path:this.path+"."+q,parent:this,compact:!0,table_row:!0});return r.preBuild(),c||(r.build(),r.postBuild(),r.controls_cell=t.appendChild(this.theme.getTableCell()),r.row=t,r.table_controls=this.theme.getButtonHolder(),r.controls_cell.appendChild(r.table_controls),r.table_controls.style.margin=0,r.table_controls.style.padding=0),r},destroy:function(){this.innerHTML="",this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.table&&this.table.parentNode&&this.table.parentNode.removeChild(this.table),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,this._super()},setValue:function(q,d){if(q=q||[],this.schema.minItems){for(;q.length<this.schema.minItems;){q.push(this.getItemDefault())}}this.schema.maxItems&&q.length>this.schema.maxItems&&(q=q.slice(0,this.schema.maxItems));var v=JSON.stringify(q);if(v!==this.serialized){var u=!1,t=this;o(q,function(e,c){t.rows[e]?t.rows[e].setValue(c):(t.addRow(c),u=!0)});for(var s=q.length;s<t.rows.length;s++){var r=t.rows[s].container;t.item_has_child_editors||t.rows[s].row.parentNode.removeChild(t.rows[s].row),t.rows[s].destroy(),r.parentNode&&r.parentNode.removeChild(r),t.rows[s]=null,u=!0}t.rows=t.rows.slice(0,q.length),t.refreshValue(),(u||d)&&t.refreshRowButtons(),t.onChange()}},refreshRowButtons:function(){var f=this,d=this.schema.minItems&&this.schema.minItems>=this.rows.length,h=!1;o(this.rows,function(b,a){a.movedown_button&&(b===f.rows.length-1?a.movedown_button.style.display="none":(h=!0,a.movedown_button.style.display="")),a.delete_button&&(d?a.delete_button.style.display="none":(h=!0,a.delete_button.style.display="")),a.moveup_button&&(h=!0)}),o(this.rows,function(e,c){h?c.controls_cell.style.display="":c.controls_cell.style.display="none"}),h?this.controls_header_cell.style.display="":this.controls_header_cell.style.display="none";var g=!1;this.value.length?1===this.value.length||this.hide_delete_buttons?(this.table.style.display="",this.remove_all_rows_button.style.display="none",d||this.hide_delete_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",g=!0)):(this.table.style.display="",d||this.hide_delete_buttons?(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"):(this.delete_last_row_button.style.display="",this.remove_all_rows_button.style.display="",g=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.table.style.display="none"),this.schema.maxItems&&this.schema.maxItems<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",g=!0),g?this.controls.style.display="":this.controls.style.display="none"},refreshValue:function(){var b=this;this.value=[],o(this.rows,function(a,d){b.value[a]=d.getValue()}),this.serialized=JSON.stringify(this.value)},addRow:function(f){var d=this,h=this.rows.length;d.rows[h]=this.getElementEditor(h);var g=d.rows[h].table_controls;this.hide_delete_buttons||(d.rows[h].delete_button=this.getButton("","delete","Delete"),d.rows[h].delete_button.className+=" delete",d.rows[h].delete_button.setAttribute("data-i",h),d.rows[h].delete_button.addEventListener("click",function(b){b.preventDefault(),b.stopPropagation();var s=1*this.getAttribute("data-i"),r=d.getValue(),q=[];o(r,function(e,c){e!==s&&q.push(c)}),d.setValue(q),d.onChange(!0)}),g.appendChild(d.rows[h].delete_button)),h&&!this.hide_move_buttons&&(d.rows[h].moveup_button=this.getButton("","moveup","Move up"),d.rows[h].moveup_button.className+=" moveup",d.rows[h].moveup_button.setAttribute("data-i",h),d.rows[h].moveup_button.addEventListener("click",function(b){b.preventDefault(),b.stopPropagation();var s=1*this.getAttribute("data-i");if(!(0>=s)){var r=d.getValue(),q=r[s-1];r[s-1]=r[s],r[s]=q,d.setValue(r),d.onChange(!0)}}),g.appendChild(d.rows[h].moveup_button)),this.hide_move_buttons||(d.rows[h].movedown_button=this.getButton("","movedown","Move down"),d.rows[h].movedown_button.className+=" movedown",d.rows[h].movedown_button.setAttribute("data-i",h),d.rows[h].movedown_button.addEventListener("click",function(b){b.preventDefault(),b.stopPropagation();var s=1*this.getAttribute("data-i"),r=d.getValue();if(!(s>=r.length-1)){var q=r[s+1];r[s+1]=r[s],r[s]=q,d.setValue(r),d.onChange(!0)}}),g.appendChild(d.rows[h].movedown_button)),f&&d.rows[h].setValue(f)},addControls:function(){var b=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse"),this.title_controls&&(this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),b.collapsed?(b.collapsed=!1,b.panel.style.display="",b.setButtonText(this,"","collapse","Collapse")):(b.collapsed=!0,b.panel.style.display="none",b.setButtonText(this,"","expand","Expand"))}),this.options.collapsed&&n(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this.getButton(this.getItemTitle(),"add","Add "+this.getItemTitle()),this.add_row_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),b.addRow(),b.refreshValue(),b.refreshRowButtons(),b.onChange(!0)}),b.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton("Last "+this.getItemTitle(),"delete","Delete Last "+this.getItemTitle()),this.delete_last_row_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation();var d=b.getValue();d.pop(),b.setValue(d),b.onChange(!0)}),b.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton("All","delete","Delete All"),this.remove_all_rows_button.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),b.setValue([]),b.onChange(!0)}),b.controls.appendChild(this.remove_all_rows_button)}}),m.defaults.editors.multiple=m.AbstractEditor.extend({register:function(){if(this.editors){for(var b=0;b<this.editors.length;b++){this.editors[b]&&this.editors[b].unregister()}this.editors[this.type]&&this.editors[this.type].register()}this._super()},unregister:function(){if(this._super(),this.editors){for(var b=0;b<this.editors.length;b++){this.editors[b]&&this.editors[b].unregister()}}},getNumColumns:function(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4},enable:function(){if(this.editors){for(var b=0;b<this.editors.length;b++){this.editors[b]&&this.editors[b].enable()}}this.switcher.disabled=!1,this._super()},disable:function(){if(this.editors){for(var b=0;b<this.editors.length;b++){this.editors[b]&&this.editors[b].disable()}}this.switcher.disabled=!0,this._super()},switchEditor:function(e){var d=this;this.editors[e]||this.buildChildEditor(e),d.type=e,d.register();var f=d.getValue();o(d.editors,function(b,c){c&&(d.type===b?(d.keep_values&&c.setValue(f,!0),c.container.style.display=""):c.container.style.display="none")}),d.refreshValue(),d.refreshHeaderText()},buildChildEditor:function(h){var c=this,t=this.types[h],s=c.theme.getChildEditorHolder();c.editor_holder.appendChild(s);var r;"string"==typeof t?(r=p({},c.schema),r.type=t):(r=p({},c.schema,t),r=c.jsoneditor.expandRefs(r),t.required&&Array.isArray(t.required)&&c.schema.required&&Array.isArray(c.schema.required)&&(r.required=c.schema.required.concat(t.required)));var q=c.jsoneditor.getEditorClass(r);c.editors[h]=c.jsoneditor.createEditor(q,{jsoneditor:c.jsoneditor,schema:r,container:s,path:c.path,parent:c,required:!0}),c.editors[h].preBuild(),c.editors[h].build(),c.editors[h].postBuild(),c.editors[h].header&&(c.editors[h].header.style.display="none"),c.editors[h].option=c.switcher_options[h],s.addEventListener("change_header_text",function(){c.refreshHeaderText()}),h!==c.type&&(s.style.display="none")},preBuild:function(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,"undefined"!=typeof this.jsoneditor.options.keep_oneof_values&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),"undefined"!=typeof this.options.keep_oneof_values&&(this.keep_values=this.options.keep_oneof_values),this.schema.oneOf){this.oneOf=!0,this.types=this.schema.oneOf,o(this.types,function(f,e){}),delete this.schema.oneOf}else{if(this.schema.type&&"any"!==this.schema.type){Array.isArray(this.schema.type)?this.types=this.schema.type:this.types=[this.schema.type]}else{if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var d=this.schema.disallow;"object"==typeof d&&Array.isArray(d)||(d=[d]);var c=[];o(this.types,function(b,a){-1===d.indexOf(a)&&c.push(a)}),this.types=c}}delete this.schema.type}this.display_text=this.getDisplayText(this.types)},build:function(){var d=this,c=this.container;this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.header),this.switcher=this.theme.getSwitcher(this.display_text),c.appendChild(this.switcher),this.switcher.addEventListener("change",function(a){a.preventDefault(),a.stopPropagation(),d.switchEditor(d.display_text.indexOf(this.value)),d.onChange(!0)}),this.editor_holder=document.createElement("div"),c.appendChild(this.editor_holder),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),o(this.types,function(a,g){d.editors[a]=!1;var f;"string"==typeof g?(f=p({},d.schema),f.type=g):(f=p({},d.schema,g),g.required&&Array.isArray(g.required)&&d.schema.required&&Array.isArray(d.schema.required)&&(f.required=d.schema.required.concat(g.required))),d.validators[a]=new m.Validator(d.jsoneditor,f)}),this.switchEditor(0)},onChildEditorChange:function(b){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),this._super()},refreshHeaderText:function(){var b=this.getDisplayText(this.types);o(this.switcher_options,function(a,d){d.textContent=b[a]})},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(e,d){var f=this;o(this.validators,function(a,c){return c.validate(e).length?void 0:(f.type=a,f.switcher.value=f.display_text[a],!1)}),this.switchEditor(this.type),this.editors[this.type].setValue(e,d),this.refreshValue(),f.onChange()},destroy:function(){o(this.editors,function(d,c){c&&c.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()},showValidationErrors:function(d){var c=this;this.oneOf?o(this.editors,function(r,q){if(q){var b=c.path+".oneOf["+r+"]",a=[];o(d,function(f,h){if(h.path.substr(0,b.length)===b){var g=p({},h);g.path=c.path+g.path.substr(b.length),a.push(g)}}),q.showValidationErrors(a)}}):o(this.editors,function(a,e){e&&e.showValidationErrors(d)})}}),m.defaults.editors["enum"]=m.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){this.container;this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this["enum"]=this.schema["enum"],this.selected=0,this.select_options=[],this.html_values=[];for(var d=this,c=0;c<this["enum"].length;c++){this.select_options[c]=this.options.enum_titles[c]||"Value "+(c+1),this.html_values[c]=this.getHTML(this["enum"][c])}this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",function(){d.selected=d.select_options.indexOf(this.value),d.value=d["enum"][d.selected],d.refreshValue(),d.onChange(!0)}),this.value=this["enum"][0],this.refreshValue(),1===this["enum"].length&&(this.switcher.style.display="none")},refreshValue:function(){var d=this;d.selected=-1;var c=JSON.stringify(this.value);return o(this["enum"],function(b,a){return c===JSON.stringify(a)?(d.selected=b,!1):void 0}),d.selected<0?void d.setValue(d["enum"][0]):(this.switcher.value=this.select_options[this.selected],void (this.display_area.innerHTML=this.html_values[this.selected]))},enable:function(){this.always_disabled||(this.switcher.disabled=!1),this._super()},disable:function(){this.switcher.disabled=!0,this._super()},getHTML:function(e){var d=this;if(null===e){return"<em>null</em>"}if("object"==typeof e){var f="";return o(e,function(c,b){var a=d.getHTML(b);Array.isArray(e)||(a="<div><em>"+c+"</em>: "+a+"</div>"),f+="<li>"+a+"</li>"}),f=Array.isArray(e)?"<ol>"+f+"</ol>":"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>"+f+"</ul>"}return"boolean"==typeof e?e?"true":"false":"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},setValue:function(b){this.value!==b&&(this.value=b,this.refreshValue(),this.onChange())},destroy:function(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()}}),m.defaults.editors.select=m.AbstractEditor.extend({setValue:function(e,d){e=this.typecast(e||"");var f=e;this.enum_values.indexOf(f)<0&&(f=this.enum_values[0]),this.value!==f&&(this.input.value=this.enum_options[this.enum_values.indexOf(f)],this.select2&&this.select2.select2("val",this.input.value),this.value=f,this.onChange())},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options){return 3}for(var d=this.getTitle().length,c=0;c<this.enum_options.length;c++){d=Math.max(d,this.enum_options[c].length+4)}return Math.min(12,Math.max(d/7,2))},typecast:function(b){return"boolean"===this.schema.type?!!b:"number"===this.schema.type?1*b:"integer"===this.schema.type?Math.floor(1*b):""+b},getValue:function(){return this.value},preBuild:function(){var d=this;if(this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[],this.schema["enum"]){var c=this.schema.options&&this.schema.options.enum_titles||[];o(this.schema["enum"],function(b,a){d.enum_options[b]=""+a,d.enum_display[b]=""+(c[b]||a),d.enum_values[b]=d.typecast(a)}),this.isRequired()||(d.enum_display.unshift(" "),d.enum_options.unshift("undefined"),d.enum_values.unshift(void 0))}else{if("boolean"===this.schema.type){d.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],d.enum_options=["1",""],d.enum_values=[!0,!1],this.isRequired()||(d.enum_display.unshift(" "),d.enum_options.unshift("undefined"),d.enum_values.unshift(void 0))}else{if(!this.schema.enumSource){throw"'select' editor requires the enum property to be set."}if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource)){for(k=0;k<this.schema.enumSource.length;k++){"string"==typeof this.schema.enumSource[k]?this.enumSource[k]={source:this.schema.enumSource[k]}:Array.isArray(this.schema.enumSource[k])?this.enumSource[k]=this.schema.enumSource[k]:this.enumSource[k]=p({},this.schema.enumSource[k])}}else{this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}]}for(k=0;k<this.enumSource.length;k++){this.enumSource[k].value&&(this.enumSource[k].value=this.jsoneditor.compileTemplate(this.enumSource[k].value,this.template_engine)),this.enumSource[k].title&&(this.enumSource[k].title=this.jsoneditor.compileTemplate(this.enumSource[k].title,this.template_engine)),this.enumSource[k].filter&&(this.enumSource[k].filter=this.jsoneditor.compileTemplate(this.enumSource[k].filter,this.template_engine))}}}},build:function(){var b=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(a){a.preventDefault(),a.stopPropagation(),b.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var d=this.input.value,c=d;-1===this.enum_options.indexOf(d)&&(c=this.enum_options[0]),this.value=this.enum_values[this.enum_options.indexOf(d)],this.onChange(!0)},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&(this.enum_options.length>2||this.enum_options.length&&this.enumSource)){var d=p({},m.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(d=p(d,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(d);var c=this;this.select2.on("select2-blur",function(){c.input.value=c.select2.select2("val"),c.onInputChange()})}else{this.select2=null}},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelect2()},onWatchedFieldChange:function(){var A,z;if(this.enumSource){A=this.getWatchedFieldValues();for(var y=[],x=[],w=0;w<this.enumSource.length;w++){if(Array.isArray(this.enumSource[w])){y=y.concat(this.enumSource[w]),x=x.concat(this.enumSource[w])}else{var v=[];if(v=Array.isArray(this.enumSource[w].source)?this.enumSource[w].source:A[this.enumSource[w].source]){if(this.enumSource[w].slice&&(v=Array.prototype.slice.apply(v,this.enumSource[w].slice)),this.enumSource[w].filter){var u=[];for(z=0;z<v.length;z++){this.enumSource[w].filter({i:z,item:v[z],watched:A})&&u.push(v[z])}v=u}var t=[],s=[];for(z=0;z<v.length;z++){var r=v[z];this.enumSource[w].value?s[z]=this.enumSource[w].value({i:z,item:r}):s[z]=v[z],this.enumSource[w].title?t[z]=this.enumSource[w].title({i:z,item:r}):t[z]=s[z]}y=y.concat(s),x=x.concat(t)}}}var q=this.value;this.theme.setSelectOptions(this.input,y,x),this.enum_options=y,this.enum_display=x,this.enum_values=y,this.select2&&this.select2.select2("destroy"),-1!==y.indexOf(q)?(this.input.value=q,this.value=q):(this.input.value=y[0],this.value=y[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path)),this.setupSelect2()}this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1,this.select2&&this.select2.select2("enable",!0)),this._super()},disable:function(){this.input.disabled=!0,this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),m.defaults.editors.multiselect=m.AbstractEditor.extend({preBuild:function(){this._super(),this.select_options={},this.select_values={};var d=this.jsoneditor.expandRefs(this.schema.items||{}),c=d["enum"]||[];for(this.option_keys=[],k=0;k<c.length;k++){this.sanitize(c[k])===c[k]&&(this.option_keys.push(c[k]+""),this.select_values[c[k]+""]=c[k])}},build:function(){var e,d=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),!this.schema.format&&this.option_keys.length<8||"checkbox"===this.schema.format){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];var f=this.theme.getCheckboxLabel(this.option_keys[e]);this.controls[this.option_keys[e]]=this.theme.getFormControl(f,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description)}else{for(this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys),this.input.multiple=!0,this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++){this.select_options[this.option_keys[e]]=this.input.children[e]}(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.control=this.theme.getFormControl(this.label,this.input,this.description)}this.container.appendChild(this.control),this.control.addEventListener("change",function(b){b.preventDefault(),b.stopPropagation();var a=[];for(e=0;e<d.option_keys.length;e++){(d.select_options[d.option_keys[e]].selected||d.select_options[d.option_keys[e]].checked)&&a.push(d.select_values[d.option_keys[e]])}d.updateValue(a),d.onChange(!0)})},setValue:function(e,d){var f;for(e=e||[],"object"!=typeof e?e=[e]:Array.isArray(e)||(e=[]),f=0;f<e.length;f++){"string"!=typeof e[f]&&(e[f]+="")}for(f in this.select_options){this.select_options.hasOwnProperty(f)&&(this.select_options[f]["select"===this.input_type?"selected":"checked"]=-1!==e.indexOf(f))}this.updateValue(e),this.onChange()},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2){var d=window.jQuery.extend({},m.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(d=p(d,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(d);var c=this;this.select2.on("select2-blur",function(){var b=c.select2.select2("val");c.value=b,c.onChange(!0)})}else{this.select2=null}},onInputChange:function(){this.value=this.input.value,this.onChange(!0)},postBuild:function(){this._super(),this.setupSelect2()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){var d=this.getTitle().length;for(var c in this.select_values){this.select_values.hasOwnProperty(c)&&(d=Math.max(d,(this.select_values[c]+"").length+4))}return Math.min(12,Math.max(d/7,2))},updateValue:function(g){for(var f=!1,r=[],q=0;q<g.length;q++){if(this.select_options[g[q]+""]){var h=this.sanitize(this.select_values[g[q]]);r.push(h),h!==g[q]&&(f=!0)}else{f=!0}}return this.value=r,this.select2&&this.select2.select2("val",this.value),f},sanitize:function(b){return"number"===this.schema.items.type?1*b:"integer"===this.schema.items.type?Math.floor(1*b):""+b},enable:function(){if(!this.always_disabled){if(this.input){this.input.disabled=!1}else{if(this.inputs){for(var b in this.inputs){this.inputs.hasOwnProperty(b)&&(this.inputs[b].disabled=!1)}}}this.select2&&this.select2.select2("enable",!0)}this._super()},disable:function(){if(this.input){this.input.disabled=!0}else{if(this.inputs){for(var b in this.inputs){this.inputs.hasOwnProperty(b)&&(this.inputs[b].disabled=!0)}}}this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),m.defaults.editors.base64=m.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var b=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader){throw"FileReader required for base64 editor"}this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(a){if(a.preventDefault(),a.stopPropagation(),this.files&&this.files.length){var d=new FileReader;d.onload=function(c){b.value=c.target.result,b.refreshPreview(),b.onChange(!0),d=null},d.readAsDataURL(this.files[0])}})}this.preview=this.theme.getFormInputDescription(this.schema.description),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.value&&(this.last_preview=this.value,this.preview.innerHTML="",this.value)){var d=this.value.match(/^data:([^;,]+)[;,]/);if(d&&(d=d[1]),d){if(this.preview.innerHTML="<strong>Type:</strong> "+d+", <strong>Size:</strong> "+Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)+" bytes","image"===d.substr(0,5)){this.preview.innerHTML+="<br>";var c=document.createElement("img");c.style.maxWidth="100%",c.style.maxHeight="100px",c.src=this.value,this.preview.appendChild(c)}}else{this.preview.innerHTML="<em>Invalid data URI</em>"}}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(b){this.value!==b&&(this.value=b,this.input.value=this.value,this.refreshPreview(),this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),m.defaults.editors.upload=m.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var d=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!this.jsoneditor.options.upload){throw"Upload handler required for upload editor"}this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(a){if(a.preventDefault(),a.stopPropagation(),this.files&&this.files.length){var e=new FileReader;e.onload=function(f){d.preview_value=f.target.result,d.refreshPreview(),d.onChange(!0),e=null},e.readAsDataURL(this.files[0])}})}var c=this.schema.description;c||(c=""),this.preview=this.theme.getFormInputDescription(c),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.preview_value&&(this.last_preview=this.preview_value,this.preview.innerHTML="",this.preview_value)){var g=this,f=this.preview_value.match(/^data:([^;,]+)[;,]/);f&&(f=f[1]),f||(f="unknown");var r=this.uploader.files[0];if(this.preview.innerHTML="<strong>Type:</strong> "+f+", <strong>Size:</strong> "+r.size+" bytes","image"===f.substr(0,5)){this.preview.innerHTML+="<br>";var q=document.createElement("img");q.style.maxWidth="100%",q.style.maxHeight="100px",q.src=this.preview_value,this.preview.appendChild(q)}this.preview.innerHTML+="<br>";var h=this.getButton("Upload","upload","Upload");this.preview.appendChild(h),h.addEventListener("click",function(a){a.preventDefault(),h.setAttribute("disabled","disabled"),g.theme.removeInputError(g.uploader),g.theme.getProgressBar&&(g.progressBar=g.theme.getProgressBar(),g.preview.appendChild(g.progressBar)),g.jsoneditor.options.upload(g.path,r,{success:function(c){g.setValue(c),g.parent?g.parent.onChildEditorChange(g):g.jsoneditor.onChange(),g.progressBar&&g.preview.removeChild(g.progressBar),h.removeAttribute("disabled")},failure:function(c){g.theme.addInputError(g.uploader,c),g.progressBar&&g.preview.removeChild(g.progressBar),h.removeAttribute("disabled")},updateProgress:function(c){g.progressBar&&(c?g.theme.updateProgressBar(g.progressBar,c):g.theme.updateProgressBarUnknown(g.progressBar))}})})}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(b){this.value!==b&&(this.value=b,this.input.value=this.value,this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),m.defaults.editors.checkbox=m.AbstractEditor.extend({setValue:function(d,c){this.value=!!d,this.input.checked=this.value,this.onChange()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))},build:function(){var b=this;this.options.compact||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getCheckbox(),this.control=this.theme.getFormControl(this.label,this.input,this.description),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(a){a.preventDefault(),a.stopPropagation(),b.value=this.checked,b.onChange(!0)}),this.container.appendChild(this.control)},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()}});var l=function(){var b=document.documentElement;return b.matches?"matches":b.webkitMatchesSelector?"webkitMatchesSelector":b.mozMatchesSelector?"mozMatchesSelector":b.msMatchesSelector?"msMatchesSelector":b.oMatchesSelector?"oMatchesSelector":void 0}();m.AbstractTheme=j.extend({getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var b=document.createElement("div");return b.style=b.style||{},b.style.cssFloat="right",b.style.marginLeft="10px",b},getModal:function(){var b=document.createElement("div");return b.style.backgroundColor="white",b.style.border="1px solid black",b.style.boxShadow="3px 3px black",b.style.position="absolute",b.style.zIndex="10",b.style.display="none",b},getGridContainer:function(){var b=document.createElement("div");return b},getGridRow:function(){var b=document.createElement("div");return b.className="row",b},getGridColumn:function(){var b=document.createElement("div");return b},setGridColumnSize:function(d,c){},getLink:function(d){var c=document.createElement("a");return c.setAttribute("href","#"),c.appendChild(document.createTextNode(d)),c},disableHeader:function(b){b.style.color="#ccc"},disableLabel:function(b){b.style.color="#ccc"},enableHeader:function(b){b.style.color=""},enableLabel:function(b){b.style.color=""},getFormInputLabel:function(d){var c=document.createElement("label");return c.appendChild(document.createTextNode(d)),c},getCheckboxLabel:function(d){var c=this.getFormInputLabel(d);return c.style.fontWeight="normal",c},getHeader:function(e,d){var f=document.createElement("h3");return"string"==typeof e?f.textContent=e:f.appendChild(e),d&&(f.className+=" required"),f},getCheckbox:function(){var b=this.getFormInputField("checkbox");return b.style.display="inline-block",b.style.width="auto",b},getMultiCheckboxHolder:function(g,f,r){var q=document.createElement("div");f&&(f.style.display="block",q.appendChild(f));for(var h in g){g.hasOwnProperty(h)&&(g[h].style.display="inline-block",g[h].style.marginRight="20px",q.appendChild(g[h]))}return r&&q.appendChild(r),q},getSelectInput:function(d){var c=document.createElement("select");return d&&this.setSelectOptions(c,d),c},getSwitcher:function(d){var c=this.getSelectInput(d);return c.style.backgroundColor="transparent",c.style.display="inline-block",c.style.fontStyle="italic",c.style.fontWeight="normal",c.style.height="auto",c.style.marginBottom=0,c.style.marginLeft="5px",c.style.padding="0 0 0 3px",c.style.width="auto",c},getSwitcherOptions:function(b){return b.getElementsByTagName("option")},setSwitcherOptions:function(e,d,f){this.setSelectOptions(e,d,f)},setSelectOptions:function(g,f,r){r=r||[],g.innerHTML="";for(var q=0;q<f.length;q++){var h=document.createElement("option");h.setAttribute("value",f[q]),h.textContent=r[q]||f[q],g.appendChild(h)}},getTextareaInput:function(){var b=document.createElement("textarea");return b.style=b.style||{},b.style.width="100%",b.style.height="300px",b.style.boxSizing="border-box",b},getRangeInput:function(f,e,h){var g=this.getFormInputField("range");return g.setAttribute("min",f),g.setAttribute("max",e),g.setAttribute("step",h),g},getFormInputField:function(d){var c=document.createElement("input");return c.setAttribute("type",d),c},afterInputReady:function(b){},getFormControl:function(f,e,h){var g=document.createElement("div");return g.className="form-control",f&&g.appendChild(f),"checkbox"===e.type?f.insertBefore(e,f.firstChild):g.appendChild(e),h&&g.appendChild(h),g},getIndentedPanel:function(){var b=document.createElement("div");return b.style=b.style||{},b.style.paddingLeft="10px",b.style.marginLeft="10px",b.style.borderLeft="1px solid #ccc",b},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(d){var c=document.createElement("p");return c.innerHTML=d,c},getCheckboxDescription:function(b){return this.getDescription(b)},getFormInputDescription:function(b){return this.getDescription(b)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("div")},getButton:function(f,e,h){var g=document.createElement("button");return g.type="button",this.setButtonText(g,f,e,h),g},setButtonText:function(f,e,h,g){f.innerHTML="",h&&(f.appendChild(h),f.innerHTML+=" "),f.appendChild(document.createTextNode(e)),g&&f.setAttribute("title",g)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(d){var c=document.createElement("th");return c.textContent=d,c},getTableCell:function(){var b=document.createElement("td");return b},getErrorMessage:function(d){var c=document.createElement("p");return c.style=c.style||{},c.style.color="red",c.appendChild(document.createTextNode(d)),c},addInputError:function(d,c){},removeInputError:function(b){},addTableRowError:function(b){},removeTableRowError:function(b){},getTabHolder:function(){var b=document.createElement("div");return b.innerHTML="<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>",b},applyStyles:function(e,d){e.style=e.style||{};for(var f in d){d.hasOwnProperty(f)&&(e.style[f]=d[f])}},closest:function(d,c){for(;d&&d!==document;){if(!l){return !1}if(d[l](c)){return d}d=d.parentNode}return !1},getTab:function(d){var c=document.createElement("div");return c.appendChild(d),c.style=c.style||{},this.applyStyles(c,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),c},getTabContentHolder:function(b){return b.children[1]},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(b){this.applyStyles(b,{opacity:1,background:"white"})},markTabInactive:function(b){this.applyStyles(b,{opacity:0.5,background:""})},addTab:function(d,c){d.children[0].appendChild(c)},getBlockLink:function(){var b=document.createElement("a");return b.style.display="block",b},getBlockLinkHolder:function(){var b=document.createElement("div");return b},getLinksHolder:function(){var b=document.createElement("div");return b},createMediaLink:function(e,d,f){e.appendChild(d),f.style.width="100%",e.appendChild(f)},createImageLink:function(e,d,f){e.appendChild(d),d.appendChild(f)}}),m.defaults.themes.bootstrap2=m.AbstractTheme.extend({getRangeInput:function(e,d,f){return this._super(e,d,f)},getGridContainer:function(){var b=document.createElement("div");return b.className="container-fluid",b},getGridRow:function(){var b=document.createElement("div");return b.className="row-fluid",b},getFormInputLabel:function(e,d){var f=this._super(e);return f.style.display="inline-block",f.style.fontWeight="bold",d&&(f.className+=" required"),f},setGridColumnSize:function(d,c){d.className="span"+c},getSelectInput:function(d){var c=this._super(d);return c.style.width="auto",c.style.maxWidth="98%",c},getFormInputField:function(d){var c=this._super(d);return c.style.width="98%",c},afterInputReady:function(b){b.controlgroup||(b.controlgroup=this.closest(b,".control-group"),b.controls=this.closest(b,".controls"),this.closest(b,".compact")&&(b.controlgroup.className=b.controlgroup.className.replace(/control-group/g,"").replace(/[ ]{2,}/g," "),b.controls.className=b.controlgroup.className.replace(/controls/g,"").replace(/[ ]{2,}/g," "),b.style.marginBottom=0))},getIndentedPanel:function(){var b=document.createElement("div");return b.className="well well-small",b},getFormInputDescription:function(d){var c=document.createElement("p");return c.className="help-inline",c.textContent=d,c},getFormControl:function(g,f,r){var q=document.createElement("div");q.className="control-group";var h=document.createElement("div");return h.className="controls",g&&"checkbox"===f.getAttribute("type")?(q.appendChild(h),g.className+=" checkbox",g.appendChild(f),h.appendChild(g),h.style.height="30px"):(g&&(g.className+=" control-label",q.appendChild(g)),h.appendChild(f),q.appendChild(h)),r&&h.appendChild(r),q},getHeaderButtonHolder:function(){var b=this.getButtonHolder();return b.style.marginLeft="10px",b},getButtonHolder:function(){var b=document.createElement("div");return b.className="btn-group",b},getButton:function(f,e,h){var g=this._super(f,e,h);return g.className+=" btn btn-default",g},getTable:function(){var b=document.createElement("table");return b.className="table table-bordered",b.style.width="auto",b.style.maxWidth="none",b},addInputError:function(d,c){d.controlgroup&&d.controls&&(d.controlgroup.className+=" error",d.errmsg?d.errmsg.style.display="":(d.errmsg=document.createElement("p"),d.errmsg.className="help-block errormsg",d.controls.appendChild(d.errmsg)),d.errmsg.textContent=c)},removeInputError:function(b){b.errmsg&&(b.errmsg.style.display="none",b.controlgroup.className=b.controlgroup.className.replace(/\s?error/g,""))},getTabHolder:function(){var b=document.createElement("div");return b.className="tabbable tabs-left",b.innerHTML="<ul class='nav nav-tabs span2' style='margin-right: 0;'></ul><div class='tab-content span10' style='overflow:visible;'></div>",b},getTab:function(e){var d=document.createElement("li"),f=document.createElement("a");return f.setAttribute("href","#"),f.appendChild(e),d.appendChild(f),d},getTabContentHolder:function(b){return b.children[1]},getTabContent:function(){var b=document.createElement("div");return b.className="tab-pane active",b},markTabActive:function(b){b.className+=" active"},markTabInactive:function(b){b.className=b.className.replace(/\s?active/g,"")},addTab:function(d,c){d.children[0].appendChild(c)},getProgressBar:function(){var d=document.createElement("div");d.className="progress";var c=document.createElement("div");return c.className="bar",c.style.width="0%",d.appendChild(c),d},updateProgressBar:function(d,c){d&&(d.firstChild.style.width=c+"%")},updateProgressBarUnknown:function(b){b&&(b.className="progress progress-striped active",b.firstChild.style.width="100%")}}),m.defaults.themes.bootstrap3=m.AbstractTheme.extend({getSelectInput:function(d){var c=this._super(d);return c.className+="form-control",c},setGridColumnSize:function(d,c){d.className="col-md-"+c},afterInputReady:function(b){b.controlgroup||(b.controlgroup=this.closest(b,".form-group"),this.closest(b,".compact")&&(b.controlgroup.style.marginBottom=0))},getTextareaInput:function(){var b=document.createElement("textarea");return b.className="form-control",b},getRangeInput:function(e,d,f){return this._super(e,d,f)},getFormInputField:function(d){var c=this._super(d);return"checkbox"!==d&&(c.className+="form-control"),c},getFormControl:function(f,e,h){var g=document.createElement("div");return f&&"checkbox"===e.type?(g.className+=" checkbox",f.appendChild(e),f.style.fontSize="14px",g.style.marginTop="0",g.appendChild(f),e.style.position="relative",e.style.cssFloat="left"):(g.className+=" form-group",f&&(f.className+=" control-label",g.appendChild(f)),g.appendChild(e)),h&&g.appendChild(h),g},getIndentedPanel:function(){var b=document.createElement("div");return b.className="well well-sm",b},getFormInputDescription:function(d){var c=document.createElement("p");return c.className="help-block",c.innerHTML=d,c},getHeaderButtonHolder:function(){var b=this.getButtonHolder();return b.style.marginLeft="10px",b},getButtonHolder:function(){var b=document.createElement("div");return b.className="btn-group",b},getButton:function(f,e,h){var g=this._super(f,e,h);return g.className+="btn btn-default",g},getTable:function(){var b=document.createElement("table");return b.className="table table-bordered",b.style.width="auto",b.style.maxWidth="none",b},addInputError:function(d,c){d.controlgroup&&(d.controlgroup.className+=" has-error",d.errmsg?d.errmsg.style.display="":(d.errmsg=document.createElement("p"),d.errmsg.className="help-block errormsg",d.controlgroup.appendChild(d.errmsg)),d.errmsg.textContent=c)},removeInputError:function(b){b.errmsg&&(b.errmsg.style.display="none",b.controlgroup.className=b.controlgroup.className.replace(/\s?has-error/g,""))},getTabHolder:function(){var b=document.createElement("div");return b.innerHTML="<div class='tabs list-group col-md-2'></div><div class='col-md-10'></div>",b.className="rows",b},getTab:function(d){var c=document.createElement("a");return c.className="list-group-item",c.setAttribute("href","#"),c.appendChild(d),c},markTabActive:function(b){b.className+=" active"},markTabInactive:function(b){b.className=b.className.replace(/\s?active/g,"")},getProgressBar:function(){var g=0,f=100,r=0,q=document.createElement("div");q.className="progress";var h=document.createElement("div");return h.className="progress-bar",h.setAttribute("role","progressbar"),h.setAttribute("aria-valuenow",r),h.setAttribute("aria-valuemin",g),h.setAttribute("aria-valuenax",f),h.innerHTML=r+"%",q.appendChild(h),q},updateProgressBar:function(f,e){if(f){var h=f.firstChild,g=e+"%";h.setAttribute("aria-valuenow",e),h.style.width=g,h.innerHTML=g}},updateProgressBarUnknown:function(d){if(d){var c=d.firstChild;d.className="progress progress-striped active",c.removeAttribute("aria-valuenow"),c.style.width="100%",c.innerHTML=""}}}),m.defaults.themes.foundation=m.AbstractTheme.extend({getChildEditorHolder:function(){var b=document.createElement("div");return b.style.marginBottom="15px",b},getSelectInput:function(d){var c=this._super(d);return c.style.minWidth="none",c.style.padding="5px",c.style.marginTop="3px",c},getSwitcher:function(d){var c=this._super(d);return c.style.paddingRight="8px",c},afterInputReady:function(b){this.closest(b,".compact")&&(b.style.marginBottom=0),b.group=this.closest(b,".form-control")},getFormInputLabel:function(e,d){var f=this._super(e);return f.style.display="inline-block",d&&(f.className+=" required"),f},getFormInputField:function(d){var c=this._super(d);return c.style.width="100%",c.style.marginBottom="checkbox"===d?"0":"12px",c},getFormInputDescription:function(d){var c=document.createElement("p");return c.textContent=d,c.style.marginTop="-10px",c.style.fontStyle="italic",c},getIndentedPanel:function(){var b=document.createElement("div");return b.className="panel",b},getHeaderButtonHolder:function(){var b=this.getButtonHolder();return b.style.display="inline-block",b.style.marginLeft="10px",b.style.verticalAlign="middle",b},getButtonHolder:function(){var b=document.createElement("div");return b.className="button-group",b},getButton:function(f,e,h){var g=this._super(f,e,h);return g.className+=" small button",g},addInputError:function(d,c){d.group&&(d.group.className+=" error",d.errmsg?d.errmsg.style.display="":(d.insertAdjacentHTML("afterend",'<small class="error"></small>'),d.errmsg=d.parentNode.getElementsByClassName("error")[0]),d.errmsg.textContent=c)},removeInputError:function(b){b.errmsg&&(b.group.className=b.group.className.replace(/ error/g,""),b.errmsg.style.display="none")},getProgressBar:function(){var d=document.createElement("div");d.className="progress";var c=document.createElement("span");return c.className="meter",c.style.width="0%",d.appendChild(c),d},updateProgressBar:function(d,c){d&&(d.firstChild.style.width=c+"%")},updateProgressBarUnknown:function(b){b&&(b.firstChild.style.width="100%")}}),m.defaults.themes.foundation3=m.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var b=this._super();return b.style.fontSize=".6em",b},getFormInputLabel:function(e,d){var f=this._super(e);return f.style.fontWeight="bold",d&&(f.className+=" required"),f},getTabHolder:function(){var b=document.createElement("div");return b.className="row",b.innerHTML="<dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div>",b},setGridColumnSize:function(e,d){var f=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"];e.className="columns "+f[d]},getTab:function(e){var d=document.createElement("dd"),f=document.createElement("a");return f.setAttribute("href","#"),f.appendChild(e),d.appendChild(f),d},getTabContentHolder:function(b){return b.children[1]},getTabContent:function(){var b=document.createElement("div");return b.className="content active",b.style.paddingLeft="5px",b},markTabActive:function(b){b.className+=" active"},markTabInactive:function(b){b.className=b.className.replace(/\s*active/g,"")},addTab:function(d,c){d.children[0].appendChild(c)}}),m.defaults.themes.foundation4=m.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var b=this._super();return b.style.fontSize=".6em",b},setGridColumnSize:function(d,c){d.className="columns large-"+c},getFormInputDescription:function(d){var c=this._super(d);return c.style.fontSize=".8rem",c},getFormInputLabel:function(e,d){var f=this._super(e);return f.style.fontWeight="bold",d&&(f.className+=" required"),f}}),m.defaults.themes.foundation5=m.defaults.themes.foundation.extend({getFormInputDescription:function(d){var c=this._super(d);return c.style.fontSize=".8rem",c},setGridColumnSize:function(d,c){d.className="columns medium-"+c},getButton:function(f,e,h){var g=this._super(f,e,h);return g.className=g.className.replace(/\s*small/g,"")+" tiny",g},getTabHolder:function(){var b=document.createElement("div");return b.innerHTML="<dl class='tabs vertical'></dl><div class='tabs-content vertical'></div>",b},getTab:function(e){var d=document.createElement("dd"),f=document.createElement("a");return f.setAttribute("href","#"),f.appendChild(e),d.appendChild(f),d},getTabContentHolder:function(b){return b.children[1]},getTabContent:function(){var b=document.createElement("div");return b.className="content active",b.style.paddingLeft="5px",b},markTabActive:function(b){b.className+=" active"},markTabInactive:function(b){b.className=b.className.replace(/\s*active/g,"")},addTab:function(d,c){d.children[0].appendChild(c)}}),m.defaults.themes.html=m.AbstractTheme.extend({getFormInputLabel:function(e,d){var f=this._super(e);return f.style.display="block",f.style.marginBottom="3px",f.style.fontWeight="bold",d&&(f.className+=" required"),f},getFormInputDescription:function(d){var c=this._super(d);return c.style.fontSize=".8em",c.style.margin=0,c.style.display="inline-block",c.style.fontStyle="italic",c},getIndentedPanel:function(){var b=this._super();return b.style.border="1px solid #ddd",b.style.padding="5px",b.style.margin="5px",b.style.borderRadius="3px",b},getChildEditorHolder:function(){var b=this._super();return b.style.marginBottom="8px",b},getHeaderButtonHolder:function(){var b=this.getButtonHolder();return b.style.display="inline-block",b.style.marginLeft="10px",b.style.fontSize=".8em",b.style.verticalAlign="middle",b},getTable:function(){var b=this._super();return b.style.borderBottom="1px solid #ccc",b.style.marginBottom="5px",b},addInputError:function(e,d){if(e.style.borderColor="red",e.errmsg){e.errmsg.style.display="block"}else{var f=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),e.errmsg.style=e.errmsg.style||{},e.errmsg.style.color="red",f.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(d))},removeInputError:function(b){b.style.borderColor="",b.errmsg&&(b.errmsg.style.display="none")},getProgressBar:function(){var e=100,d=0,f=document.createElement("progress");return f.setAttribute("max",e),f.setAttribute("value",d),f},updateProgressBar:function(d,c){d&&d.setAttribute("value",c)},updateProgressBarUnknown:function(b){b&&b.removeAttribute("value")}}),m.defaults.themes.jqueryui=m.AbstractTheme.extend({getTable:function(){var b=this._super();return b.setAttribute("cellpadding",5),b.setAttribute("cellspacing",0),b},getTableHeaderCell:function(d){var c=this._super(d);return c.className="ui-state-active",c.style.fontWeight="bold",c},getTableCell:function(){var b=this._super();return b.className="ui-widget-content",b},getHeaderButtonHolder:function(){var b=this.getButtonHolder();return b.style.marginLeft="10px",b.style.fontSize=".6em",b.style.display="inline-block",b},getFormInputDescription:function(d){var c=this.getDescription(d);return c.style.marginLeft="10px",c.style.display="inline-block",c},getFormControl:function(f,e,h){var g=this._super(f,e,h);return"checkbox"===e.type?(g.style.lineHeight="25px",g.style.padding="3px 0"):g.style.padding="4px 0 8px 0",g},getDescription:function(d){var c=document.createElement("span");return c.style.fontSize=".8em",c.style.fontStyle="italic",c.textContent=d,c},getButtonHolder:function(){var b=document.createElement("div");return b.className="ui-buttonset",b.style.fontSize=".7em",b},getFormInputLabel:function(e,d){var f=document.createElement("label");return f.style.fontWeight="bold",f.style.display="block",d&&(f.className+=" required"),f.textContent=e,f},getButton:function(g,f,r){var q=document.createElement("button");q.className="ui-button ui-widget ui-state-default ui-corner-all",f&&!g?(q.className+=" ui-button-icon-only",f.className+=" ui-button-icon-primary ui-icon-primary",q.appendChild(f)):f?(q.className+=" ui-button-text-icon-primary",f.className+=" ui-button-icon-primary ui-icon-primary",q.appendChild(f)):q.className+=" ui-button-text-only";var h=document.createElement("span");return h.className="ui-button-text",h.textContent=g||r||".",q.appendChild(h),q.setAttribute("title",r),q},setButtonText:function(g,f,r,q){g.innerHTML="",g.className="ui-button ui-widget ui-state-default ui-corner-all",r&&!f?(g.className+=" ui-button-icon-only",r.className+=" ui-button-icon-primary ui-icon-primary",g.appendChild(r)):r?(g.className+=" ui-button-text-icon-primary",r.className+=" ui-button-icon-primary ui-icon-primary",g.appendChild(r)):g.className+=" ui-button-text-only";var h=document.createElement("span");h.className="ui-button-text",h.textContent=f||q||".",g.appendChild(h),g.setAttribute("title",q)},getIndentedPanel:function(){var b=document.createElement("div");return b.className="ui-widget-content ui-corner-all",b.style.padding="1em 1.4em",b.style.marginBottom="20px",b},afterInputReady:function(b){b.controls||(b.controls=this.closest(b,".form-control"))},addInputError:function(d,c){d.controls&&(d.errmsg?d.errmsg.style.display="":(d.errmsg=document.createElement("div"),d.errmsg.className="ui-state-error",d.controls.appendChild(d.errmsg)),d.errmsg.textContent=c)},removeInputError:function(b){b.errmsg&&(b.errmsg.style.display="none")},markTabActive:function(b){b.className=b.className.replace(/\s*ui-widget-header/g,"")+" ui-state-active"},markTabInactive:function(b){b.className=b.className.replace(/\s*ui-state-active/g,"")+" ui-widget-header"}}),m.AbstractIconLib=j.extend({mapping:{collapse:"",expand:"","delete":"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(b){return this.mapping[b]?this.icon_prefix+this.mapping[b]:null},getIcon:function(e){var d=this.getIconClass(e);if(!d){return null}var f=document.createElement("i");return f.className=d,f}}),m.defaults.iconlibs.bootstrap2=m.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-up","delete":"trash",edit:"pencil",add:"plus",cancel:"ban-circle",save:"ok",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),m.defaults.iconlibs.bootstrap3=m.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"glyphicon glyphicon-"}),m.defaults.iconlibs.fontawesome3=m.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"ban-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),m.defaults.iconlibs.fontawesome4=m.AbstractIconLib.extend({mapping:{collapse:"caret-square-o-down",expand:"caret-square-o-right","delete":"times",edit:"pencil",add:"plus",cancel:"ban",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fa fa-"}),m.defaults.iconlibs.foundation2=m.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"remove",edit:"edit",add:"add-doc",cancel:"error",save:"checkmark",moveup:"up-arrow",movedown:"down-arrow"},icon_prefix:"foundicon-"}),m.defaults.iconlibs.foundation3=m.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"x",edit:"pencil",add:"page-add",cancel:"x-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fi-"}),m.defaults.iconlibs.jqueryui=m.AbstractIconLib.extend({mapping:{collapse:"triangle-1-s",expand:"triangle-1-e","delete":"trash",edit:"pencil",add:"plusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",movedown:"arrowthick-1-s"},icon_prefix:"ui-icon ui-icon-"}),m.defaults.templates["default"]=function(){return{compile:function(h){var g=h.match(/{{\s*([a-zA-Z0-9\-_ \.]+)\s*}}/g),t=g&&g.length;if(!t){return function(){return h}}for(var s=[],r=function(b){var w,v=g[b].replace(/[{}]+/g,"").trim().split("."),u=v.length;if(u>1){var d;w=function(a){for(d=a,b=0;u>b&&(d=d[v[b]],d);b++){}return d}}else{v=v[0],w=function(c){return c[v]}}s.push({s:g[b],r:w})},q=0;t>q;q++){r(q)}return function(a){var d,c=h+"";for(q=0;t>q;q++){d=s[q],c=c.replace(d.s,d.r(a))}return c}}}},m.defaults.templates.ejs=function(){return window.EJS?{compile:function(d){var c=new window.EJS({text:d});return function(b){return c.render(b)}}}:!1},m.defaults.templates.handlebars=function(){return window.Handlebars},m.defaults.templates.hogan=function(){return window.Hogan?{compile:function(d){var c=window.Hogan.compile(d);return function(b){return c.render(b)}}}:!1},m.defaults.templates.markup=function(){return window.Mark&&window.Mark.up?{compile:function(b){return function(a){return window.Mark.up(b,a)}}}:!1},m.defaults.templates.mustache=function(){return window.Mustache?{compile:function(b){return function(a){return window.Mustache.render(b,a)}}}:!1},m.defaults.templates.swig=function(){return window.swig},m.defaults.templates.underscore=function(){return window._?{compile:function(b){return function(a){return window._.template(b,a)}}}:!1},m.defaults.theme="html",m.defaults.template="default",m.defaults.options={},m.defaults.translate=function(g,f){var r=m.defaults.languages[m.defaults.language];if(!r){throw"Unknown language "+m.defaults.language}var q=r[g]||m.defaults.languages[m.defaults.default_language][g];if("undefined"==typeof q){throw"Unknown translate string "+g}if(f){for(var h=0;h<f.length;h++){q=q.replace(new RegExp("\\{\\{"+h+"}}","g"),f[h])}}return q},m.defaults.default_language="en",m.defaults.language=m.defaults.default_language,m.defaults.languages.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the provided pattern",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}"},m.plugins={ace:{theme:""},epiceditor:{},sceditor:{},select2:{}};for(var k in m.defaults.editors){m.defaults.editors.hasOwnProperty(k)&&(m.defaults.editors[k].options=m.defaults.editors.options||{})}m.defaults.resolvers.unshift(function(b){return"string"!=typeof b.type?"multiple":void 0}),m.defaults.resolvers.unshift(function(b){return !b.type&&b.properties?"object":void 0}),m.defaults.resolvers.unshift(function(b){return"string"==typeof b.type?b.type:void 0}),m.defaults.resolvers.unshift(function(b){return"boolean"===b.type?"checkbox"===b.format||b.options&&b.options.checkbox?"checkbox":"select":void 0}),m.defaults.resolvers.unshift(function(b){return"any"===b.type?"multiple":void 0}),m.defaults.resolvers.unshift(function(b){return"string"===b.type&&b.media&&"base64"===b.media.binaryEncoding?"base64":void 0}),m.defaults.resolvers.unshift(function(b){return"string"===b.type&&"url"===b.format&&b.options&&b.options.upload===!0&&window.FileReader?"upload":void 0}),m.defaults.resolvers.unshift(function(b){return"array"==b.type&&"table"==b.format?"table":void 0}),m.defaults.resolvers.unshift(function(b){return b.enumSource?"select":void 0}),m.defaults.resolvers.unshift(function(b){if(b["enum"]){if("array"===b.type||"object"===b.type){return"enum"}if("number"===b.type||"integer"===b.type||"string"===b.type){return"select"}}}),m.defaults.resolvers.unshift(function(b){return"array"===b.type&&b.items&&!Array.isArray(b.items)&&b.uniqueItems&&b.items["enum"]&&["string","number","integer"].indexOf(b.items.type)>=0?"multiselect":void 0}),m.defaults.resolvers.unshift(function(b){return b.oneOf?"multiple":void 0}),function(){if(window.jQuery||window.Zepto){var b=window.jQuery||window.Zepto;b.jsoneditor=m.defaults,b.fn.jsoneditor=function(e){var d=this,f=this.data("jsoneditor");if("value"===e){if(!f){throw"Must initialize jsoneditor before getting/setting the value"}if(!(arguments.length>1)){return f.getValue()}f.setValue(arguments[1])}else{if("validate"===e){if(!f){throw"Must initialize jsoneditor before validating"}return arguments.length>1?f.validate(arguments[1]):f.validate()}"destroy"===e?f&&(f.destroy(),this.data("jsoneditor",null)):(f&&f.destroy(),f=new m(this.get(0),e),this.data("jsoneditor",f),f.on("change",function(){d.trigger("change")}),f.on("ready",function(){d.trigger("ready")}))}return this}}}(),window.JSONEditor=m}();