/*!
 * Bootstrap's Gruntfile
 * http://getbootstrap.com
 * Copyright 2013-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
module.exports=function(e){e.util.linefeed="\n";RegExp.quote=function(m){return m.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")};var h=require("fs");var l=require("path");var c=require("./grunt/bs-glyphicons-data-generator.js");var a=require("./grunt/bs-lessdoc-parser.js");var i=function(){var m=l.join(__dirname,"less/variables.less");var n=h.readFileSync(m,{encoding:"utf8"});var o=new a(n);return{sections:o.parseFile()}};var f=require("./grunt/bs-raw-files-generator.js");var b=require("./grunt/bs-commonjs-generator.js");var d=e.file.readJSON("./grunt/configBridge.json",{encoding:"utf8"});Object.keys(d.paths).forEach(function(m){d.paths[m].forEach(function(p,o,n){n[o]=l.join("./docs/assets",p)})});e.initConfig({pkg:e.file.readJSON("package.json"),banner:'/*!\n * Bootstrap v<%= pkg.version %> (<%= pkg.homepage %>)\n * Copyright 2011-<%= grunt.template.today("yyyy") %> <%= pkg.author %>\n * Licensed under the <%= pkg.license %> license\n */\n',jqueryCheck:d.config.jqueryCheck.join("\n"),jqueryVersionCheck:d.config.jqueryVersionCheck.join("\n"),clean:{dist:"dist",docs:"docs/dist"},jshint:{options:{jshintrc:"js/.jshintrc"},grunt:{options:{jshintrc:"grunt/.jshintrc"},src:["Gruntfile.js","package.js","grunt/*.js"]},core:{src:"js/*.js"},test:{options:{jshintrc:"js/tests/unit/.jshintrc"},src:"js/tests/unit/*.js"},assets:{src:["docs/assets/js/src/*.js","docs/assets/js/*.js","!docs/assets/js/*.min.js"]}},jscs:{options:{config:"js/.jscsrc"},grunt:{src:"<%= jshint.grunt.src %>"},core:{src:"<%= jshint.core.src %>"},test:{src:"<%= jshint.test.src %>"},assets:{options:{requireCamelCaseOrUpperCaseIdentifiers:null},src:"<%= jshint.assets.src %>"}},concat:{options:{banner:"<%= banner %>\n<%= jqueryCheck %>\n<%= jqueryVersionCheck %>",stripBanners:false},bootstrap:{src:["js/transition.js","js/alert.js","js/button.js","js/carousel.js","js/collapse.js","js/dropdown.js","js/modal.js","js/tooltip.js","js/popover.js","js/scrollspy.js","js/tab.js","js/affix.js"],dest:"dist/js/<%= pkg.name %>.js"}},uglify:{options:{compress:{warnings:false},mangle:true,preserveComments:/^!|@preserve|@license|@cc_on/i},core:{src:"<%= concat.bootstrap.dest %>",dest:"dist/js/<%= pkg.name %>.min.js"},customize:{src:d.paths.customizerJs,dest:"docs/assets/js/customize.min.js"},docsJs:{src:d.paths.docsJs,dest:"docs/assets/js/docs.min.js"}},qunit:{options:{inject:"js/tests/unit/phantom.js"},files:"js/tests/index.html"},less:{compileCore:{options:{strictMath:true,sourceMap:true,outputSourceFiles:true,sourceMapURL:"<%= pkg.name %>.css.map",sourceMapFilename:"dist/css/<%= pkg.name %>.css.map"},src:"less/bootstrap.less",dest:"dist/css/<%= pkg.name %>.css"},compileTheme:{options:{strictMath:true,sourceMap:true,outputSourceFiles:true,sourceMapURL:"<%= pkg.name %>-theme.css.map",sourceMapFilename:"dist/css/<%= pkg.name %>-theme.css.map"},src:"less/theme.less",dest:"dist/css/<%= pkg.name %>-theme.css"}},autoprefixer:{options:{browsers:d.config.autoprefixerBrowsers},core:{options:{map:true},src:"dist/css/<%= pkg.name %>.css"},theme:{options:{map:true},src:"dist/css/<%= pkg.name %>-theme.css"},docs:{src:["docs/assets/css/src/docs.css"]},examples:{expand:true,cwd:"docs/examples/",src:["**/*.css"],dest:"docs/examples/"}},csslint:{options:{csslintrc:"less/.csslintrc"},dist:["dist/css/bootstrap.css","dist/css/bootstrap-theme.css"],examples:["docs/examples/**/*.css"],docs:{options:{ids:false,"overqualified-elements":false},src:"docs/assets/css/src/docs.css"}},cssmin:{options:{compatibility:"ie8",keepSpecialComments:"*",sourceMap:true,sourceMapInlineSources:true,advanced:false},minifyCore:{src:"dist/css/<%= pkg.name %>.css",dest:"dist/css/<%= pkg.name %>.min.css"},minifyTheme:{src:"dist/css/<%= pkg.name %>-theme.css",dest:"dist/css/<%= pkg.name %>-theme.min.css"},docs:{src:["docs/assets/css/ie10-viewport-bug-workaround.css","docs/assets/css/src/pygments-manni.css","docs/assets/css/src/docs.css"],dest:"docs/assets/css/docs.min.css"}},csscomb:{options:{config:"less/.csscomb.json"},dist:{expand:true,cwd:"dist/css/",src:["*.css","!*.min.css"],dest:"dist/css/"},examples:{expand:true,cwd:"docs/examples/",src:"**/*.css",dest:"docs/examples/"},docs:{src:"docs/assets/css/src/docs.css",dest:"docs/assets/css/src/docs.css"}},copy:{fonts:{expand:true,src:"fonts/**",dest:"dist/"},docs:{expand:true,cwd:"dist/",src:["**/*"],dest:"docs/dist/"}},connect:{server:{options:{port:3000,base:"."}}},jekyll:{options:{bundleExec:true,config:"_config.yml",incremental:false},docs:{},github:{options:{raw:"github: true"}}},htmlmin:{dist:{options:{collapseBooleanAttributes:true,collapseWhitespace:true,conservativeCollapse:true,decodeEntities:false,minifyCSS:{compatibility:"ie8",keepSpecialComments:0},minifyJS:true,minifyURLs:false,processConditionalComments:true,removeAttributeQuotes:true,removeComments:true,removeOptionalAttributes:true,removeOptionalTags:true,removeRedundantAttributes:true,removeScriptTypeAttributes:true,removeStyleLinkTypeAttributes:true,removeTagWhitespace:false,sortAttributes:true,sortClassName:true},expand:true,cwd:"_gh_pages",dest:"_gh_pages",src:["**/*.html","!examples/**/*.html"]}},pug:{options:{pretty:true,data:i},customizerVars:{src:"docs/_pug/customizer-variables.pug",dest:"docs/_includes/customizer-variables.html"},customizerNav:{src:"docs/_pug/customizer-nav.pug",dest:"docs/_includes/nav/customize.html"}},htmllint:{options:{ignore:['Attribute "autocomplete" not allowed on element "button" at this point.','Attribute "autocomplete" is only allowed when the input type is "color", "date", "datetime", "datetime-local", "email", "hidden", "month", "number", "password", "range", "search", "tel", "text", "time", "url", or "week".','Element "img" is missing required attribute "src".']},src:"_gh_pages/**/*.html"},watch:{src:{files:"<%= jshint.core.src %>",tasks:["jshint:core","qunit","concat"]},test:{files:"<%= jshint.test.src %>",tasks:["jshint:test","qunit"]},less:{files:"less/**/*.less",tasks:"less"}},"saucelabs-qunit":{all:{options:{build:process.env.TRAVIS_JOB_ID,throttled:10,maxRetries:3,maxPollRetries:4,urls:["http://127.0.0.1:3000/js/tests/index.html?hidepassed"],browsers:e.file.readYAML("grunt/sauce_browsers.yml")}}},exec:{npmUpdate:{command:"npm update"}},compress:{main:{options:{archive:"bootstrap-<%= pkg.version %>-dist.zip",mode:"zip",level:9,pretty:true},files:[{expand:true,cwd:"dist/",src:["**"],dest:"bootstrap-<%= pkg.version %>-dist"}]}}});require("load-grunt-tasks")(e,{scope:"devDependencies"});require("time-grunt")(e);e.registerTask("validate-html",["jekyll:docs","htmllint"]);var g=function(m){return !process.env.TWBS_TEST||process.env.TWBS_TEST===m};var j=function(m){return m===undefined||m!=="0"};var k=[];if(g("core")&&process.env.TRAVIS_REPO_SLUG!=="twbs-savage/bootstrap"){k=k.concat(["dist-css","dist-js","csslint:dist","test-js","docs"])}if(g("validate-html")&&j(process.env.TWBS_DO_VALIDATOR)){k.push("validate-html")}if(typeof process.env.SAUCE_ACCESS_KEY!=="undefined"&&g("sauce-js-unit")&&j(process.env.TWBS_DO_SAUCE)){k.push("connect");k.push("saucelabs-qunit")}e.registerTask("test",k);e.registerTask("test-js",["jshint:core","jshint:test","jshint:grunt","jscs:core","jscs:test","jscs:grunt","qunit"]);e.registerTask("dist-js",["concat","uglify:core","commonjs"]);e.registerTask("less-compile",["less:compileCore","less:compileTheme"]);e.registerTask("dist-css",["less-compile","autoprefixer:core","autoprefixer:theme","csscomb:dist","cssmin:minifyCore","cssmin:minifyTheme"]);e.registerTask("dist",["clean:dist","dist-css","copy:fonts","dist-js"]);e.registerTask("default",["clean:dist","copy:fonts","test"]);e.registerTask("build-glyphicons-data",function(){c.call(this,e)});e.registerTask("build-customizer",["build-customizer-html","build-raw-files"]);e.registerTask("build-customizer-html","pug");e.registerTask("build-raw-files","Add scripts/less files to customizer.",function(){var m=e.template.process("<%= banner %>");f(e,m)});e.registerTask("commonjs","Generate CommonJS entrypoint module in dist dir.",function(){var n=e.config.get("concat.bootstrap.src");var m="dist/js/npm.js";b(e,n,m)});e.registerTask("docs-css",["autoprefixer:docs","autoprefixer:examples","csscomb:docs","csscomb:examples","cssmin:docs"]);e.registerTask("lint-docs-css",["csslint:docs","csslint:examples"]);e.registerTask("docs-js",["uglify:docsJs","uglify:customize"]);e.registerTask("lint-docs-js",["jshint:assets","jscs:assets"]);e.registerTask("docs",["docs-css","lint-docs-css","docs-js","lint-docs-js","clean:docs","copy:docs","build-glyphicons-data","build-customizer"]);e.registerTask("docs-github",["jekyll:github","htmlmin"]);e.registerTask("prep-release",["dist","docs","docs-github","compress"])};