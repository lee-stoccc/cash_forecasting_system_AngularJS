(function(){angular.module("devplatformApp").controller("NoForecastPlanController",a);a.$inject=["SysDictService","ForecastPlanService","ngDialog","$state","$scope","$timeout","PublicService"];function a(h,c,i,f,b,e,d){b.formParam={};b.tablesConfig={showCheckBox:true,tableTitles:[{title:"forecastPlan.termNo",filed:"termNo",type:"text",width:20},{title:"forecastPlan.branchNo",filed:"branchNo",type:"text",width:15},{title:"forecastPlan.bankName",filed:"bankName",type:"text",width:15},{title:"forecastPlan.regionName",filed:"regionName",type:"text",width:15},{title:"forecastPlan.lastCash",filed:"lastCash",type:"text",width:10},{title:"forecastPlan.replenishDate",filed:"replenishDate",type:"text",width:15},{title:"forecastPlan.planCash",filed:"planCash",type:"text",width:10}],url:"api/forecastPlan/page",formParams:{termNo:b.formParam.termNo,bankId:b.formParam.bankId,termType:b.formParam.termType,cusRegionId:b.formParam.cusRegionId,replenishDate:b.formParam.replenishDate,forecastStatus:"2"}};b.loadNoPlanAll=function(){b.formParam.bankId=b.bankIdStr;b.formParam.forecastStatus="2";b.refreshTableList(b.formParam)};b.$emit("noPlanLoad",b.loadNoPlanAll);b.addForecastPlan=function(){b.choseArr=b.getCheckValues().check;var j=g(b.choseArr);c.updatePlanTerm(j).then(function(k){if(k.statusCode==="0000"){b.loadAll()}d.openDialog(k.msgCode)})};function g(l){var k="";for(var j=0;j<l.length;j++){k+=","+l[j]}k=k.substring(1);return k}}})();