(function(){angular.module("devplatformApp").controller("EventManagementController",a);a.$inject=["$rootScope","PublicService","EventManagementService","ngDialog","$state","$scope","$window","FcPublicService"];function a(b,e,i,h,f,d,g,c){d.formParam={};d.choseArr=[];d.formParam.startDate=new Date();d.formParam.endDate=new Date();d.datePickerOpenStatus={};d.dateOptions={showWeeks:false,formatDayHeader:"EEE"};d.tablesConfig={showCheckBox:true,checkOneAction:"checkOneAction",checkAllAction:"checkAllAction",tableTitles:[{title:"eventManagement.eventType",filed:"eventName",type:"text",width:20,tipTitle:"Event Type"},{title:"eventManagement.eventName",filed:"eventCategory",type:"text",width:20,tipTitle:"Event Name"},{title:"eventManagement.region",filed:"region",type:"text",width:20,tipTitle:"District"},{title:"eventManagement.startDate",filed:"startDate",type:"date",width:20,tipTitle:"Start Date"},{title:"eventManagement.endDate",filed:"endDate",type:"date",width:20,tipTitle:"End Date"},],url:"api/actualEvent/page",formParams:{eventName:d.formParam.eventName,startDate:d.formParam.startDate,endDate:d.formParam.endDate,}};d.checkOneAction=function(j){d.choseArr=[];angular.forEach(j,function(k){if(k.checked){d.choseArr.push(k)}})};d.checkAllAction=function(j){d.choseArr=[];angular.forEach(j,function(k){if(k.checked){d.choseArr.push(k)}})};d.editEvent=function(j){f.go("app.eventAddTerms",{id:j})};d.loadAll=function(){d.refreshTableList(d.formParam)};d.resetSearch=function(){d.formParam={}};d.addNewEvent=function(){f.go("app.eventEdit",{id:""})};d.editEvent=function(){if(d.choseArr.length!=1){var j="global.chooseOneEdit";e.openDialog(j);return}else{var k=d.choseArr[0]["id"];f.go("app.eventEdit",{id:k})}};d.openCalendar=function(j){d.datePickerOpenStatus[j]=true};d.checkStartTime=function(){if(d.formParam.startDate>d.formParam.endDate){var j="global.timeMsg1";e.openDialog(j);d.formParam.startDate=new Date()}};d.checkEndTime=function(){if(d.formParam.startDate>d.formParam.endDate){var j="global.timeMsg2";e.openDialog(j);d.formParam.endDate=new Date()}};d.batchDelete=function(){d.choseArr=d.getCheckValues("delFlag").check;var j="";if(e.isEmptyObject(d.choseArr[0])){j="global.selectDelete";e.openDialog(j);return}j="global.messages.deleteConfirm";e.showConfirmDialog(j,"confirmDelete",d,d.checked)};d.confirmDelete=function(j){i.deleteEvent(j).then(function(k){if(k.statusCode==="0000"){d.loadAll();var l="global.messages.deleteSuccess";e.openDialog(l)}})};b.$on("rootEventEdit",function(j,k){d.loadAll()})}})();